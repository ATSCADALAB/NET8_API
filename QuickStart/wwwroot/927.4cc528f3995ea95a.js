"use strict";(self.webpackChunkMatech=self.webpackChunkMatech||[]).push([[927],{3927:(Us,lt,v)=>{v.r(lt),v.d(lt,{UicomponentsModule:()=>xs});var X=v(8498),k=v(177),s=v(9417),bt=v(7008),Ct=v(4912),kt=v(5509),w=v(467),O=v(9217),P=v(5756),p=v(5686),t=v(4438),D=v(958),y=v(5794),dt=v(1413);let I=(()=>{class r{constructor(){this.refreshTab1=new dt.B,this.refreshTab1$=this.refreshTab1.asObservable()}triggerRefreshTab1(){this.refreshTab1.next()}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var S=v(1321),b=v(2524),U=v(1918),_=v(7421),j=v(2788),m=v(1818),E=v(5484),T=v(9308);let Ft=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.toastr=i,this.dataService=n,this.dialogserve=a,this.Ref=d,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,c)=>this.dataForm?.get(l)?.hasError(c),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{let c={firstName:l.firstName,lastName:l.lastName,dateOfBirth:l.dateOfBirth,address:l.address,country:l.country};console.log(c),this.repoService.create("api/customers",c).subscribe(f=>{this.dialogserve.openSuccessDialog("The customer has been added successfully.").afterClosed().subscribe(g=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},f=>{this.toastr.error(f)})}}ngOnInit(){this.dataForm=new s.gE({firstName:new s.MJ("",[s.k0.required,s.k0.maxLength(60)]),lastName:new s.MJ("",[s.k0.required,s.k0.maxLength(60)]),dateOfBirth:new s.MJ(new Date),address:new s.MJ("",[s.k0.required,s.k0.maxLength(100)]),country:new s.MJ("",[s.k0.required,s.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(y.tw),t.rXU(I),t.rXU(S.o),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-customer"]],decls:33,vars:4,consts:[["picker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","placeholder","Choose a date of birth","formControlName","dateOfBirth","id","dateOfBirth","readonly","",3,"click","matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","address"],["matInput","","formControlName","country"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){if(1&i){const a=t.RV6();t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Create customer"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return t.eBV(a),t.Njj(n.closeModal())}),t.j41(6,"mat-icon",5),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",6)(9,"form",7),t.bIt("ngSubmit",function(){return t.eBV(a),t.Njj(n.createData(n.dataForm.value))}),t.j41(10,"mat-form-field",8)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",9),t.k0s(),t.j41(14,"mat-form-field",8)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",10),t.k0s(),t.j41(18,"mat-form-field",8)(19,"input",11),t.bIt("click",function(){t.eBV(a);const l=t.sdS(22);return t.Njj(l.open())}),t.k0s(),t.nrm(20,"mat-datepicker-toggle",12)(21,"mat-datepicker",null,0),t.k0s(),t.j41(23,"mat-form-field",8)(24,"mat-label"),t.EFF(25,"Address"),t.k0s(),t.nrm(26,"input",13),t.k0s(),t.j41(27,"mat-form-field",8)(28,"mat-label"),t.EFF(29,"Country"),t.k0s(),t.nrm(30,"input",14),t.k0s(),t.j41(31,"button",15),t.EFF(32," Save "),t.k0s()()()()}if(2&i){const a=t.sdS(22);t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(10),t.Y8G("matDatepicker",a),t.R7$(),t.Y8G("for",a),t.R7$(11),t.Y8G("disabled",!n.dataForm.valid)}},dependencies:[U.Vh,U.bZ,U.bU,_.rl,_.nJ,_.yw,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})(),vt=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.toastr=i,this.dataService=n,this.dialogserve=a,this.data=d,this.Ref=l,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.repoService.update(`api/customers/${this.result.id}`,{firstName:c.firstName,lastName:c.lastName,dateOfBirth:c.dateOfBirth,address:c.address,country:c.country}).subscribe(F=>{this.dialogserve.openSuccessDialog("The customer has been updated successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},F=>{this.toastr.error(F)})},this.getCustomertoUpdate=()=>{const u=`api/customers/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:f=>{this.customer={...f},this.dataForm.patchValue(this.customer)},error:f=>{this.toastr.success(f)}})}}ngOnInit(){this.dataForm=new s.gE({firstName:new s.MJ("",[s.k0.required,s.k0.maxLength(60)]),lastName:new s.MJ("",[s.k0.required,s.k0.maxLength(60)]),dateOfBirth:new s.MJ(new Date),address:new s.MJ("",[s.k0.required,s.k0.maxLength(100)]),country:new s.MJ("",[s.k0.required,s.k0.maxLength(60)])}),this.result=this.data,this.getCustomertoUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(y.tw),t.rXU(I),t.rXU(S.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-update-customer"]],decls:33,vars:4,consts:[["picker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","placeholder","Choose a date of birth","formControlName","dateOfBirth","id","dateOfBirth","readonly","",3,"click","matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","address"],["matInput","","formControlName","country"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){if(1&i){const a=t.RV6();t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Update customer"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return t.eBV(a),t.Njj(n.closeModal())}),t.j41(6,"mat-icon",5),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",6)(9,"form",7),t.bIt("ngSubmit",function(){return t.eBV(a),t.Njj(n.createData(n.dataForm.value))}),t.j41(10,"mat-form-field",8)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",9),t.k0s(),t.j41(14,"mat-form-field",8)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",10),t.k0s(),t.j41(18,"mat-form-field",8)(19,"input",11),t.bIt("click",function(){t.eBV(a);const l=t.sdS(22);return t.Njj(l.open())}),t.k0s(),t.nrm(20,"mat-datepicker-toggle",12)(21,"mat-datepicker",null,0),t.k0s(),t.j41(23,"mat-form-field",8)(24,"mat-label"),t.EFF(25,"Address"),t.k0s(),t.nrm(26,"input",13),t.k0s(),t.j41(27,"mat-form-field",8)(28,"mat-label"),t.EFF(29,"Country"),t.k0s(),t.nrm(30,"input",14),t.k0s(),t.j41(31,"button",15),t.EFF(32," Update "),t.k0s()()()()}if(2&i){const a=t.sdS(22);t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(10),t.Y8G("matDatepicker",a),t.R7$(),t.Y8G("for",a),t.R7$(11),t.Y8G("disabled",!n.dataForm.valid)}},dependencies:[U.Vh,U.bZ,U.bU,_.rl,_.nJ,_.yw,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();var R=v(8269),q=v(6038);const Et=()=>[4,6,10,20];function Dt(r,o){1&r&&(t.j41(0,"th",26),t.EFF(1," Action "),t.k0s())}function wt(r,o){if(1&r){const e=t.RV6();t.j41(0,"td",27)(1,"button",28),t.EFF(2," Action "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",29,0)(7,"button",30),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.redirectToDetails(n.id))}),t.EFF(8," Details "),t.k0s(),t.j41(9,"button",30),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.updateCustomer(n.id))}),t.EFF(10," Edit "),t.k0s(),t.j41(11,"button",30),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.DeleteCustomer(n.id))}),t.EFF(12," Delete "),t.k0s()()()}if(2&r){const e=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function St(r,o){1&r&&(t.j41(0,"th",31),t.EFF(1," FirstName "),t.k0s())}function It(r,o){if(1&r&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.firstName," ")}}function Rt(r,o){1&r&&(t.j41(0,"th",31),t.EFF(1," LastName "),t.k0s())}function jt(r,o){if(1&r&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.lastName," ")}}function yt(r,o){1&r&&(t.j41(0,"th",31),t.EFF(1," DateOfBirth "),t.k0s())}function Tt(r,o){if(1&r&&(t.j41(0,"td",27),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.dateOfBirth,"mediumDate")," ")}}function Nt(r,o){1&r&&(t.j41(0,"th",31),t.EFF(1," Country "),t.k0s())}function $t(r,o){if(1&r&&(t.j41(0,"td",27),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.country," ")}}function Pt(r,o){1&r&&(t.j41(0,"th",26),t.EFF(1," Type "),t.k0s())}function xt(r,o){1&r&&(t.j41(0,"span",34),t.EFF(1," No Account "),t.k0s())}function Ut(r,o){1&r&&(t.j41(0,"span",35),t.EFF(1," Beginner "),t.k0s())}function At(r,o){1&r&&(t.j41(0,"span",36),t.EFF(1," Advanced "),t.k0s())}function Mt(r,o){1&r&&(t.j41(0,"span",34),t.EFF(1," Gold "),t.k0s())}function Ot(r,o){1&r&&(t.j41(0,"span",37),t.EFF(1," Platinum "),t.k0s())}function Gt(r,o){if(1&r&&(t.j41(0,"td",32),t.DNE(1,xt,2,0,"ng-template",33)(2,Ut,2,0,"ng-template",33)(3,At,2,0,"ng-template",33)(4,Mt,2,0,"ng-template",33)(5,Ot,2,0,"ng-template",33),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.Y8G("ngIf","0"==e.accountCount),t.R7$(),t.Y8G("ngIf","1"==e.accountCount),t.R7$(),t.Y8G("ngIf","2"==e.accountCount),t.R7$(),t.Y8G("ngIf","3"==e.accountCount),t.R7$(),t.Y8G("ngIf",+e.accountCount>=4)}}function Yt(r,o){1&r&&(t.j41(0,"th",26),t.EFF(1," Status "),t.k0s())}function qt(r,o){1&r&&(t.j41(0,"span",35),t.EFF(1," Active "),t.k0s())}function Lt(r,o){1&r&&(t.j41(0,"span",34),t.EFF(1," Blocked "),t.k0s())}function Bt(r,o){if(1&r&&(t.j41(0,"td",32),t.DNE(1,qt,2,0,"ng-template",33)(2,Lt,2,0,"ng-template",33),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",1==e.status),t.R7$(),t.Y8G("ngIf",0==e.status)}}function Xt(r,o){1&r&&(t.j41(0,"th",26),t.EFF(1," Details "),t.k0s())}function Vt(r,o){1&r&&(t.j41(0,"td",27)(1,"mat-icon",38),t.EFF(2,"remove_red_eye"),t.k0s()())}function Ht(r,o){1&r&&t.nrm(0,"tr",39)}function Jt(r,o){1&r&&t.nrm(0,"tr",40)}let Wt=(()=>{class r{constructor(e,i,n,a,d,l){var c=this;this.repoService=e,this.router=i,this.toastr=n,this.dialog=a,this.dataService=d,this.dialogserve=l,this.displayedColumns=["action","firstName","lastName","dateOfBirth","country","type","status"],this.dataSource=new p.I6,this.doFilter=u=>{this.dataSource.filter=u.trim().toLocaleLowerCase()},this.redirectToDetails=function(){var u=(0,w.A)(function*(f){c.router.navigate([`/ui-components/customer-details/${f}`])});return function(f){return u.apply(this,arguments)}}(),this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getCustomers()})}ngOnInit(){this.getCustomers()}getCustomers(){this.repoService.getData("api/customers").subscribe(e=>{this.dataSource.data=e},e=>{console.log(e)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}addCustomer(){this.dialog.open(Ft,{width:"500px",height:"545px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateCustomer(e){this.dialog.open(vt,{width:"500px",height:"545px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:e}})}DeleteCustomer(e){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the customer ?").afterClosed().subscribe(i=>{i&&this.repoService.delete(`api/customers/${e}`).subscribe(a=>{this.dialogserve.openSuccessDialog("The customer has been deleted successfully.").afterClosed().subscribe(d=>{this.getCustomers()})})})}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(X.Ix),t.rXU(y.tw),t.rXU(b.bZ),t.rXU(I),t.rXU(S.o))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-lists"]],viewQuery:function(i,n){if(1&i&&(t.GBs(O.iy,5),t.GBs(P.B4,5)),2&i){let a;t.mGM(a=t.lsd())&&(n.paginator=a.first),t.mGM(a=t.lsd())&&(n.sort=a.first)}},decls:42,vars:6,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],[1,"table-responsive","m-t-16"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","firstName"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","lastName"],["matColumnDef","dateOfBirth"],["matColumnDef","country"],["matColumnDef","type"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","Details"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[3,"ngIf"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-primary","text-primary","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-success","text-success","rounded","f-w-600","p-6","p-y-4","f-s-12"],["color","primary"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Customers"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return n.addCustomer()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.j41(8,"span",5),t.EFF(9,"Create new customer"),t.k0s()()(),t.j41(10,"mat-card-content",6)(11,"mat-form-field",7)(12,"input",8),t.bIt("keyup",function(d){return n.doFilter(d.target.value)}),t.k0s()(),t.j41(13,"div",9)(14,"table",10),t.qex(15,11),t.DNE(16,Dt,2,0,"th",12)(17,wt,13,1,"td",13),t.bVm(),t.qex(18,14),t.DNE(19,St,2,0,"th",15)(20,It,2,1,"td",13),t.bVm(),t.qex(21,16),t.DNE(22,Rt,2,0,"th",15)(23,jt,2,1,"td",13),t.bVm(),t.qex(24,17),t.DNE(25,yt,2,0,"th",15)(26,Tt,3,4,"td",13),t.bVm(),t.qex(27,18),t.DNE(28,Nt,2,0,"th",15)(29,$t,2,1,"td",13),t.bVm(),t.qex(30,19),t.DNE(31,Pt,2,0,"th",12)(32,Gt,6,5,"td",20),t.bVm(),t.qex(33,21),t.DNE(34,Yt,2,0,"th",12)(35,Bt,3,2,"td",20),t.bVm(),t.qex(36,22),t.DNE(37,Xt,2,0,"th",12)(38,Vt,3,0,"td",13),t.bVm(),t.DNE(39,Ht,1,0,"tr",23)(40,Jt,1,0,"tr",24),t.k0s()(),t.nrm(41,"mat-paginator",25),t.k0s()()),2&i&&(t.R7$(14),t.Y8G("dataSource",n.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,Et)))},dependencies:[k.bT,_.rl,j.fg,R.kk,R.fb,R.Cp,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,O.iy,P.B4,P.aE,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,q.Om,k.vh],encapsulation:2})}return r})();var zt=v(1682),ot=v(1351);function Zt(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Please provide a valid email"),t.k0s())}function Qt(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Email is required"),t.k0s())}function Kt(r,o){if(1&r){const e=t.RV6();t.j41(0,"div")(1,"mat-checkbox",15),t.bIt("change",function(n){const a=t.eBV(e).$implicit,d=t.XpG();return t.Njj(d.toggleRoleSelection(n,a.name))}),t.EFF(2),t.k0s()()}if(2&r){const e=o.$implicit,i=t.XpG();t.R7$(),t.Y8G("checked",i.isSelected(e.name)),t.R7$(),t.SpI(" ",e.name," ")}}let te=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.dataService=i,this.toastr=n,this.dialogserve=a,this.authService=d,this.Ref=l,this.selectedRoles=[],this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.authService.registerUser("api/authentication",{firstName:c.firstName,lastName:c.lastName,userName:c.userName,email:c.email,roles:this.selectedRoles}).subscribe(g=>{this.dialogserve.openSuccessDialog("The default password is sent to the user's email address").afterClosed().subscribe(F=>{this.dialogserve.openSuccessDialog("The user has been added successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})})},g=>{this.dialogserve.openErrorDialog(g.message).afterClosed().subscribe(F=>{})})}}ngOnInit(){this.dataForm=new s.gE({firstName:new s.MJ("",[s.k0.required,s.k0.maxLength(60)]),lastName:new s.MJ("",[s.k0.required,s.k0.maxLength(60)]),userName:new s.MJ("",[s.k0.required,s.k0.maxLength(60)]),email:new s.MJ("",[s.k0.required,s.k0.email])}),this.getRoles()}getRoles(){this.repoService.getData("api/roles").subscribe(e=>{this.roles=e},e=>{this.toastr.success(e)})}isSelected(e){return this.selectedRoles.includes(e)}toggleRoleSelection(e,i){e.checked?this.selectedRoles.push(i):this.selectedRoles=this.selectedRoles.filter(n=>n!==i)}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(I),t.rXU(y.tw),t.rXU(S.o),t.rXU(zt.k),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-user"]],decls:33,vars:5,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","userName"],["matInput","","type","email","formControlName","email"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled"],[3,"change","checked"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create user"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"mat-form-field",7)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",9),t.k0s(),t.j41(18,"mat-form-field",7)(19,"mat-label"),t.EFF(20,"User Name"),t.k0s(),t.nrm(21,"input",10),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Email"),t.k0s(),t.nrm(25,"input",11),t.DNE(26,Zt,2,0,"mat-error",12)(27,Qt,2,0,"mat-error",12),t.k0s(),t.j41(28,"mat-label"),t.EFF(29,"Roles"),t.k0s(),t.DNE(30,Kt,3,2,"div",13),t.j41(31,"button",14),t.EFF(32," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(17),t.Y8G("ngIf",n.validateControl("email")&&n.hasError("email","email")),t.R7$(),t.Y8G("ngIf",n.validateControl("email")&&n.hasError("email","required")),t.R7$(3),t.Y8G("ngForOf",n.roles),t.R7$(),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[k.Sq,k.bT,ot.So,_.rl,_.nJ,_.TL,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();function ee(r,o){if(1&r){const e=t.RV6();t.j41(0,"div")(1,"mat-checkbox",14),t.bIt("change",function(n){const a=t.eBV(e).$implicit,d=t.XpG();return t.Njj(d.toggleRoleSelection(n,a.name))}),t.EFF(2),t.k0s()()}if(2&r){const e=o.$implicit,i=t.XpG();t.R7$(),t.Y8G("checked",i.isSelected(e.name)),t.R7$(),t.SpI(" ",e.name," ")}}let re=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.dataService=i,this.toastr=n,this.dialogserve=a,this.data=d,this.Ref=l,this.selectedRoles=[],this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.repoService.update(`api/users/${this.result.id}`,{firstName:c.firstName,lastName:c.lastName,userName:c.userName,email:c.email,roles:this.selectedRoles}).subscribe(F=>{this.dialogserve.openSuccessDialog("The user has been updated successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},F=>{this.toastr.error(F),this.Ref.close([])})},this.getUsertoUpdate=()=>{const u=`api/users/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:f=>{this.user={...f},this.dataForm.patchValue(this.user),this.selectedRoles=this.user.roles},error:f=>{this.toastr.error(f)}})}}ngOnInit(){this.dataForm=new s.gE({firstName:new s.MJ("",[s.k0.required,s.k0.maxLength(60)]),lastName:new s.MJ("",[s.k0.required,s.k0.maxLength(60)]),userName:new s.MJ("",[s.k0.required,s.k0.maxLength(60)]),email:new s.MJ("",[s.k0.required,s.k0.maxLength(100)])}),this.getRoles(),this.result=this.data,this.getUsertoUpdate()}getRoles(){this.repoService.getData("api/roles").subscribe(e=>{this.roles=e},e=>{this.toastr.error(e)})}toggleRoleSelection(e,i){e.checked?this.selectedRoles.push(i):this.selectedRoles=this.selectedRoles.filter(n=>n!==i)}closeModal(){this.Ref.close([])}isSelected(e){return this.selectedRoles.includes(e)}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(I),t.rXU(y.tw),t.rXU(S.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-update-user"]],decls:31,vars:3,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","userName"],["matInput","","formControlName","email"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled"],[3,"change","checked"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update user"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"First Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"mat-form-field",7)(15,"mat-label"),t.EFF(16,"Last Name"),t.k0s(),t.nrm(17,"input",9),t.k0s(),t.j41(18,"mat-form-field",7)(19,"mat-label"),t.EFF(20,"User Name"),t.k0s(),t.nrm(21,"input",10),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Email"),t.k0s(),t.nrm(25,"input",11),t.k0s(),t.j41(26,"mat-label"),t.EFF(27,"Roles"),t.k0s(),t.DNE(28,ee,3,2,"div",12),t.j41(29,"button",13),t.EFF(30," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(19),t.Y8G("ngForOf",n.roles),t.R7$(),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[k.Sq,ot.So,_.rl,_.nJ,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();const oe=()=>[4,6,10,20];function ne(r,o){1&r&&(t.j41(0,"th",25),t.EFF(1," Action "),t.k0s())}function ie(r,o){if(1&r){const e=t.RV6();t.j41(0,"td",26)(1,"button",27),t.EFF(2," Action"),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",28,0)(7,"button",29),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.updateUser(n.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",29),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.DeleteUser(n.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&r){const e=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function ae(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," User Name "),t.k0s())}function se(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.userName," ")}}function ce(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," First Name "),t.k0s())}function le(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.firstName," ")}}function de(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Last Name "),t.k0s())}function me(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.lastName," ")}}function ue(r,o){1&r&&(t.j41(0,"th",25),t.EFF(1," Roles "),t.k0s())}function pe(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.roles," ")}}function he(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Email "),t.k0s())}function fe(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.email," ")}}function _e(r,o){1&r&&(t.j41(0,"th",25),t.EFF(1," Email confirm "),t.k0s())}function ge(r,o){1&r&&(t.j41(0,"span",33),t.EFF(1," Yes "),t.k0s())}function be(r,o){1&r&&(t.j41(0,"span",34),t.EFF(1," No "),t.k0s())}function Ce(r,o){if(1&r&&(t.j41(0,"td",31),t.DNE(1,ge,2,0,"ng-template",32)(2,be,2,0,"ng-template",32),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.Y8G("ngIf","True"==e.emailConfirmed),t.R7$(),t.Y8G("ngIf","False"==e.emailConfirmed)}}function ke(r,o){1&r&&t.nrm(0,"tr",35)}function Fe(r,o){1&r&&t.nrm(0,"tr",36)}let ve=(()=>{class r{constructor(e,i,n,a){this.repoService=e,this.dialog=i,this.dialogserve=n,this.dataService=a,this.displayedColumns=["action","username","name","surname","roles","email","emailconfirm"],this.dataSource=new p.I6,this.doFilter=d=>{this.dataSource.filter=d.trim().toLocaleLowerCase()},this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getUsers()})}ngOnInit(){this.getUsers()}getUsers(){this.repoService.getData("api/users").subscribe(e=>{this.dataSource.data=e},e=>{console.log(e)})}addUser(){this.dialog.open(te,{width:"500px",height:"570px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateUser(e){this.dialog.open(re,{width:"500px",height:"567px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:e}})}DeleteUser(e){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the user ?").afterClosed().subscribe(i=>{i&&this.repoService.delete(`api/users/${e}`).subscribe(a=>{this.dialogserve.openSuccessDialog("The user has been deleted successfully.").afterClosed().subscribe(d=>{this.getUsers()})})})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(b.bZ),t.rXU(S.o),t.rXU(I))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-users"]],viewQuery:function(i,n){if(1&i&&(t.GBs(O.iy,5),t.GBs(P.B4,5)),2&i){let a;t.mGM(a=t.lsd())&&(n.paginator=a.first),t.mGM(a=t.lsd())&&(n.sort=a.first)}},decls:39,vars:6,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","username"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","surname"],["matColumnDef","roles"],["matColumnDef","email"],["matColumnDef","emailconfirm"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[3,"ngIf"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Users"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return n.addUser()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.j41(8,"span",5),t.EFF(9,"Create new user"),t.k0s()()(),t.j41(10,"mat-card-content",6)(11,"div",7)(12,"mat-form-field",8)(13,"input",9),t.bIt("keyup",function(d){return n.doFilter(d.target.value)}),t.k0s()(),t.j41(14,"table",10),t.qex(15,11),t.DNE(16,ne,2,0,"th",12)(17,ie,11,1,"td",13),t.bVm(),t.qex(18,14),t.DNE(19,ae,2,0,"th",15)(20,se,2,1,"td",13),t.bVm(),t.qex(21,16),t.DNE(22,ce,2,0,"th",15)(23,le,2,1,"td",13),t.bVm(),t.qex(24,17),t.DNE(25,de,2,0,"th",15)(26,me,2,1,"td",13),t.bVm(),t.qex(27,18),t.DNE(28,ue,2,0,"th",12)(29,pe,2,1,"td",13),t.bVm(),t.qex(30,19),t.DNE(31,he,2,0,"th",15)(32,fe,2,1,"td",13),t.bVm(),t.qex(33,20),t.DNE(34,_e,2,0,"th",12)(35,Ce,3,2,"td",21),t.bVm(),t.DNE(36,ke,1,0,"tr",22)(37,Fe,1,0,"tr",23),t.k0s()(),t.nrm(38,"mat-paginator",24),t.k0s()()),2&i&&(t.R7$(14),t.Y8G("dataSource",n.dataSource),t.R7$(22),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,oe)))},dependencies:[k.bT,_.rl,j.fg,R.kk,R.fb,R.Cp,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,O.iy,P.B4,P.aE,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,q.Om],encapsulation:2})}return r})(),Ee=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.toastr=i,this.dataService=n,this.dialogserve=a,this.data=d,this.Ref=l,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.repoService.update(`api/roles/${this.result.id}`,{name:c.name}).subscribe(F=>{this.dialogserve.openSuccessDialog("The role has been updated successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},F=>{this.toastr.error(F),this.Ref.close([])})},this.getRoletoUpdate=()=>{const u=`api/roles/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:f=>{this.role={...f},this.dataForm.patchValue(this.role)},error:f=>{this.toastr.success(f)}})}}ngOnInit(){this.dataForm=new s.gE({name:new s.MJ("",[s.k0.required,s.k0.maxLength(60)])}),this.result=this.data,this.getRoletoUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(y.tw),t.rXU(I),t.rXU(S.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-update-role"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[_.rl,_.nJ,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})(),De=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.toastr=i,this.dataService=n,this.dialogserve=a,this.Ref=d,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,c)=>this.dataForm?.get(l)?.hasError(c),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.create("api/roles",{name:l.name}).subscribe(f=>{this.dialogserve.openSuccessDialog("The role has been added successfully.").afterClosed().subscribe(g=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},f=>{this.toastr.error(f),this.Ref.close([])})}}ngOnInit(){this.dataForm=new s.gE({name:new s.MJ("",[s.k0.required,s.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(y.tw),t.rXU(I),t.rXU(S.o),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-role"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[_.rl,_.nJ,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();var we=v(8661);function Se(r,o){1&r&&(t.j41(0,"th",17),t.EFF(1,"Category"),t.k0s())}function Ie(r,o){if(1&r&&(t.j41(0,"td",18)(1,"span",19),t.EFF(2),t.k0s()()),2&r){const e=o.$implicit;t.R7$(2),t.JRh(e.name)}}function Re(r,o){if(1&r&&(t.j41(0,"th",17),t.EFF(1),t.k0s()),2&r){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.name)}}function je(r,o){if(1&r){const e=t.RV6();t.j41(0,"mat-checkbox",22),t.mxI("ngModelChange",function(n){t.eBV(e);const a=t.XpG().$implicit,d=t.XpG().$implicit,l=t.XpG();return t.DH7(l.permissionAssignments[a.id][d.id],n)||(l.permissionAssignments[a.id][d.id]=n),t.Njj(n)}),t.k0s()}if(2&r){const e=t.XpG().$implicit,i=t.XpG().$implicit,n=t.XpG();t.R50("ngModel",n.permissionAssignments[e.id][i.id])}}function ye(r,o){if(1&r&&(t.j41(0,"td",18),t.DNE(1,je,1,1,"mat-checkbox",21),t.k0s()),2&r){const e=o.$implicit,i=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",e.id&&i.id)}}function Te(r,o){if(1&r&&(t.qex(0,20),t.DNE(1,Re,2,1,"th",7)(2,ye,2,1,"td",8),t.bVm()),2&r){let e;t.Y8G("matColumnDef",null!==(e=o.$implicit.name)&&void 0!==e?e:"unknown")}}function Ne(r,o){1&r&&t.nrm(0,"tr",23)}function $e(r,o){1&r&&t.nrm(0,"tr",24)}function Pe(r,o){1&r&&t.nrm(0,"mat-spinner",25)}function xe(r,o){1&r&&(t.j41(0,"span"),t.EFF(1,"Save Permissions"),t.k0s())}let Ue=(()=>{class r{constructor(e,i,n){this.repoService=e,this.dialogRef=i,this.data=n,this.categories=[],this.permissions=[],this.rolePermissions=[],this.permissionAssignments={},this.displayedColumns=[],this.isSaving=!1,this.roleId=n.roleId}ngOnInit(){this.loadCategories(),this.loadPermissions(),this.loadRolePermissions()}loadCategories(){this.repoService.getData("api/categories").subscribe({next:e=>{this.categories=e,this.initializeAssignments()},error:e=>{console.error("Error loading categories:",e),alert("Failed to load categories")}})}loadPermissions(){this.repoService.getData("api/permissions").subscribe({next:e=>{const i=e;this.permissions=i,this.displayedColumns=["category",...i.map(n=>n.name??"")],this.initializeAssignments()},error:e=>{console.error("Error loading permissions:",e),alert("Failed to load permissions")}})}loadRolePermissions(){console.log("Role ID:",this.roleId),this.repoService.getData(`api/rolepermissions/role/${this.roleId}`).subscribe({next:e=>{this.rolePermissions=e,this.initializeAssignments()},error:e=>{console.error("Error loading role permissions:",e),alert("Failed to load role permissions")}})}initializeAssignments(){0===this.categories.length||0===this.permissions.length||(this.permissionAssignments={},this.categories.forEach(e=>{e.id&&(this.permissionAssignments[e.id]={}),this.permissions.forEach(i=>{const n=this.rolePermissions.some(a=>a.categoryId===e.id&&a.permissionId===i.id);e.id&&i.id&&(this.permissionAssignments[e.id][i.id]=n)})}))}savePermissions(){this.isSaving=!0;const e={roleId:this.roleId,categoryAssignments:[]};this.categories.forEach(i=>{const n=this.permissions.filter(a=>i.id&&a.id&&this.permissionAssignments[i.id][a.id]).map(a=>a.id);if(n.length>0&&i.id){const a={categoryId:i.id,permissionIds:n.filter(d=>!!d)};e.categoryAssignments.push(a)}}),this.repoService.create("api/rolepermissions/assign",e).subscribe({next:()=>{alert("Permissions assigned successfully"),this.isSaving=!1,this.dialogRef.close(!0)},error:i=>{console.error("Error assigning permissions:",i),this.isSaving=!1,alert("Failed to assign permissions")}})}closeModal(){this.dialogRef.close()}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(b.CP),t.rXU(b.Vh))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-assign-permissions"]],decls:20,vars:7,consts:[[1,"modal-card"],[1,"header"],[1,"spacer"],[1,"content"],[1,"table-container"],["mat-table","",1,"permission-table",3,"dataSource"],["matColumnDef","category"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","permission-row",4,"matRowDef","matRowDefColumns"],[1,"actions"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"category-name"],[3,"matColumnDef"],["color","primary","class","permission-checkbox",3,"ngModel","ngModelChange",4,"ngIf"],["color","primary",1,"permission-checkbox",3,"ngModelChange","ngModel"],["mat-header-row",""],["mat-row","",1,"permission-row"],["diameter","20"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),t.EFF(3,"Assign Permissions"),t.k0s(),t.nrm(4,"span",2),t.k0s(),t.j41(5,"mat-card-content",3)(6,"div",4)(7,"table",5),t.qex(8,6),t.DNE(9,Se,2,0,"th",7)(10,Ie,3,1,"td",8),t.bVm(),t.DNE(11,Te,3,1,"ng-container",9)(12,Ne,1,0,"tr",10)(13,$e,1,0,"tr",11),t.k0s()(),t.j41(14,"div",12)(15,"button",13),t.bIt("click",function(){return n.closeModal()}),t.EFF(16,"Cancel"),t.k0s(),t.j41(17,"button",14),t.bIt("click",function(){return n.savePermissions()}),t.DNE(18,Pe,1,0,"mat-spinner",15)(19,xe,2,0,"span",16),t.k0s()()()()),2&i&&(t.R7$(7),t.Y8G("dataSource",n.categories),t.R7$(4),t.Y8G("ngForOf",n.permissions),t.R7$(),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(4),t.Y8G("disabled",n.isSaving),t.R7$(),t.Y8G("ngIf",n.isSaving),t.R7$(),t.Y8G("ngIf",!n.isSaving))},dependencies:[k.Sq,k.bT,ot.So,m.RN,m.m2,m.MM,m.dh,E.$z,we.LG,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,s.BC,s.vS],styles:[".modal-card[_ngcontent-%COMP%]{width:700px;max-height:80vh;border-radius:8px;box-shadow:0 4px 12px #00000026}.header[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-bottom:1px solid #e0e0e0}.header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#333}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.content[_ngcontent-%COMP%]{padding:24px;overflow-y:auto}.table-container[_ngcontent-%COMP%]{margin-bottom:24px;max-height:400px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:4px}.permission-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.permission-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .permission-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:center;border-bottom:1px solid #e0e0e0}.permission-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#555;position:sticky;top:0;z-index:1}.permission-row[_ngcontent-%COMP%]:hover{background-color:#f9f9f9;cursor:pointer}.category-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.permission-checkbox[_ngcontent-%COMP%]{transition:transform .2s ease}.permission-checkbox[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:4px}.actions[_ngcontent-%COMP%]   button[mat-flat-button][_ngcontent-%COMP%]{font-weight:500}.actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:disabled{background-color:#ccc}mat-spinner[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-right:8px}"]})}return r})();function Ae(r,o){1&r&&(t.j41(0,"th",15),t.EFF(1," Action "),t.k0s())}function Me(r,o){if(1&r){const e=t.RV6();t.j41(0,"td",16)(1,"button",17),t.EFF(2," Action "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",18,0)(7,"button",19),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.updateRole(n.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",19),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.assignPermissions(n.id))}),t.EFF(10," Assign Permissions "),t.k0s(),t.j41(11,"button",19),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.deleteRole(n.id))}),t.EFF(12," Delete "),t.k0s()()()}if(2&r){const e=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function Oe(r,o){1&r&&(t.j41(0,"th",15),t.EFF(1," Role Name "),t.k0s())}function Ge(r,o){if(1&r&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.name," ")}}function Ye(r,o){1&r&&(t.j41(0,"th",15),t.EFF(1," Creation time "),t.k0s())}function qe(r,o){if(1&r&&(t.j41(0,"td",16),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.dateCreated,"medium")," ")}}function Le(r,o){1&r&&t.nrm(0,"tr",20)}function Be(r,o){1&r&&t.nrm(0,"tr",21)}let Xe=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.dialog=i,this.toastr=n,this.dataService=a,this.dialogserve=d,this.displayedColumns=["action","role","date"],this.dataSource=new p.I6,this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getRoles()})}ngOnInit(){this.getRoles()}getRoles(){this.repoService.getData("api/roles").subscribe({next:e=>{this.dataSource.data=e},error:e=>{console.error("Error loading roles:",e),this.toastr.error("Failed to load roles")}})}addRole(){this.dialog.open(De,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateRole(e){this.dialog.open(Ee,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:e}})}assignPermissions(e){this.dialog.open(Ue,{width:"700px",maxHeight:"80vh",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{roleId:e}}).afterClosed().subscribe(n=>{n&&this.getRoles()})}deleteRole(e){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the role?").afterClosed().subscribe(i=>{i&&this.repoService.delete(`api/roles/${e}`).subscribe({next:()=>{this.dialogserve.openSuccessDialog("The role has been deleted successfully.").afterClosed().subscribe(()=>{this.getRoles()})},error:a=>{console.error("Error deleting role:",a),this.toastr.error("Failed to delete role")}})})}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(b.bZ),t.rXU(y.tw),t.rXU(I),t.rXU(S.o))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-roles"]],decls:23,vars:3,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"User roles"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return n.addRole()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.EFF(8,"Create new role "),t.k0s()(),t.j41(9,"mat-card-content",5)(10,"div",6)(11,"table",7),t.qex(12,8),t.DNE(13,Ae,2,0,"th",9)(14,Me,13,1,"td",10),t.bVm(),t.qex(15,11),t.DNE(16,Oe,2,0,"th",9)(17,Ge,2,1,"td",10),t.bVm(),t.qex(18,12),t.DNE(19,Ye,2,0,"th",9)(20,qe,3,4,"td",10),t.bVm(),t.DNE(21,Le,1,0,"tr",13)(22,Be,1,0,"tr",14),t.k0s()()()()),2&i&&(t.R7$(11),t.Y8G("dataSource",n.dataSource),t.R7$(10),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns))},dependencies:[R.kk,R.fb,R.Cp,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,k.vh],encapsulation:2})}return r})();const Ve=()=>[4,6,10,20];function He(r,o){1&r&&(t.j41(0,"th",18),t.EFF(1," Entity "),t.k0s())}function Je(r,o){if(1&r&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.entityName," ")}}function We(r,o){1&r&&(t.j41(0,"th",20),t.EFF(1," Action "),t.k0s())}function ze(r,o){if(1&r&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.action," ")}}function Ze(r,o){1&r&&(t.j41(0,"th",18),t.EFF(1," Creation time "),t.k0s())}function Qe(r,o){if(1&r&&(t.j41(0,"td",19),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.timestamp,"medium")," ")}}function Ke(r,o){1&r&&(t.j41(0,"th",20),t.EFF(1," Changes "),t.k0s())}function tr(r,o){if(1&r&&(t.j41(0,"td",19),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.changes," ")}}function er(r,o){1&r&&t.nrm(0,"tr",21)}function rr(r,o){1&r&&t.nrm(0,"tr",22)}let or=(()=>{class r{constructor(e){this.repoService=e,this.displayedColumns=["name","action","date","change"],this.dataSource=new p.I6}ngOnInit(){this.getRoles()}getRoles(){this.repoService.getData("api/audits").subscribe(e=>{this.dataSource.data=e},e=>{console.log(e)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.getRoles()}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-audits"]],viewQuery:function(i,n){if(1&i&&(t.GBs(O.iy,5),t.GBs(P.B4,5)),2&i){let a;t.mGM(a=t.lsd())&&(n.paginator=a.first),t.mGM(a=t.lsd())&&(n.sort=a.first)}},decls:28,vars:6,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","accent","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["matColumnDef","date"],["matColumnDef","change"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Audit logs"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.refresh()}),t.j41(6,"span",4),t.EFF(7,"Refresh"),t.k0s(),t.j41(8,"mat-icon"),t.EFF(9,"refresh"),t.k0s()()(),t.j41(10,"mat-card-content",5)(11,"div",6)(12,"table",7),t.qex(13,8),t.DNE(14,He,2,0,"th",9)(15,Je,2,1,"td",10),t.bVm(),t.qex(16,11),t.DNE(17,We,2,0,"th",12)(18,ze,2,1,"td",10),t.bVm(),t.qex(19,13),t.DNE(20,Ze,2,0,"th",9)(21,Qe,3,4,"td",10),t.bVm(),t.qex(22,14),t.DNE(23,Ke,2,0,"th",12)(24,tr,2,1,"td",10),t.bVm(),t.DNE(25,er,1,0,"tr",15)(26,rr,1,0,"tr",16),t.k0s()(),t.nrm(27,"mat-paginator",17),t.k0s()()),2&i&&(t.R7$(12),t.Y8G("dataSource",n.dataSource),t.R7$(13),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,Ve)))},dependencies:[m.RN,m.m2,m.MM,m.dh,E.$z,T.An,O.iy,P.B4,P.aE,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,q.Om,k.vh],encapsulation:2})}return r})(),nr=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.toastr=i,this.dataService=n,this.dialogserve=a,this.data=d,this.Ref=l,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.repoService.create(`api/customers/${this.result.id}/accounts`,{accountType:c.accountType}).subscribe(F=>{this.dialogserve.openSuccessDialog("The account has been added successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},F=>{this.toastr.error(F)})}}ngOnInit(){this.dataForm=new s.gE({accountType:new s.MJ("",[s.k0.required,s.k0.maxLength(60)])}),this.result=this.data}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(y.tw),t.rXU(I),t.rXU(S.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-account"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","accountType"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create Account"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Account type"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[_.rl,_.nJ,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();var B=v(2608);function ir(r,o){if(1&r){const e=t.RV6();t.j41(0,"div",13)(1,"mat-card",7)(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4),t.k0s()(),t.j41(5,"mat-card-content",4)(6,"mat-list")(7,"mat-list-item")(8,"span",8),t.EFF(9,"Created"),t.k0s(),t.j41(10,"span",9),t.EFF(11),t.nI1(12,"date"),t.k0s()()(),t.j41(13,"button",14),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.DeleteCustomer(n.id))}),t.EFF(14," Delete "),t.k0s()()()()}if(2&r){const e=o.$implicit;t.R7$(4),t.SpI("Account: ",e.accountType,""),t.R7$(7),t.JRh(t.i5U(12,2,e.dateCreated,"medium"))}}let ar=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.router=i,this.dialog=n,this.dialogserve=a,this.activeRoute=d}ngOnInit(){this.getCustomer(),this.getCustomerAccount()}getCustomer(){this.repoService.getData(`api/customers/${this.activeRoute.snapshot.params.id}`).subscribe(i=>{this.customer=i},i=>{this.dialogserve.openErrorDialog(i).afterClosed().subscribe(n=>{this.router.navigate(["/ui-components/lists"])})})}getCustomerAccount(){this.repoService.getData(`api/customers/${this.activeRoute.snapshot.params.id}/accounts`).subscribe(i=>{this.accounts=i},i=>{})}addAccount(e){this.dialog.open(nr,{width:"500px",height:"270px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:e}})}DeleteCustomer(e){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the account ?").afterClosed().subscribe(i=>{i&&this.repoService.delete(`api/customers/${this.activeRoute.snapshot.params.id}/accounts/${e}`).subscribe(d=>{this.getCustomer()})})}close(){this.router.navigate(["/ui-components/lists"])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(X.Ix),t.rXU(b.bZ),t.rXU(S.o),t.rXU(X.nX))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-details"]],decls:60,vars:9,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"row"],[1,"col-lg-6"],[1,"b-1","shadow-none"],["matListItemTitle","",1,"f-s-16","f-w-600"],["matListItemLine","",1,"mat-body-1"],[1,"col-12"],["fxHide.xs",""],["class","col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-lg-4"],["mat-flat-button","","color","warn",1,"m-t-8",3,"click"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Customer details"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.close()}),t.j41(6,"mat-icon"),t.EFF(7,"close"),t.k0s(),t.EFF(8," Close "),t.k0s()(),t.j41(9,"mat-card-content",4)(10,"div",5)(11,"div",6)(12,"mat-card",7)(13,"mat-card-header")(14,"mat-card-title"),t.EFF(15,"Basic information"),t.k0s()(),t.j41(16,"mat-card-content",4)(17,"mat-list")(18,"mat-list-item")(19,"span",8),t.EFF(20,"Full Name"),t.k0s(),t.j41(21,"span",9),t.EFF(22),t.k0s()(),t.j41(23,"mat-list-item")(24,"span",8),t.EFF(25,"Date of birth"),t.k0s(),t.j41(26,"span",9),t.EFF(27),t.nI1(28,"date"),t.k0s()()()()()(),t.j41(29,"div",6)(30,"mat-card",7)(31,"mat-card-header")(32,"mat-card-title"),t.EFF(33,"Address"),t.k0s()(),t.j41(34,"mat-card-content",4)(35,"mat-list")(36,"mat-list-item")(37,"span",8),t.EFF(38,"Resident address"),t.k0s(),t.j41(39,"span",9),t.EFF(40),t.k0s()(),t.j41(41,"mat-list-item")(42,"span",8),t.EFF(43,"Country"),t.k0s(),t.j41(44,"span",9),t.EFF(45),t.k0s()()()()()(),t.j41(46,"div",10)(47,"mat-card",7)(48,"mat-card-header")(49,"mat-card-title"),t.EFF(50),t.k0s(),t.nrm(51,"span",2),t.j41(52,"button",3),t.bIt("click",function(){return n.addAccount(n.customer.id)}),t.j41(53,"mat-icon"),t.EFF(54,"add"),t.k0s(),t.j41(55,"span",11),t.EFF(56,"Create new account "),t.k0s()()(),t.j41(57,"mat-card-content",4)(58,"div",5),t.DNE(59,ir,15,5,"div",12),t.k0s()()()()()()()),2&i&&(t.R7$(22),t.Lme("",null==n.customer?null:n.customer.firstName," ",null==n.customer?null:n.customer.lastName,""),t.R7$(5),t.JRh(t.bMT(28,7,null==n.customer?null:n.customer.dateOfBirth)),t.R7$(13),t.JRh(null==n.customer?null:n.customer.address),t.R7$(5),t.JRh(null==n.customer?null:n.customer.country),t.R7$(5),t.SpI("Accounts (",null==n.customer?null:n.customer.accountCount,")"),t.R7$(9),t.Y8G("ngForOf",n.accounts))},dependencies:[k.Sq,m.RN,m.m2,m.MM,m.dh,B.jt,B.YE,B.C_,B.yE,E.$z,T.An,q.Om,k.vh],encapsulation:2})}return r})();const sr=[0,2e3,1e4,3e4,null];class mt{constructor(o){this._retryDelays=void 0!==o?[...o,null]:sr}nextRetryDelayInMilliseconds(o){return this._retryDelays[o.previousRetryCount]}}let z=(()=>{class r{}return r.Authorization="Authorization",r.Cookie="Cookie",r})();class ut{constructor(o,e,i){this.statusCode=o,this.statusText=e,this.content=i}}class tt{get(o,e){return this.send({...e,method:"GET",url:o})}post(o,e){return this.send({...e,method:"POST",url:o})}delete(o,e){return this.send({...e,method:"DELETE",url:o})}getCookieString(o){return""}}class cr extends tt{constructor(o,e){super(),this._innerClient=o,this._accessTokenFactory=e}send(o){var e=this;return(0,w.A)(function*(){let i=!0;e._accessTokenFactory&&(!e._accessToken||o.url&&o.url.indexOf("/negotiate?")>0)&&(i=!1,e._accessToken=yield e._accessTokenFactory()),e._setAuthorizationHeader(o);const n=yield e._innerClient.send(o);return i&&401===n.statusCode&&e._accessTokenFactory?(e._accessToken=yield e._accessTokenFactory(),e._setAuthorizationHeader(o),yield e._innerClient.send(o)):n})()}_setAuthorizationHeader(o){o.headers||(o.headers={}),this._accessToken?o.headers[z.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&o.headers[z.Authorization]&&delete o.headers[z.Authorization]}getCookieString(o){return this._innerClient.getCookieString(o)}}class V extends Error{constructor(o,e){const i=new.target.prototype;super(`${o}: Status code '${e}'`),this.statusCode=e,this.__proto__=i}}class nt extends Error{constructor(o="A timeout occurred."){const e=new.target.prototype;super(o),this.__proto__=e}}class Y extends Error{constructor(o="An abort occurred."){const e=new.target.prototype;super(o),this.__proto__=e}}class lr extends Error{constructor(o,e){const i=new.target.prototype;super(o),this.transport=e,this.errorType="UnsupportedTransportError",this.__proto__=i}}class dr extends Error{constructor(o,e){const i=new.target.prototype;super(o),this.transport=e,this.errorType="DisabledTransportError",this.__proto__=i}}class mr extends Error{constructor(o,e){const i=new.target.prototype;super(o),this.transport=e,this.errorType="FailedToStartTransportError",this.__proto__=i}}class pt extends Error{constructor(o){const e=new.target.prototype;super(o),this.errorType="FailedToNegotiateWithServerError",this.__proto__=e}}class ur extends Error{constructor(o,e){const i=new.target.prototype;super(o),this.innerErrors=e,this.__proto__=i}}var h=function(r){return r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None",r}(h||{});class Z{constructor(){}log(o,e){}}Z.instance=new Z;const pr="8.0.7";class x{static isRequired(o,e){if(null==o)throw new Error(`The '${e}' argument is required.`)}static isNotEmpty(o,e){if(!o||o.match(/^\s*$/))throw new Error(`The '${e}' argument should not be empty.`)}static isIn(o,e,i){if(!(o in e))throw new Error(`Unknown ${i} value: ${o}.`)}}class N{static get isBrowser(){return!N.isNode&&"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return!N.isNode&&"object"==typeof self&&"importScripts"in self}static get isReactNative(){return!N.isNode&&"object"==typeof window&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&"node"===process.release.name}}function Q(r,o){let e="";return H(r)?(e=`Binary data of length ${r.byteLength}`,o&&(e+=`. Content: '${function hr(r){const o=new Uint8Array(r);let e="";return o.forEach(i=>{e+=`0x${i<16?"0":""}${i.toString(16)} `}),e.substr(0,e.length-1)}(r)}'`)):"string"==typeof r&&(e=`String data of length ${r.length}`,o&&(e+=`. Content: '${r}'`)),e}function H(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function ht(r,o,e,i,n,a){return it.apply(this,arguments)}function it(){return(it=(0,w.A)(function*(r,o,e,i,n,a){const d={},[l,c]=J();d[l]=c,r.log(h.Trace,`(${o} transport) sending data. ${Q(n,a.logMessageContent)}.`);const u=H(n)?"arraybuffer":"text",f=yield e.post(i,{content:n,headers:{...d,...a.headers},responseType:u,timeout:a.timeout,withCredentials:a.withCredentials});r.log(h.Trace,`(${o} transport) request complete. Response status: ${f.statusCode}.`)})).apply(this,arguments)}class _r{constructor(o,e){this._subject=o,this._observer=e}dispose(){const o=this._subject.observers.indexOf(this._observer);o>-1&&this._subject.observers.splice(o,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(e=>{})}}class et{constructor(o){this._minLevel=o,this.out=console}log(o,e){if(o>=this._minLevel){const i=`[${(new Date).toISOString()}] ${h[o]}: ${e}`;switch(o){case h.Critical:case h.Error:this.out.error(i);break;case h.Warning:this.out.warn(i);break;case h.Information:this.out.info(i);break;default:this.out.log(i)}}}}function J(){let r="X-SignalR-User-Agent";return N.isNode&&(r="User-Agent"),[r,gr(pr,br(),N.isNode?"NodeJS":"Browser",Cr())]}function gr(r,o,e,i){let n="Microsoft SignalR/";const a=r.split(".");return n+=`${a[0]}.${a[1]}`,n+=` (${r}; `,n+=o&&""!==o?`${o}; `:"Unknown OS; ",n+=`${e}`,n+=i?`; ${i}`:"; Unknown Runtime Version",n+=")",n}function br(){if(!N.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function Cr(){if(N.isNode)return process.versions.node}function at(r){return r.stack?r.stack:r.message?r.message:`${r}`}class vr extends tt{constructor(o){if(super(),this._logger=o,typeof fetch>"u"||N.isNode){const e=require;this._jar=new(e("tough-cookie").CookieJar),this._fetchType=typeof fetch>"u"?e("node-fetch"):fetch,this._fetchType=e("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function Fr(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}());if(typeof AbortController>"u"){const e=require;this._abortControllerType=e("abort-controller")}else this._abortControllerType=AbortController}send(o){var e=this;return(0,w.A)(function*(){if(o.abortSignal&&o.abortSignal.aborted)throw new Y;if(!o.method)throw new Error("No method defined.");if(!o.url)throw new Error("No url defined.");const i=new e._abortControllerType;let n;o.abortSignal&&(o.abortSignal.onabort=()=>{i.abort(),n=new Y});let d,a=null;o.timeout&&(a=setTimeout(()=>{i.abort(),e._logger.log(h.Warning,"Timeout from HTTP request."),n=new nt},o.timeout)),""===o.content&&(o.content=void 0),o.content&&(o.headers=o.headers||{},o.headers["Content-Type"]=H(o.content)?"application/octet-stream":"text/plain;charset=UTF-8");try{d=yield e._fetchType(o.url,{body:o.content,cache:"no-cache",credentials:!0===o.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...o.headers},method:o.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(u){throw n||(e._logger.log(h.Warning,`Error from HTTP request. ${u}.`),u)}finally{a&&clearTimeout(a),o.abortSignal&&(o.abortSignal.onabort=null)}if(!d.ok){const u=yield ft(d,"text");throw new V(u||d.statusText,d.status)}const c=yield ft(d,o.responseType);return new ut(d.status,d.statusText,c)})()}getCookieString(o){let e="";return N.isNode&&this._jar&&this._jar.getCookies(o,(i,n)=>e=n.join("; ")),e}}function ft(r,o){let e;switch(o){case"arraybuffer":e=r.arrayBuffer();break;case"text":default:e=r.text();break;case"blob":case"document":case"json":throw new Error(`${o} is not supported.`)}return e}class Er extends tt{constructor(o){super(),this._logger=o}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new Y):o.method?o.url?new Promise((e,i)=>{const n=new XMLHttpRequest;n.open(o.method,o.url,!0),n.withCredentials=void 0===o.withCredentials||o.withCredentials,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===o.content&&(o.content=void 0),o.content&&(H(o.content)?n.setRequestHeader("Content-Type","application/octet-stream"):n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const a=o.headers;a&&Object.keys(a).forEach(d=>{n.setRequestHeader(d,a[d])}),o.responseType&&(n.responseType=o.responseType),o.abortSignal&&(o.abortSignal.onabort=()=>{n.abort(),i(new Y)}),o.timeout&&(n.timeout=o.timeout),n.onload=()=>{o.abortSignal&&(o.abortSignal.onabort=null),n.status>=200&&n.status<300?e(new ut(n.status,n.statusText,n.response||n.responseText)):i(new V(n.response||n.responseText||n.statusText,n.status))},n.onerror=()=>{this._logger.log(h.Warning,`Error from HTTP request. ${n.status}: ${n.statusText}.`),i(new V(n.statusText,n.status))},n.ontimeout=()=>{this._logger.log(h.Warning,"Timeout from HTTP request."),i(new nt)},n.send(o.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class Dr extends tt{constructor(o){if(super(),typeof fetch<"u"||N.isNode)this._httpClient=new vr(o);else{if(!(typeof XMLHttpRequest<"u"))throw new Error("No usable HttpClient found.");this._httpClient=new Er(o)}}send(o){return o.abortSignal&&o.abortSignal.aborted?Promise.reject(new Y):o.method?o.url?this._httpClient.send(o):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(o){return this._httpClient.getCookieString(o)}}var A=function(r){return r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling",r}(A||{}),M=function(r){return r[r.Text=1]="Text",r[r.Binary=2]="Binary",r}(M||{});class wr{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}class _t{get pollAborted(){return this._pollAbort.aborted}constructor(o,e,i){this._httpClient=o,this._logger=e,this._pollAbort=new wr,this._options=i,this._running=!1,this.onreceive=null,this.onclose=null}connect(o,e){var i=this;return(0,w.A)(function*(){if(x.isRequired(o,"url"),x.isRequired(e,"transferFormat"),x.isIn(e,M,"transferFormat"),i._url=o,i._logger.log(h.Trace,"(LongPolling transport) Connecting."),e===M.Binary&&typeof XMLHttpRequest<"u"&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[n,a]=J(),d={[n]:a,...i._options.headers},l={abortSignal:i._pollAbort.signal,headers:d,timeout:1e5,withCredentials:i._options.withCredentials};e===M.Binary&&(l.responseType="arraybuffer");const c=`${o}&_=${Date.now()}`;i._logger.log(h.Trace,`(LongPolling transport) polling: ${c}.`);const u=yield i._httpClient.get(c,l);200!==u.statusCode?(i._logger.log(h.Error,`(LongPolling transport) Unexpected response code: ${u.statusCode}.`),i._closeError=new V(u.statusText||"",u.statusCode),i._running=!1):i._running=!0,i._receiving=i._poll(i._url,l)})()}_poll(o,e){var i=this;return(0,w.A)(function*(){try{for(;i._running;)try{const n=`${o}&_=${Date.now()}`;i._logger.log(h.Trace,`(LongPolling transport) polling: ${n}.`);const a=yield i._httpClient.get(n,e);204===a.statusCode?(i._logger.log(h.Information,"(LongPolling transport) Poll terminated by server."),i._running=!1):200!==a.statusCode?(i._logger.log(h.Error,`(LongPolling transport) Unexpected response code: ${a.statusCode}.`),i._closeError=new V(a.statusText||"",a.statusCode),i._running=!1):a.content?(i._logger.log(h.Trace,`(LongPolling transport) data received. ${Q(a.content,i._options.logMessageContent)}.`),i.onreceive&&i.onreceive(a.content)):i._logger.log(h.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(n){i._running?n instanceof nt?i._logger.log(h.Trace,"(LongPolling transport) Poll timed out, reissuing."):(i._closeError=n,i._running=!1):i._logger.log(h.Trace,`(LongPolling transport) Poll errored after shutdown: ${n.message}`)}}finally{i._logger.log(h.Trace,"(LongPolling transport) Polling complete."),i.pollAborted||i._raiseOnClose()}})()}send(o){var e=this;return(0,w.A)(function*(){return e._running?ht(e._logger,"LongPolling",e._httpClient,e._url,o,e._options):Promise.reject(new Error("Cannot send until the transport is connected"))})()}stop(){var o=this;return(0,w.A)(function*(){o._logger.log(h.Trace,"(LongPolling transport) Stopping polling."),o._running=!1,o._pollAbort.abort();try{yield o._receiving,o._logger.log(h.Trace,`(LongPolling transport) sending DELETE request to ${o._url}.`);const e={},[i,n]=J();e[i]=n;const a={headers:{...e,...o._options.headers},timeout:o._options.timeout,withCredentials:o._options.withCredentials};let d;try{yield o._httpClient.delete(o._url,a)}catch(l){d=l}d?d instanceof V&&o._logger.log(h.Trace,404===d.statusCode?"(LongPolling transport) A 404 response was returned from sending a DELETE request.":`(LongPolling transport) Error sending a DELETE request: ${d}`):o._logger.log(h.Trace,"(LongPolling transport) DELETE request accepted.")}finally{o._logger.log(h.Trace,"(LongPolling transport) Stop finished."),o._raiseOnClose()}})()}_raiseOnClose(){if(this.onclose){let o="(LongPolling transport) Firing onclose event.";this._closeError&&(o+=" Error: "+this._closeError),this._logger.log(h.Trace,o),this.onclose(this._closeError)}}}class Sr{constructor(o,e,i,n){this._httpClient=o,this._accessToken=e,this._logger=i,this._options=n,this.onreceive=null,this.onclose=null}connect(o,e){var i=this;return(0,w.A)(function*(){return x.isRequired(o,"url"),x.isRequired(e,"transferFormat"),x.isIn(e,M,"transferFormat"),i._logger.log(h.Trace,"(SSE transport) Connecting."),i._url=o,i._accessToken&&(o+=(o.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(i._accessToken)}`),new Promise((n,a)=>{let l,d=!1;if(e===M.Text){if(N.isBrowser||N.isWebWorker)l=new i._options.EventSource(o,{withCredentials:i._options.withCredentials});else{const c=i._httpClient.getCookieString(o),u={};u.Cookie=c;const[f,g]=J();u[f]=g,l=new i._options.EventSource(o,{withCredentials:i._options.withCredentials,headers:{...u,...i._options.headers}})}try{l.onmessage=c=>{if(i.onreceive)try{i._logger.log(h.Trace,`(SSE transport) data received. ${Q(c.data,i._options.logMessageContent)}.`),i.onreceive(c.data)}catch(u){return void i._close(u)}},l.onerror=c=>{d?i._close():a(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},l.onopen=()=>{i._logger.log(h.Information,`SSE connected to ${i._url}`),i._eventSource=l,d=!0,n()}}catch(c){return void a(c)}}else a(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})})()}send(o){var e=this;return(0,w.A)(function*(){return e._eventSource?ht(e._logger,"SSE",e._httpClient,e._url,o,e._options):Promise.reject(new Error("Cannot send until the transport is connected"))})()}stop(){return this._close(),Promise.resolve()}_close(o){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(o))}}class Ir{constructor(o,e,i,n,a,d){this._logger=i,this._accessTokenFactory=e,this._logMessageContent=n,this._webSocketConstructor=a,this._httpClient=o,this.onreceive=null,this.onclose=null,this._headers=d}connect(o,e){var i=this;return(0,w.A)(function*(){let n;return x.isRequired(o,"url"),x.isRequired(e,"transferFormat"),x.isIn(e,M,"transferFormat"),i._logger.log(h.Trace,"(WebSockets transport) Connecting."),i._accessTokenFactory&&(n=yield i._accessTokenFactory()),new Promise((a,d)=>{let l;o=o.replace(/^http/,"ws");const c=i._httpClient.getCookieString(o);let u=!1;if(N.isNode||N.isReactNative){const f={},[g,F]=J();f[g]=F,n&&(f[z.Authorization]=`Bearer ${n}`),c&&(f[z.Cookie]=c),l=new i._webSocketConstructor(o,void 0,{headers:{...f,...i._headers}})}else n&&(o+=(o.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(n)}`);l||(l=new i._webSocketConstructor(o)),e===M.Binary&&(l.binaryType="arraybuffer"),l.onopen=f=>{i._logger.log(h.Information,`WebSocket connected to ${o}.`),i._webSocket=l,u=!0,a()},l.onerror=f=>{let g=null;g=typeof ErrorEvent<"u"&&f instanceof ErrorEvent?f.error:"There was an error with the transport",i._logger.log(h.Information,`(WebSockets transport) ${g}.`)},l.onmessage=f=>{if(i._logger.log(h.Trace,`(WebSockets transport) data received. ${Q(f.data,i._logMessageContent)}.`),i.onreceive)try{i.onreceive(f.data)}catch(g){return void i._close(g)}},l.onclose=f=>{if(u)i._close(f);else{let g=null;g=typeof ErrorEvent<"u"&&f instanceof ErrorEvent?f.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",d(new Error(g))}}})})()}send(o){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(h.Trace,`(WebSockets transport) sending data. ${Q(o,this._logMessageContent)}.`),this._webSocket.send(o),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(o){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(h.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(o)||!1!==o.wasClean&&1e3===o.code?o instanceof Error?this.onclose(o):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${o.code} (${o.reason||"no reason given"}).`)))}_isCloseEvent(o){return o&&"boolean"==typeof o.wasClean&&"number"==typeof o.code}}class Rr{constructor(o,e={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,x.isRequired(o,"url"),this._logger=function fr(r){return void 0===r?new et(h.Information):null===r?Z.instance:void 0!==r.log?r:new et(r)}(e.logger),this.baseUrl=this._resolveUrl(o),(e=e||{}).logMessageContent=void 0!==e.logMessageContent&&e.logMessageContent,"boolean"!=typeof e.withCredentials&&void 0!==e.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");e.withCredentials=void 0===e.withCredentials||e.withCredentials,e.timeout=void 0===e.timeout?1e5:e.timeout;let i=null,n=null;if(N.isNode){const a=require;i=a("ws"),n=a("eventsource")}!N.isNode&&typeof WebSocket<"u"&&!e.WebSocket?e.WebSocket=WebSocket:N.isNode&&!e.WebSocket&&i&&(e.WebSocket=i),!N.isNode&&typeof EventSource<"u"&&!e.EventSource?e.EventSource=EventSource:N.isNode&&!e.EventSource&&typeof n<"u"&&(e.EventSource=n),this._httpClient=new cr(e.httpClient||new Dr(this._logger),e.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=e,this.onreceive=null,this.onclose=null}start(o){var e=this;return(0,w.A)(function*(){if(x.isIn(o=o||M.Binary,M,"transferFormat"),e._logger.log(h.Debug,`Starting connection with transfer format '${M[o]}'.`),"Disconnected"!==e._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(e._connectionState="Connecting",e._startInternalPromise=e._startInternal(o),yield e._startInternalPromise,"Disconnecting"===e._connectionState){const i="Failed to start the HttpConnection before stop() was called.";return e._logger.log(h.Error,i),yield e._stopPromise,Promise.reject(new Y(i))}if("Connected"!==e._connectionState){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return e._logger.log(h.Error,i),Promise.reject(new Y(i))}e._connectionStarted=!0})()}send(o){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new st(this.transport)),this._sendQueue.send(o))}stop(o){var e=this;return(0,w.A)(function*(){return"Disconnected"===e._connectionState?(e._logger.log(h.Debug,`Call to HttpConnection.stop(${o}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===e._connectionState?(e._logger.log(h.Debug,`Call to HttpConnection.stop(${o}) ignored because the connection is already in the disconnecting state.`),e._stopPromise):(e._connectionState="Disconnecting",e._stopPromise=new Promise(i=>{e._stopPromiseResolver=i}),yield e._stopInternal(o),void(yield e._stopPromise))})()}_stopInternal(o){var e=this;return(0,w.A)(function*(){e._stopError=o;try{yield e._startInternalPromise}catch{}if(e.transport){try{yield e.transport.stop()}catch(i){e._logger.log(h.Error,`HttpConnection.transport.stop() threw error '${i}'.`),e._stopConnection()}e.transport=void 0}else e._logger.log(h.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})()}_startInternal(o){var e=this;return(0,w.A)(function*(){let i=e.baseUrl;e._accessTokenFactory=e._options.accessTokenFactory,e._httpClient._accessTokenFactory=e._accessTokenFactory;try{if(e._options.skipNegotiation){if(e._options.transport!==A.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");e.transport=e._constructTransport(A.WebSockets),yield e._startTransport(i,o)}else{let n=null,a=0;do{if(n=yield e._getNegotiationResponse(i),"Disconnecting"===e._connectionState||"Disconnected"===e._connectionState)throw new Y("The connection was stopped during negotiation.");if(n.error)throw new Error(n.error);if(n.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(n.url&&(i=n.url),n.accessToken){const d=n.accessToken;e._accessTokenFactory=()=>d,e._httpClient._accessToken=d,e._httpClient._accessTokenFactory=void 0}a++}while(n.url&&a<100);if(100===a&&n.url)throw new Error("Negotiate redirection limit exceeded.");yield e._createTransport(i,e._options.transport,n,o)}e.transport instanceof _t&&(e.features.inherentKeepAlive=!0),"Connecting"===e._connectionState&&(e._logger.log(h.Debug,"The HttpConnection connected successfully."),e._connectionState="Connected")}catch(n){return e._logger.log(h.Error,"Failed to start the connection: "+n),e._connectionState="Disconnected",e.transport=void 0,e._stopPromiseResolver(),Promise.reject(n)}})()}_getNegotiationResponse(o){var e=this;return(0,w.A)(function*(){const i={},[n,a]=J();i[n]=a;const d=e._resolveNegotiateUrl(o);e._logger.log(h.Debug,`Sending negotiation request: ${d}.`);try{const l=yield e._httpClient.post(d,{content:"",headers:{...i,...e._options.headers},timeout:e._options.timeout,withCredentials:e._options.withCredentials});if(200!==l.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${l.statusCode}'`));const c=JSON.parse(l.content);return(!c.negotiateVersion||c.negotiateVersion<1)&&(c.connectionToken=c.connectionId),c.useStatefulReconnect&&!0!==e._options._useStatefulReconnect?Promise.reject(new pt("Client didn't negotiate Stateful Reconnect but the server did.")):c}catch(l){let c="Failed to complete negotiation with the server: "+l;return l instanceof V&&404===l.statusCode&&(c+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),e._logger.log(h.Error,c),Promise.reject(new pt(c))}})()}_createConnectUrl(o,e){return e?o+(-1===o.indexOf("?")?"?":"&")+`id=${e}`:o}_createTransport(o,e,i,n){var a=this;return(0,w.A)(function*(){let d=a._createConnectUrl(o,i.connectionToken);if(a._isITransport(e))return a._logger.log(h.Debug,"Connection was provided an instance of ITransport, using that directly."),a.transport=e,yield a._startTransport(d,n),void(a.connectionId=i.connectionId);const l=[],c=i.availableTransports||[];let u=i;for(const f of c){const g=a._resolveTransportOrError(f,e,n,!0===u?.useStatefulReconnect);if(g instanceof Error)l.push(`${f.transport} failed:`),l.push(g);else if(a._isITransport(g)){if(a.transport=g,!u){try{u=yield a._getNegotiationResponse(o)}catch(F){return Promise.reject(F)}d=a._createConnectUrl(o,u.connectionToken)}try{return yield a._startTransport(d,n),void(a.connectionId=u.connectionId)}catch(F){if(a._logger.log(h.Error,`Failed to start the transport '${f.transport}': ${F}`),u=void 0,l.push(new mr(`${f.transport} failed: ${F}`,A[f.transport])),"Connecting"!==a._connectionState){const L="Failed to select transport before stop() was called.";return a._logger.log(h.Debug,L),Promise.reject(new Y(L))}}}}return Promise.reject(l.length>0?new ur(`Unable to connect to the server with any of the available transports. ${l.join(" ")}`,l):new Error("None of the transports supported by the client are supported by the server."))})()}_constructTransport(o){switch(o){case A.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Ir(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case A.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Sr(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case A.LongPolling:return new _t(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${o}.`)}}_startTransport(o,e){var i=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=this.features.reconnect?function(){var n=(0,w.A)(function*(a){let d=!1;if(i.features.reconnect){try{i.features.disconnected(),yield i.transport.connect(o,e),yield i.features.resend()}catch{d=!0}d&&i._stopConnection(a)}else i._stopConnection(a)});return function(a){return n.apply(this,arguments)}}():n=>this._stopConnection(n),this.transport.connect(o,e)}_resolveTransportOrError(o,e,i,n){const a=A[o.transport];if(null==a)return this._logger.log(h.Debug,`Skipping transport '${o.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${o.transport}' because it is not supported by this client.`);if(!function jr(r,o){return!r||!!(o&r)}(e,a))return this._logger.log(h.Debug,`Skipping transport '${A[a]}' because it was disabled by the client.`),new dr(`'${A[a]}' is disabled by the client.`,a);if(!(o.transferFormats.map(l=>M[l]).indexOf(i)>=0))return this._logger.log(h.Debug,`Skipping transport '${A[a]}' because it does not support the requested transfer format '${M[i]}'.`),new Error(`'${A[a]}' does not support ${M[i]}.`);if(a===A.WebSockets&&!this._options.WebSocket||a===A.ServerSentEvents&&!this._options.EventSource)return this._logger.log(h.Debug,`Skipping transport '${A[a]}' because it is not supported in your environment.'`),new lr(`'${A[a]}' is not supported in your environment.`,a);this._logger.log(h.Debug,`Selecting transport '${A[a]}'.`);try{return this.features.reconnect=a===A.WebSockets?n:void 0,this._constructTransport(a)}catch(l){return l}}_isITransport(o){return o&&"object"==typeof o&&"connect"in o}_stopConnection(o){if(this._logger.log(h.Debug,`HttpConnection.stopConnection(${o}) called while in state ${this._connectionState}.`),this.transport=void 0,o=this._stopError||o,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(h.Warning,`Call to HttpConnection.stopConnection(${o}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${o}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),o?this._logger.log(h.Error,`Connection disconnected with error '${o}'.`):this._logger.log(h.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(e=>{this._logger.log(h.Error,`TransportSendQueue.stop() threw error '${e}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(o)}catch(e){this._logger.log(h.Error,`HttpConnection.onclose(${o}) threw error '${e}'.`)}}}else this._logger.log(h.Debug,`Call to HttpConnection.stopConnection(${o}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(o){if(0===o.lastIndexOf("https://",0)||0===o.lastIndexOf("http://",0))return o;if(!N.isBrowser)throw new Error(`Cannot resolve '${o}'.`);const e=window.document.createElement("a");return e.href=o,this._logger.log(h.Information,`Normalizing '${o}' to '${e.href}'.`),e.href}_resolveNegotiateUrl(o){const e=new URL(o);e.pathname.endsWith("/")?e.pathname+="negotiate":e.pathname+="/negotiate";const i=new URLSearchParams(e.searchParams);return i.has("negotiateVersion")||i.append("negotiateVersion",this._negotiateVersion.toString()),i.has("useStatefulReconnect")?"true"===i.get("useStatefulReconnect")&&(this._options._useStatefulReconnect=!0):!0===this._options._useStatefulReconnect&&i.append("useStatefulReconnect","true"),e.search=i.toString(),e.toString()}}class st{constructor(o){this._transport=o,this._buffer=[],this._executing=!0,this._sendBufferedData=new rt,this._transportResult=new rt,this._sendLoopPromise=this._sendLoop()}send(o){return this._bufferData(o),this._transportResult||(this._transportResult=new rt),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(o){if(this._buffer.length&&typeof this._buffer[0]!=typeof o)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof o}`);this._buffer.push(o),this._sendBufferedData.resolve()}_sendLoop(){var o=this;return(0,w.A)(function*(){for(;;){if(yield o._sendBufferedData.promise,!o._executing){o._transportResult&&o._transportResult.reject("Connection stopped.");break}o._sendBufferedData=new rt;const e=o._transportResult;o._transportResult=void 0;const i="string"==typeof o._buffer[0]?o._buffer.join(""):st._concatBuffers(o._buffer);o._buffer.length=0;try{yield o._transport.send(i),e.resolve()}catch(n){e.reject(n)}}})()}static _concatBuffers(o){const e=o.map(a=>a.byteLength).reduce((a,d)=>a+d),i=new Uint8Array(e);let n=0;for(const a of o)i.set(new Uint8Array(a),n),n+=a.byteLength;return i.buffer}}class rt{constructor(){this.promise=new Promise((o,e)=>[this._resolver,this._rejecter]=[o,e])}resolve(){this._resolver()}reject(o){this._rejecter(o)}}class G{static write(o){return`${o}${G.RecordSeparator}`}static parse(o){if(o[o.length-1]!==G.RecordSeparator)throw new Error("Message is incomplete.");const e=o.split(G.RecordSeparator);return e.pop(),e}}G.RecordSeparatorCode=30,G.RecordSeparator=String.fromCharCode(G.RecordSeparatorCode);class yr{writeHandshakeRequest(o){return G.write(JSON.stringify(o))}parseHandshakeResponse(o){let e,i;if(H(o)){const l=new Uint8Array(o),c=l.indexOf(G.RecordSeparatorCode);if(-1===c)throw new Error("Message is incomplete.");const u=c+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(l.slice(0,u))),i=l.byteLength>u?l.slice(u).buffer:null}else{const l=o,c=l.indexOf(G.RecordSeparator);if(-1===c)throw new Error("Message is incomplete.");const u=c+1;e=l.substring(0,u),i=l.length>u?l.substring(u):null}const n=G.parse(e),a=JSON.parse(n[0]);if(a.type)throw new Error("Expected a handshake response from the server.");return[i,a]}}var C=function(r){return r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence",r}(C||{});class Tr{constructor(){this.observers=[]}next(o){for(const e of this.observers)e.next(o)}error(o){for(const e of this.observers)e.error&&e.error(o)}complete(){for(const o of this.observers)o.complete&&o.complete()}subscribe(o){return this.observers.push(o),new _r(this,o)}}class Nr{constructor(o,e,i){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=o,this._connection=e,this._bufferSize=i}_send(o){var e=this;return(0,w.A)(function*(){const i=e._protocol.writeMessage(o);let n=Promise.resolve();if(e._isInvocationMessage(o)){e._totalMessageCount++;let a=()=>{},d=()=>{};H(i)?e._bufferedByteCount+=i.byteLength:e._bufferedByteCount+=i.length,e._bufferedByteCount>=e._bufferSize&&(n=new Promise((l,c)=>{a=l,d=c})),e._messages.push(new $r(i,e._totalMessageCount,a,d))}try{e._reconnectInProgress||(yield e._connection.send(i))}catch{e._disconnected()}yield n})()}_ack(o){let e=-1;for(let i=0;i<this._messages.length;i++){const n=this._messages[i];if(n._id<=o.sequenceId)e=i,H(n._message)?this._bufferedByteCount-=n._message.byteLength:this._bufferedByteCount-=n._message.length,n._resolver();else{if(!(this._bufferedByteCount<this._bufferSize))break;n._resolver()}}-1!==e&&(this._messages=this._messages.slice(e+1))}_shouldProcessMessage(o){if(this._waitForSequenceMessage)return o.type===C.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(o))return!0;const e=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,e<=this._latestReceivedSequenceId?(e===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=e,this._ackTimer(),!0)}_resetSequence(o){o.sequenceId>this._nextReceivingSequenceId?this._connection.stop(new Error("Sequence ID greater than amount of messages we've received.")):this._nextReceivingSequenceId=o.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){var o=this;return(0,w.A)(function*(){const e=0!==o._messages.length?o._messages[0]._id:o._totalMessageCount+1;yield o._connection.send(o._protocol.writeMessage({type:C.Sequence,sequenceId:e}));const i=o._messages;for(const n of i)yield o._connection.send(n._message);o._reconnectInProgress=!1})()}_dispose(o){o??(o=new Error("Unable to reconnect to server."));for(const e of this._messages)e._rejector(o)}_isInvocationMessage(o){switch(o.type){case C.Invocation:case C.StreamItem:case C.Completion:case C.StreamInvocation:case C.CancelInvocation:return!0;case C.Close:case C.Sequence:case C.Ping:case C.Ack:return!1}}_ackTimer(){var o=this;void 0===this._ackTimerHandle&&(this._ackTimerHandle=setTimeout((0,w.A)(function*(){try{o._reconnectInProgress||(yield o._connection.send(o._protocol.writeMessage({type:C.Ack,sequenceId:o._latestReceivedSequenceId})))}catch{}clearTimeout(o._ackTimerHandle),o._ackTimerHandle=void 0}),1e3))}}class $r{constructor(o,e,i,n){this._message=o,this._id=e,this._resolver=i,this._rejector=n}}var $=function(r){return r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting",r}($||{});class ct{static create(o,e,i,n,a,d,l){return new ct(o,e,i,n,a,d,l)}constructor(o,e,i,n,a,d,l){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(h.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},x.isRequired(o,"connection"),x.isRequired(e,"logger"),x.isRequired(i,"protocol"),this.serverTimeoutInMilliseconds=a??3e4,this.keepAliveIntervalInMilliseconds=d??15e3,this._statefulReconnectBufferSize=l??1e5,this._logger=e,this._protocol=i,this.connection=o,this._reconnectPolicy=n,this._handshakeProtocol=new yr,this.connection.onreceive=c=>this._processIncomingData(c),this.connection.onclose=c=>this._connectionClosed(c),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=$.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:C.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(o){if(this._connectionState!==$.Disconnected&&this._connectionState!==$.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!o)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=o}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){var o=this;return(0,w.A)(function*(){if(o._connectionState!==$.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));o._connectionState=$.Connecting,o._logger.log(h.Debug,"Starting HubConnection.");try{yield o._startInternal(),N.isBrowser&&window.document.addEventListener("freeze",o._freezeEventListener),o._connectionState=$.Connected,o._connectionStarted=!0,o._logger.log(h.Debug,"HubConnection connected successfully.")}catch(e){return o._connectionState=$.Disconnected,o._logger.log(h.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})()}_startInternal(){var o=this;return(0,w.A)(function*(){o._stopDuringStartError=void 0,o._receivedHandshakeResponse=!1;const e=new Promise((i,n)=>{o._handshakeResolver=i,o._handshakeRejecter=n});yield o.connection.start(o._protocol.transferFormat);try{let i=o._protocol.version;o.connection.features.reconnect||(i=1);const n={protocol:o._protocol.name,version:i};if(o._logger.log(h.Debug,"Sending handshake request."),yield o._sendMessage(o._handshakeProtocol.writeHandshakeRequest(n)),o._logger.log(h.Information,`Using HubProtocol '${o._protocol.name}'.`),o._cleanupTimeout(),o._resetTimeoutPeriod(),o._resetKeepAliveInterval(),yield e,o._stopDuringStartError)throw o._stopDuringStartError;!!o.connection.features.reconnect&&(o._messageBuffer=new Nr(o._protocol,o.connection,o._statefulReconnectBufferSize),o.connection.features.disconnected=o._messageBuffer._disconnected.bind(o._messageBuffer),o.connection.features.resend=()=>{if(o._messageBuffer)return o._messageBuffer._resend()}),o.connection.features.inherentKeepAlive||(yield o._sendMessage(o._cachedPingMessage))}catch(i){throw o._logger.log(h.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),o._cleanupTimeout(),o._cleanupPingTimer(),yield o.connection.stop(i),i}})()}stop(){var o=this;return(0,w.A)(function*(){const e=o._startPromise;o.connection.features.reconnect=!1,o._stopPromise=o._stopInternal(),yield o._stopPromise;try{yield e}catch{}})()}_stopInternal(o){if(this._connectionState===$.Disconnected)return this._logger.log(h.Debug,`Call to HubConnection.stop(${o}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===$.Disconnecting)return this._logger.log(h.Debug,`Call to HttpConnection.stop(${o}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const e=this._connectionState;return this._connectionState=$.Disconnecting,this._logger.log(h.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(h.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(e===$.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=o||new Y("The connection was stopped before the hub handshake could complete."),this.connection.stop(o))}_sendCloseMessage(){var o=this;return(0,w.A)(function*(){try{yield o._sendWithProtocol(o._createCloseMessage())}catch{}})()}stream(o,...e){const[i,n]=this._replaceStreamingParams(e),a=this._createStreamInvocation(o,e,n);let d;const l=new Tr;return l.cancelCallback=()=>{const c=this._createCancelInvocation(a.invocationId);return delete this._callbacks[a.invocationId],d.then(()=>this._sendWithProtocol(c))},this._callbacks[a.invocationId]=(c,u)=>{u?l.error(u):c&&(c.type===C.Completion?c.error?l.error(new Error(c.error)):l.complete():l.next(c.item))},d=this._sendWithProtocol(a).catch(c=>{l.error(c),delete this._callbacks[a.invocationId]}),this._launchStreams(i,d),l}_sendMessage(o){return this._resetKeepAliveInterval(),this.connection.send(o)}_sendWithProtocol(o){return this._messageBuffer?this._messageBuffer._send(o):this._sendMessage(this._protocol.writeMessage(o))}send(o,...e){const[i,n]=this._replaceStreamingParams(e),a=this._sendWithProtocol(this._createInvocation(o,e,!0,n));return this._launchStreams(i,a),a}invoke(o,...e){const[i,n]=this._replaceStreamingParams(e),a=this._createInvocation(o,e,!1,n);return new Promise((l,c)=>{this._callbacks[a.invocationId]=(f,g)=>{g?c(g):f&&(f.type===C.Completion?f.error?c(new Error(f.error)):l(f.result):c(new Error(`Unexpected message type: ${f.type}`)))};const u=this._sendWithProtocol(a).catch(f=>{c(f),delete this._callbacks[a.invocationId]});this._launchStreams(i,u)})}on(o,e){!o||!e||(o=o.toLowerCase(),this._methods[o]||(this._methods[o]=[]),-1===this._methods[o].indexOf(e)&&this._methods[o].push(e))}off(o,e){if(!o)return;o=o.toLowerCase();const i=this._methods[o];if(i)if(e){const n=i.indexOf(e);-1!==n&&(i.splice(n,1),0===i.length&&delete this._methods[o])}else delete this._methods[o]}onclose(o){o&&this._closedCallbacks.push(o)}onreconnecting(o){o&&this._reconnectingCallbacks.push(o)}onreconnected(o){o&&this._reconnectedCallbacks.push(o)}_processIncomingData(o){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(o=this._processHandshakeResponse(o),this._receivedHandshakeResponse=!0),o){const e=this._protocol.parseMessages(o,this._logger);for(const i of e)if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(i))switch(i.type){case C.Invocation:this._invokeClientMethod(i).catch(n=>{this._logger.log(h.Error,`Invoke client method threw error: ${at(n)}`)});break;case C.StreamItem:case C.Completion:{const n=this._callbacks[i.invocationId];if(n){i.type===C.Completion&&delete this._callbacks[i.invocationId];try{n(i)}catch(a){this._logger.log(h.Error,`Stream callback threw error: ${at(a)}`)}}break}case C.Ping:break;case C.Close:{this._logger.log(h.Information,"Close message received from server.");const n=i.error?new Error("Server returned an error on close: "+i.error):void 0;!0===i.allowReconnect?this.connection.stop(n):this._stopPromise=this._stopInternal(n);break}case C.Ack:this._messageBuffer&&this._messageBuffer._ack(i);break;case C.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(i);break;default:this._logger.log(h.Warning,`Invalid message type: ${i.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(o){let e,i;try{[i,e]=this._handshakeProtocol.parseHandshakeResponse(o)}catch(n){const a="Error parsing handshake response: "+n;this._logger.log(h.Error,a);const d=new Error(a);throw this._handshakeRejecter(d),d}if(e.error){const n="Server returned handshake error: "+e.error;this._logger.log(h.Error,n);const a=new Error(n);throw this._handshakeRejecter(a),a}return this._logger.log(h.Debug,"Server handshake complete."),this._handshakeResolver(),i}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){var o=this;if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let e=this._nextKeepAlive-(new Date).getTime();e<0&&(e=0),this._pingServerHandle=setTimeout((0,w.A)(function*(){if(o._connectionState===$.Connected)try{yield o._sendMessage(o._cachedPingMessage)}catch{o._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(o){var e=this;return(0,w.A)(function*(){const i=o.target.toLowerCase(),n=e._methods[i];if(!n)return e._logger.log(h.Warning,`No client method with the name '${i}' found.`),void(o.invocationId&&(e._logger.log(h.Warning,`No result given for '${i}' method and invocation ID '${o.invocationId}'.`),yield e._sendWithProtocol(e._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null))));const a=n.slice(),d=!!o.invocationId;let l,c,u;for(const f of a)try{const g=l;l=yield f.apply(e,o.arguments),d&&l&&g&&(e._logger.log(h.Error,`Multiple results provided for '${i}'. Sending error to server.`),u=e._createCompletionMessage(o.invocationId,"Client provided multiple results.",null)),c=void 0}catch(g){c=g,e._logger.log(h.Error,`A callback for the method '${i}' threw error '${g}'.`)}u?yield e._sendWithProtocol(u):d?(c?u=e._createCompletionMessage(o.invocationId,`${c}`,null):void 0!==l?u=e._createCompletionMessage(o.invocationId,null,l):(e._logger.log(h.Warning,`No result given for '${i}' method and invocation ID '${o.invocationId}'.`),u=e._createCompletionMessage(o.invocationId,"Client didn't provide a result.",null)),yield e._sendWithProtocol(u)):l&&e._logger.log(h.Error,`Result given for '${i}' method but server is not expecting a result.`)})()}_connectionClosed(o){this._logger.log(h.Debug,`HubConnection.connectionClosed(${o}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||o||new Y("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(o||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===$.Disconnecting?this._completeClose(o):this._connectionState===$.Connected&&this._reconnectPolicy?this._reconnect(o):this._connectionState===$.Connected&&this._completeClose(o)}_completeClose(o){if(this._connectionStarted){this._connectionState=$.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(o??new Error("Connection closed.")),this._messageBuffer=void 0),N.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(e=>e.apply(this,[o]))}catch(e){this._logger.log(h.Error,`An onclose callback called with error '${o}' threw error '${e}'.`)}}}_reconnect(o){var e=this;return(0,w.A)(function*(){const i=Date.now();let n=0,a=void 0!==o?o:new Error("Attempting to reconnect due to a unknown error."),d=e._getNextRetryDelay(n++,0,a);if(null===d)return e._logger.log(h.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void e._completeClose(o);if(e._connectionState=$.Reconnecting,e._logger.log(h.Information,o?`Connection reconnecting because of error '${o}'.`:"Connection reconnecting."),0!==e._reconnectingCallbacks.length){try{e._reconnectingCallbacks.forEach(l=>l.apply(e,[o]))}catch(l){e._logger.log(h.Error,`An onreconnecting callback called with error '${o}' threw error '${l}'.`)}if(e._connectionState!==$.Reconnecting)return void e._logger.log(h.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==d;){if(e._logger.log(h.Information,`Reconnect attempt number ${n} will start in ${d} ms.`),yield new Promise(l=>{e._reconnectDelayHandle=setTimeout(l,d)}),e._reconnectDelayHandle=void 0,e._connectionState!==$.Reconnecting)return void e._logger.log(h.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(yield e._startInternal(),e._connectionState=$.Connected,e._logger.log(h.Information,"HubConnection reconnected successfully."),0!==e._reconnectedCallbacks.length)try{e._reconnectedCallbacks.forEach(l=>l.apply(e,[e.connection.connectionId]))}catch(l){e._logger.log(h.Error,`An onreconnected callback called with connectionId '${e.connection.connectionId}; threw error '${l}'.`)}return}catch(l){if(e._logger.log(h.Information,`Reconnect attempt failed because of error '${l}'.`),e._connectionState!==$.Reconnecting)return e._logger.log(h.Debug,`Connection moved to the '${e._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(e._connectionState===$.Disconnecting&&e._completeClose());a=l instanceof Error?l:new Error(l.toString()),d=e._getNextRetryDelay(n++,Date.now()-i,a)}}e._logger.log(h.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${n} failed attempts. Connection disconnecting.`),e._completeClose()})()}_getNextRetryDelay(o,e,i){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:o,retryReason:i})}catch(n){return this._logger.log(h.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${o}, ${e}) threw error '${n}'.`),null}}_cancelCallbacksWithError(o){const e=this._callbacks;this._callbacks={},Object.keys(e).forEach(i=>{const n=e[i];try{n(null,o)}catch(a){this._logger.log(h.Error,`Stream 'error' callback called with '${o}' threw error: ${at(a)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(o,e,i,n){if(i)return 0!==n.length?{arguments:e,streamIds:n,target:o,type:C.Invocation}:{arguments:e,target:o,type:C.Invocation};{const a=this._invocationId;return this._invocationId++,0!==n.length?{arguments:e,invocationId:a.toString(),streamIds:n,target:o,type:C.Invocation}:{arguments:e,invocationId:a.toString(),target:o,type:C.Invocation}}}_launchStreams(o,e){if(0!==o.length){e||(e=Promise.resolve());for(const i in o)o[i].subscribe({complete:()=>{e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(i)))},error:n=>{let a;a=n instanceof Error?n.message:n&&n.toString?n.toString():"Unknown error",e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(i,a)))},next:n=>{e=e.then(()=>this._sendWithProtocol(this._createStreamItemMessage(i,n)))}})}}_replaceStreamingParams(o){const e=[],i=[];for(let n=0;n<o.length;n++){const a=o[n];if(this._isObservable(a)){const d=this._invocationId;this._invocationId++,e[d]=a,i.push(d.toString()),o.splice(n,1)}}return[e,i]}_isObservable(o){return o&&o.subscribe&&"function"==typeof o.subscribe}_createStreamInvocation(o,e,i){const n=this._invocationId;return this._invocationId++,0!==i.length?{arguments:e,invocationId:n.toString(),streamIds:i,target:o,type:C.StreamInvocation}:{arguments:e,invocationId:n.toString(),target:o,type:C.StreamInvocation}}_createCancelInvocation(o){return{invocationId:o,type:C.CancelInvocation}}_createStreamItemMessage(o,e){return{invocationId:o,item:e,type:C.StreamItem}}_createCompletionMessage(o,e,i){return e?{error:e,invocationId:o,type:C.Completion}:{invocationId:o,result:i,type:C.Completion}}_createCloseMessage(){return{type:C.Close}}}class Mr{constructor(){this.name="json",this.version=2,this.transferFormat=M.Text}parseMessages(o,e){if("string"!=typeof o)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!o)return[];null===e&&(e=Z.instance);const i=G.parse(o),n=[];for(const a of i){const d=JSON.parse(a);if("number"!=typeof d.type)throw new Error("Invalid payload.");switch(d.type){case C.Invocation:this._isInvocationMessage(d);break;case C.StreamItem:this._isStreamItemMessage(d);break;case C.Completion:this._isCompletionMessage(d);break;case C.Ping:case C.Close:break;case C.Ack:this._isAckMessage(d);break;case C.Sequence:this._isSequenceMessage(d);break;default:e.log(h.Information,"Unknown message type '"+d.type+"' ignored.");continue}n.push(d)}return n}writeMessage(o){return G.write(JSON.stringify(o))}_isInvocationMessage(o){this._assertNotEmptyString(o.target,"Invalid payload for Invocation message."),void 0!==o.invocationId&&this._assertNotEmptyString(o.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(o){if(this._assertNotEmptyString(o.invocationId,"Invalid payload for StreamItem message."),void 0===o.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(o){if(o.result&&o.error)throw new Error("Invalid payload for Completion message.");!o.result&&o.error&&this._assertNotEmptyString(o.error,"Invalid payload for Completion message."),this._assertNotEmptyString(o.invocationId,"Invalid payload for Completion message.")}_isAckMessage(o){if("number"!=typeof o.sequenceId)throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(o){if("number"!=typeof o.sequenceId)throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(o,e){if("string"!=typeof o||""===o)throw new Error(e)}}const Or={trace:h.Trace,debug:h.Debug,info:h.Information,information:h.Information,warn:h.Warning,warning:h.Warning,error:h.Error,critical:h.Critical,none:h.None};class Yr{configureLogging(o){if(x.isRequired(o,"logging"),function qr(r){return void 0!==r.log}(o))this.logger=o;else if("string"==typeof o){const e=function Gr(r){const o=Or[r.toLowerCase()];if(typeof o<"u")return o;throw new Error(`Unknown log level: ${r}`)}(o);this.logger=new et(e)}else this.logger=new et(o);return this}withUrl(o,e){return x.isRequired(o,"url"),x.isNotEmpty(o,"url"),this.url=o,this.httpConnectionOptions="object"==typeof e?{...this.httpConnectionOptions,...e}:{...this.httpConnectionOptions,transport:e},this}withHubProtocol(o){return x.isRequired(o,"protocol"),this.protocol=o,this}withAutomaticReconnect(o){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return this.reconnectPolicy=o?Array.isArray(o)?new mt(o):o:new mt,this}withServerTimeout(o){return x.isRequired(o,"milliseconds"),this._serverTimeoutInMilliseconds=o,this}withKeepAliveInterval(o){return x.isRequired(o,"milliseconds"),this._keepAliveIntervalInMilliseconds=o,this}withStatefulReconnect(o){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=o?.bufferSize,this}build(){const o=this.httpConnectionOptions||{};if(void 0===o.logger&&(o.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const e=new Rr(this.url,o);return ct.create(e,this.logger||Z.instance,this.protocol||new Mr,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}var Lr=v(5312);let Br=(()=>{class r{constructor(){this.dataReceived=new dt.B,this.dataReceived$=this.dataReceived.asObservable(),this.hubConnection=(new Yr).withUrl(`${Lr.c.apiUrl}/dataHub`,{accessTokenFactory:()=>localStorage.getItem("token")||"",withCredentials:!0}).configureLogging(h.Information).withAutomaticReconnect().build(),this.hubConnection.on("ReceiveData",e=>{console.log("Data received from SignalR:",e),this.dataReceived.next(e)}),this.hubConnection.onclose(e=>{console.error("SignalR connection closed:",e)})}startConnection(){return this.hubConnection.start().then(()=>{console.log("SignalR connection started")}).catch(e=>{throw console.error("Error while starting SignalR connection:",e),e})}stopConnection(){this.hubConnection.stop().then(()=>console.log("SignalR connection stopped")).catch(e=>console.error("Error while stopping SignalR connection:",e))}sendData(e){this.hubConnection.invoke("SendData",e).catch(i=>console.error("Error while sending data to SignalR hub:",i))}static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Xr(r,o){1&r&&(t.j41(0,"th",15),t.EFF(1,"Name"),t.k0s())}function Vr(r,o){if(1&r&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.JRh(e.name)}}function Hr(r,o){1&r&&(t.j41(0,"th",15),t.EFF(1,"Value"),t.k0s())}function Jr(r,o){if(1&r&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.JRh(e.value)}}function Wr(r,o){1&r&&(t.j41(0,"th",15),t.EFF(1,"Status"),t.k0s())}function zr(r,o){if(1&r&&(t.j41(0,"td",16),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.JRh(e.status)}}function Zr(r,o){1&r&&(t.j41(0,"th",15),t.EFF(1,"Timestamp"),t.k0s())}function Qr(r,o){if(1&r&&(t.j41(0,"td",16),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.timeStamp,"medium"))}}function Kr(r,o){1&r&&t.nrm(0,"tr",17)}function to(r,o){1&r&&t.nrm(0,"tr",18)}function eo(r,o){if(1&r&&(t.j41(0,"div")(1,"table",6),t.qex(2,7),t.DNE(3,Xr,2,0,"th",8)(4,Vr,2,1,"td",9),t.bVm(),t.qex(5,10),t.DNE(6,Hr,2,0,"th",8)(7,Jr,2,1,"td",9),t.bVm(),t.qex(8,11),t.DNE(9,Wr,2,0,"th",8)(10,zr,2,1,"td",9),t.bVm(),t.qex(11,12),t.DNE(12,Zr,2,0,"th",8)(13,Qr,3,4,"td",9),t.bVm(),t.DNE(14,Kr,1,0,"tr",13)(15,to,1,0,"tr",14),t.k0s()()),2&r){const e=t.XpG();t.R7$(),t.Y8G("dataSource",e.dataList),t.R7$(13),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns)}}function ro(r,o){1&r&&(t.j41(0,"div")(1,"p"),t.EFF(2,"No data received yet."),t.k0s()())}let oo=(()=>{class r{constructor(e){this.signalRService=e,this.dataList=[],this.displayedColumns=["name","value","status","timeStamp"]}ngOnInit(){this.dataSubscription=this.signalRService.dataReceived$.subscribe(e=>{this.dataList=e,console.log("New data received in AboutComponent:",e)})}ngOnDestroy(){this.dataSubscription&&this.dataSubscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(Br))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-about"]],decls:27,vars:2,consts:[[1,"cardWithShadow"],[1,"mat-body-1"],["matListItemTitle","",1,"f-s-16","f-w-600"],["matListItemLine","",1,"mat-body-1"],[1,"data-section"],[4,"ngIf"],["mat-table","",1,"data-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","status"],["matColumnDef","timeStamp"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-content")(2,"mat-card-title"),t.EFF(3,"Welcome to MatechCoding QuickStart"),t.k0s(),t.j41(4,"mat-card-subtitle",1),t.EFF(5," ASP.NET Core / Angular starting point project with SOLID Architecture, Advanced Authentication & Authorization, user and role management, and other useful services for Quick Application Development. "),t.k0s(),t.j41(6,"mat-list")(7,"mat-list-item")(8,"span",2),t.EFF(9,"This application consists of:"),t.k0s(),t.j41(10,"span",3),t.EFF(11,"Onion Architecture"),t.k0s(),t.j41(12,"span",3),t.EFF(13,"Database using Entity Framework Core"),t.k0s(),t.j41(14,"span",3),t.EFF(15,"Advanced Authentication/Authorization"),t.k0s(),t.j41(16,"span",3),t.EFF(17,"Real-time push notification system (with SignalR integration)"),t.k0s(),t.j41(18,"span",3),t.EFF(19,"Swagger integration"),t.k0s(),t.j41(20,"span",3),t.EFF(21,"Angular Material and TypeScript"),t.k0s()()(),t.j41(22,"div",4)(23,"h3"),t.EFF(24,"Real-time Data (via SignalR)"),t.k0s(),t.DNE(25,eo,16,3,"div",5)(26,ro,3,0,"div",5),t.k0s()()()),2&i&&(t.R7$(25),t.Y8G("ngIf",n.dataList.length>0),t.R7$(),t.Y8G("ngIf",0===n.dataList.length))},dependencies:[k.bT,m.RN,m.m2,m.Lc,m.dh,B.jt,B.YE,B.C_,B.yE,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,k.vh],encapsulation:2})}return r})(),no=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.toastr=i,this.dataService=n,this.dialogserve=a,this.data=d,this.Ref=l,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.repoService.update(`api/categories/${this.result.id}`,{name:c.name}).subscribe(F=>{this.dialogserve.openSuccessDialog("The role has been updated successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},F=>{this.toastr.error(F),this.Ref.close([])})},this.getRoletoUpdate=()=>{const u=`api/categories/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:f=>{this.role={...f},this.dataForm.patchValue(this.role)},error:f=>{this.toastr.success(f)}})}}ngOnInit(){this.dataForm=new s.gE({name:new s.MJ("",[s.k0.required,s.k0.maxLength(60)])}),this.result=this.data,this.getRoletoUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(y.tw),t.rXU(I),t.rXU(S.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-update-category"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[_.rl,_.nJ,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})(),io=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.toastr=i,this.dataService=n,this.dialogserve=a,this.Ref=d,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,c)=>this.dataForm?.get(l)?.hasError(c),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.create("api/categories",{name:l.name}).subscribe(f=>{this.dialogserve.openSuccessDialog("The role has been added successfully.").afterClosed().subscribe(g=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},f=>{this.toastr.error(f),this.Ref.close([])})}}ngOnInit(){this.dataForm=new s.gE({name:new s.MJ("",[s.k0.required,s.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(y.tw),t.rXU(I),t.rXU(S.o),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-category"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[_.rl,_.nJ,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();function ao(r,o){1&r&&(t.j41(0,"th",14),t.EFF(1," Action "),t.k0s())}function so(r,o){if(1&r){const e=t.RV6();t.j41(0,"td",15)(1,"button",16),t.EFF(2," Action "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",17,0)(7,"button",18),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.UpdateCategory(n.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",18),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.DeleteCategory(n.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&r){const e=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function co(r,o){1&r&&(t.j41(0,"th",14),t.EFF(1," Category Name "),t.k0s())}function lo(r,o){if(1&r&&(t.j41(0,"td",15),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.name," ")}}function mo(r,o){1&r&&t.nrm(0,"tr",19)}function uo(r,o){1&r&&t.nrm(0,"tr",20)}let po=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.dialog=i,this.toastr=n,this.dataService=a,this.dialogserve=d,this.displayedColumns=["action","category"],this.dataSource=new p.I6,this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getCategories()})}ngOnInit(){this.getCategories()}getCategories(){this.repoService.getData("api/categories").subscribe(e=>{this.dataSource.data=e},e=>{console.log(e)})}addCategory(){this.dialog.open(io,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}UpdateCategory(e){this.dialog.open(no,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:e}})}DeleteCategory(e){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the category ?").afterClosed().subscribe(i=>{i&&this.repoService.delete(`api/categories/${e}`).subscribe(a=>{this.dialogserve.openSuccessDialog("The role has been deleted successfully.").afterClosed().subscribe(d=>{this.getCategories()})})})}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(b.bZ),t.rXU(y.tw),t.rXU(I),t.rXU(S.o))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-categories"]],decls:20,vars:3,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","category"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"User roles"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return n.addCategory()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.EFF(8,"Create new category "),t.k0s()(),t.j41(9,"mat-card-content",5)(10,"div",6)(11,"table",7),t.qex(12,8),t.DNE(13,ao,2,0,"th",9)(14,so,11,1,"td",10),t.bVm(),t.qex(15,11),t.DNE(16,co,2,0,"th",9)(17,lo,2,1,"td",10),t.bVm(),t.DNE(18,mo,1,0,"tr",12)(19,uo,1,0,"tr",13),t.k0s()()()()),2&i&&(t.R7$(11),t.Y8G("dataSource",n.dataSource),t.R7$(7),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns))},dependencies:[R.kk,R.fb,R.Cp,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB],encapsulation:2})}return r})(),ho=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.toastr=i,this.dataService=n,this.dialogserve=a,this.Ref=d,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,c)=>this.dataForm?.get(l)?.hasError(c),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.create("api/permissions",{name:l.name}).subscribe(f=>{this.dialogserve.openSuccessDialog("The role has been added successfully.").afterClosed().subscribe(g=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},f=>{this.toastr.error(f),this.Ref.close([])})}}ngOnInit(){this.dataForm=new s.gE({name:new s.MJ("",[s.k0.required,s.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(y.tw),t.rXU(I),t.rXU(S.o),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-permission"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[_.rl,_.nJ,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})(),fo=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.toastr=i,this.dataService=n,this.dialogserve=a,this.data=d,this.Ref=l,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.repoService.update(`api/permissions/${this.result.id}`,{name:c.name}).subscribe(F=>{this.dialogserve.openSuccessDialog("The role has been updated successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},F=>{this.toastr.error(F),this.Ref.close([])})},this.getRoletoUpdate=()=>{const u=`api/permissions/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:f=>{this.role={...f},this.dataForm.patchValue(this.role)},error:f=>{this.toastr.success(f)}})}}ngOnInit(){this.dataForm=new s.gE({name:new s.MJ("",[s.k0.required,s.k0.maxLength(60)])}),this.result=this.data,this.getRoletoUpdate()}closeModal(){this.Ref.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(y.tw),t.rXU(I),t.rXU(S.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-update-permission"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update role"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Role Name"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"button",9),t.EFF(15," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[_.rl,_.nJ,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();function _o(r,o){1&r&&(t.j41(0,"th",14),t.EFF(1," Action "),t.k0s())}function go(r,o){if(1&r){const e=t.RV6();t.j41(0,"td",15)(1,"button",16),t.EFF(2," Action "),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",17,0)(7,"button",18),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.UpdatePermission(n.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",18),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.DeletePermission(n.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&r){const e=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function bo(r,o){1&r&&(t.j41(0,"th",14),t.EFF(1," Category Name "),t.k0s())}function Co(r,o){if(1&r&&(t.j41(0,"td",15),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.name," ")}}function ko(r,o){1&r&&t.nrm(0,"tr",19)}function Fo(r,o){1&r&&t.nrm(0,"tr",20)}let vo=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.dialog=i,this.toastr=n,this.dataService=a,this.dialogserve=d,this.displayedColumns=["action","permission"],this.dataSource=new p.I6,this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getCategories()})}ngOnInit(){this.getCategories()}getCategories(){this.repoService.getData("api/permissions").subscribe(e=>{this.dataSource.data=e},e=>{console.log(e)})}addPermission(){this.dialog.open(ho,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}UpdatePermission(e){this.dialog.open(fo,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:e}})}DeletePermission(e){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the Permission ?").afterClosed().subscribe(i=>{i&&this.repoService.delete(`api/permissions/${e}`).subscribe(a=>{this.dialogserve.openSuccessDialog("The role has been deleted successfully.").afterClosed().subscribe(d=>{this.getCategories()})})})}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(b.bZ),t.rXU(y.tw),t.rXU(I),t.rXU(S.o))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-permissions"]],decls:20,vars:3,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","permission"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"User roles"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return n.addPermission()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.EFF(8,"Create new category "),t.k0s()(),t.j41(9,"mat-card-content",5)(10,"div",6)(11,"table",7),t.qex(12,8),t.DNE(13,_o,2,0,"th",9)(14,go,11,1,"td",10),t.bVm(),t.qex(15,11),t.DNE(16,bo,2,0,"th",9)(17,Co,2,1,"td",10),t.bVm(),t.DNE(18,ko,1,0,"tr",12)(19,Fo,1,0,"tr",13),t.k0s()()()()),2&i&&(t.R7$(11),t.Y8G("dataSource",n.dataSource),t.R7$(7),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns))},dependencies:[R.kk,R.fb,R.Cp,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB],encapsulation:2})}return r})();var W=v(5230),K=v(2836);function Eo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Tag ID is required"),t.k0s())}function Do(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Tag ID must not exceed 50 characters"),t.k0s())}function wo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Shipment Date is required"),t.k0s())}function So(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Date is required"),t.k0s())}function Io(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Delivery is required"),t.k0s())}function Ro(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Delivery must not exceed 200 characters"),t.k0s())}function jo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Stock Out is required"),t.k0s())}function yo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Stock Out must not exceed 200 characters"),t.k0s())}function To(r,o){if(1&r&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.distributorName," ")}}function No(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Distributor is required"),t.k0s())}function $o(r,o){if(1&r&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.Y8G("value",e.id),t.R7$(),t.Lme(" ",e.productCode," - ",e.productName," ")}}function Po(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Information is required"),t.k0s())}let xo=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.dataService=i,this.toastr=n,this.dialogService=a,this.dialogRef=d,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,c)=>this.dataForm?.get(l)?.hasError(c),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.create("api/products",{tagID:l.tagID,shipmentDate:l.shipmentDate,productDate:l.productDate,delivery:l.delivery,stockOut:l.stockOut,isActive:!0,distributorId:l.distributorId,productInformationId:l.productInformationId}).subscribe(f=>{this.dialogService.openSuccessDialog("The product has been added successfully.").afterClosed().subscribe(()=>{this.dataService.triggerRefreshTab1(),this.dialogRef.close([])})},f=>{this.dialogService.openErrorDialog(f.message).afterClosed().subscribe(()=>{this.dialogRef.close([])})})}}ngOnInit(){this.dataForm=new s.gE({tagID:new s.MJ("",[s.k0.required,s.k0.maxLength(50)]),shipmentDate:new s.MJ(new Date,[s.k0.required]),productDate:new s.MJ(new Date,[s.k0.required]),delivery:new s.MJ("",[s.k0.required,s.k0.maxLength(200)]),stockOut:new s.MJ("",[s.k0.required,s.k0.maxLength(200)]),isActive:new s.MJ(!0),distributorId:new s.MJ(null,[s.k0.required]),productInformationId:new s.MJ(null,[s.k0.required])}),this.getDistributors(),this.getProductInformations()}getDistributors(){this.repoService.getData("api/distributors").subscribe(e=>{this.distributors=e},e=>{this.toastr.error(e)})}getProductInformations(){this.repoService.getData("api/productInformations").subscribe(e=>{this.productInformations=e},e=>{this.toastr.error(e)})}closeModal(){this.dialogRef.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(I),t.rXU(y.tw),t.rXU(S.o),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-product"]],decls:58,vars:18,consts:[["shipmentPicker",""],["productPicker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","tagID"],[4,"ngIf"],["matInput","","formControlName","shipmentDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","productDate",3,"matDatepicker"],["matInput","","formControlName","delivery"],["matInput","","formControlName","stockOut"],["formControlName","distributorId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","productInformationId"],["mat-flat-button","","color","primary",3,"disabled"],[3,"value"]],template:function(i,n){if(1&i){const a=t.RV6();t.j41(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title",3),t.EFF(3,"Create Product"),t.k0s(),t.nrm(4,"span",4),t.j41(5,"button",5),t.bIt("click",function(){return t.eBV(a),t.Njj(n.closeModal())}),t.j41(6,"span",6),t.EFF(7,"Close"),t.k0s()()(),t.j41(8,"mat-card-content",7)(9,"form",8),t.bIt("ngSubmit",function(){return t.eBV(a),t.Njj(n.createData(n.dataForm.value))}),t.j41(10,"mat-form-field",9)(11,"mat-label"),t.EFF(12,"Tag ID"),t.k0s(),t.nrm(13,"input",10),t.DNE(14,Eo,2,0,"mat-error",11)(15,Do,2,0,"mat-error",11),t.k0s(),t.j41(16,"mat-form-field",9)(17,"mat-label"),t.EFF(18,"Shipment Date"),t.k0s(),t.nrm(19,"input",12)(20,"mat-datepicker-toggle",13)(21,"mat-datepicker",null,0),t.DNE(23,wo,2,0,"mat-error",11),t.k0s(),t.j41(24,"mat-form-field",9)(25,"mat-label"),t.EFF(26,"Product Date"),t.k0s(),t.nrm(27,"input",14)(28,"mat-datepicker-toggle",13)(29,"mat-datepicker",null,1),t.DNE(31,So,2,0,"mat-error",11),t.k0s(),t.j41(32,"mat-form-field",9)(33,"mat-label"),t.EFF(34,"Delivery"),t.k0s(),t.nrm(35,"input",15),t.DNE(36,Io,2,0,"mat-error",11)(37,Ro,2,0,"mat-error",11),t.k0s(),t.j41(38,"mat-form-field",9)(39,"mat-label"),t.EFF(40,"Stock Out"),t.k0s(),t.nrm(41,"input",16),t.DNE(42,jo,2,0,"mat-error",11)(43,yo,2,0,"mat-error",11),t.k0s(),t.j41(44,"mat-form-field",9)(45,"mat-label"),t.EFF(46,"Distributor"),t.k0s(),t.j41(47,"mat-select",17),t.DNE(48,To,2,2,"mat-option",18),t.k0s(),t.DNE(49,No,2,0,"mat-error",11),t.k0s(),t.j41(50,"mat-form-field",9)(51,"mat-label"),t.EFF(52,"Product Information"),t.k0s(),t.j41(53,"mat-select",19),t.DNE(54,$o,2,3,"mat-option",18),t.k0s(),t.DNE(55,Po,2,0,"mat-error",11),t.k0s(),t.j41(56,"button",20),t.EFF(57," Save "),t.k0s()()()()}if(2&i){const a=t.sdS(22),d=t.sdS(30);t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("ngIf",n.validateControl("tagID")&&n.hasError("tagID","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("tagID")&&n.hasError("tagID","maxlength")),t.R7$(4),t.Y8G("matDatepicker",a),t.R7$(),t.Y8G("for",a),t.R7$(3),t.Y8G("ngIf",n.validateControl("shipmentDate")&&n.hasError("shipmentDate","required")),t.R7$(4),t.Y8G("matDatepicker",d),t.R7$(),t.Y8G("for",d),t.R7$(3),t.Y8G("ngIf",n.validateControl("productDate")&&n.hasError("productDate","required")),t.R7$(5),t.Y8G("ngIf",n.validateControl("delivery")&&n.hasError("delivery","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("delivery")&&n.hasError("delivery","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("stockOut")&&n.hasError("stockOut","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("stockOut")&&n.hasError("stockOut","maxlength")),t.R7$(5),t.Y8G("ngForOf",n.distributors),t.R7$(),t.Y8G("ngIf",n.validateControl("distributorId")&&n.hasError("distributorId","required")),t.R7$(5),t.Y8G("ngForOf",n.productInformations),t.R7$(),t.Y8G("ngIf",n.validateControl("productInformationId")&&n.hasError("productInformationId","required")),t.R7$(),t.Y8G("disabled",!n.dataForm.valid)}},dependencies:[k.Sq,k.bT,W.wT,U.Vh,U.bZ,U.bU,_.rl,_.nJ,_.TL,_.yw,j.fg,K.VO,m.RN,m.m2,m.MM,m.dh,E.$z,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();function Uo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Tag ID is required"),t.k0s())}function Ao(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Tag ID must not exceed 50 characters"),t.k0s())}function Mo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Shipment Date is required"),t.k0s())}function Oo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Date is required"),t.k0s())}function Go(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Delivery is required"),t.k0s())}function Yo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Delivery must not exceed 200 characters"),t.k0s())}function qo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Stock Out is required"),t.k0s())}function Lo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Stock Out must not exceed 200 characters"),t.k0s())}function Bo(r,o){if(1&r&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.distributorName," ")}}function Xo(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Distributor is required"),t.k0s())}function Vo(r,o){if(1&r&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.Y8G("value",e.id),t.R7$(),t.Lme(" ",e.productCode," - ",e.productName," ")}}function Ho(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Information is required"),t.k0s())}let Jo=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.dataService=i,this.toastr=n,this.dialogService=a,this.data=d,this.dialogRef=l,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataUpdate(c)},this.executeDataUpdate=c=>{this.repoService.update(`api/products/${this.result.id}`,{tagID:c.tagID,shipmentDate:c.shipmentDate,productDate:c.productDate,delivery:c.delivery,stockOut:c.stockOut,isActive:!0,distributorId:c.distributorId,productInformationId:c.productInformationId}).subscribe(F=>{this.dialogService.openSuccessDialog("The product has been updated successfully.").afterClosed().subscribe(()=>{this.dataService.triggerRefreshTab1(),this.dialogRef.close([])})},F=>{this.toastr.error(F),this.dialogRef.close([])})},this.getProductToUpdate=()=>{this.repoService.getData(`api/products/${this.result.id}`).subscribe({next:f=>{this.product={...f},this.dataForm.patchValue({tagID:this.product.tagID,shipmentDate:this.product.shipmentDate,productDate:this.product.productDate,delivery:this.product.delivery,stockOut:this.product.stockOut,isActive:!0,distributorId:this.product.distributorId,productInformationId:this.product.productInformationId})},error:f=>{this.toastr.error(f)}})}}ngOnInit(){this.dataForm=new s.gE({tagID:new s.MJ("",[s.k0.required,s.k0.maxLength(50)]),shipmentDate:new s.MJ(new Date,[s.k0.required]),productDate:new s.MJ(new Date,[s.k0.required]),delivery:new s.MJ("",[s.k0.required,s.k0.maxLength(200)]),stockOut:new s.MJ("",[s.k0.required,s.k0.maxLength(200)]),isActive:new s.MJ(!0),distributorId:new s.MJ(null,[s.k0.required]),productInformationId:new s.MJ(null,[s.k0.required])}),this.getDistributors(),this.getProductInformations(),this.result=this.data,this.getProductToUpdate()}getDistributors(){this.repoService.getData("api/distributors").subscribe(e=>{this.distributors=e},e=>{this.toastr.error(e)})}getProductInformations(){this.repoService.getData("api/productInformations").subscribe(e=>{this.productInformations=e},e=>{this.toastr.error(e)})}closeModal(){this.dialogRef.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(I),t.rXU(y.tw),t.rXU(S.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-update-product"]],decls:58,vars:18,consts:[["shipmentPicker",""],["productPicker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","tagID"],[4,"ngIf"],["matInput","","formControlName","shipmentDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","productDate",3,"matDatepicker"],["matInput","","formControlName","delivery"],["matInput","","formControlName","stockOut"],["formControlName","distributorId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","productInformationId"],["mat-flat-button","","color","primary",3,"disabled"],[3,"value"]],template:function(i,n){if(1&i){const a=t.RV6();t.j41(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title",3),t.EFF(3,"Update Product"),t.k0s(),t.nrm(4,"span",4),t.j41(5,"button",5),t.bIt("click",function(){return t.eBV(a),t.Njj(n.closeModal())}),t.j41(6,"span",6),t.EFF(7,"Close"),t.k0s()()(),t.j41(8,"mat-card-content",7)(9,"form",8),t.bIt("ngSubmit",function(){return t.eBV(a),t.Njj(n.createData(n.dataForm.value))}),t.j41(10,"mat-form-field",9)(11,"mat-label"),t.EFF(12,"Tag ID"),t.k0s(),t.nrm(13,"input",10),t.DNE(14,Uo,2,0,"mat-error",11)(15,Ao,2,0,"mat-error",11),t.k0s(),t.j41(16,"mat-form-field",9)(17,"mat-label"),t.EFF(18,"Shipment Date"),t.k0s(),t.nrm(19,"input",12)(20,"mat-datepicker-toggle",13)(21,"mat-datepicker",null,0),t.DNE(23,Mo,2,0,"mat-error",11),t.k0s(),t.j41(24,"mat-form-field",9)(25,"mat-label"),t.EFF(26,"Product Date"),t.k0s(),t.nrm(27,"input",14)(28,"mat-datepicker-toggle",13)(29,"mat-datepicker",null,1),t.DNE(31,Oo,2,0,"mat-error",11),t.k0s(),t.j41(32,"mat-form-field",9)(33,"mat-label"),t.EFF(34,"Delivery"),t.k0s(),t.nrm(35,"input",15),t.DNE(36,Go,2,0,"mat-error",11)(37,Yo,2,0,"mat-error",11),t.k0s(),t.j41(38,"mat-form-field",9)(39,"mat-label"),t.EFF(40,"Stock Out"),t.k0s(),t.nrm(41,"input",16),t.DNE(42,qo,2,0,"mat-error",11)(43,Lo,2,0,"mat-error",11),t.k0s(),t.j41(44,"mat-form-field",9)(45,"mat-label"),t.EFF(46,"Distributor"),t.k0s(),t.j41(47,"mat-select",17),t.DNE(48,Bo,2,2,"mat-option",18),t.k0s(),t.DNE(49,Xo,2,0,"mat-error",11),t.k0s(),t.j41(50,"mat-form-field",9)(51,"mat-label"),t.EFF(52,"Product Information"),t.k0s(),t.j41(53,"mat-select",19),t.DNE(54,Vo,2,3,"mat-option",18),t.k0s(),t.DNE(55,Ho,2,0,"mat-error",11),t.k0s(),t.j41(56,"button",20),t.EFF(57," Save "),t.k0s()()()()}if(2&i){const a=t.sdS(22),d=t.sdS(30);t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("ngIf",n.validateControl("tagID")&&n.hasError("tagID","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("tagID")&&n.hasError("tagID","maxlength")),t.R7$(4),t.Y8G("matDatepicker",a),t.R7$(),t.Y8G("for",a),t.R7$(3),t.Y8G("ngIf",n.validateControl("shipmentDate")&&n.hasError("shipmentDate","required")),t.R7$(4),t.Y8G("matDatepicker",d),t.R7$(),t.Y8G("for",d),t.R7$(3),t.Y8G("ngIf",n.validateControl("productDate")&&n.hasError("productDate","required")),t.R7$(5),t.Y8G("ngIf",n.validateControl("delivery")&&n.hasError("delivery","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("delivery")&&n.hasError("delivery","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("stockOut")&&n.hasError("stockOut","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("stockOut")&&n.hasError("stockOut","maxlength")),t.R7$(5),t.Y8G("ngForOf",n.distributors),t.R7$(),t.Y8G("ngIf",n.validateControl("distributorId")&&n.hasError("distributorId","required")),t.R7$(5),t.Y8G("ngForOf",n.productInformations),t.R7$(),t.Y8G("ngIf",n.validateControl("productInformationId")&&n.hasError("productInformationId","required")),t.R7$(),t.Y8G("disabled",!n.dataForm.valid)}},dependencies:[k.Sq,k.bT,W.wT,U.Vh,U.bZ,U.bU,_.rl,_.nJ,_.TL,_.yw,j.fg,K.VO,m.RN,m.m2,m.MM,m.dh,E.$z,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})(),Wo=(()=>{class r{constructor(e,i){this.data=e,this.dialogRef=i,this.product=e.product}closeModal(){this.dialogRef.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-product-detail"]],decls:46,vars:14,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],[1,"detail-container"],["appearance","outline",1,"w-100"],["matInput","","readonly","",3,"value"],["mat-flat-button","","color","primary",3,"click"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Product Details"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"mat-icon",4),t.EFF(7,"close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Tag ID"),t.k0s(),t.nrm(13,"input",8),t.k0s(),t.j41(14,"mat-form-field",7)(15,"mat-label"),t.EFF(16,"Shipment Date"),t.k0s(),t.nrm(17,"input",8),t.nI1(18,"date"),t.k0s(),t.j41(19,"mat-form-field",7)(20,"mat-label"),t.EFF(21,"Product Date"),t.k0s(),t.nrm(22,"input",8),t.nI1(23,"date"),t.k0s(),t.j41(24,"mat-form-field",7)(25,"mat-label"),t.EFF(26,"Delivery"),t.k0s(),t.nrm(27,"input",8),t.k0s(),t.j41(28,"mat-form-field",7)(29,"mat-label"),t.EFF(30,"Stock Out"),t.k0s(),t.nrm(31,"input",8),t.k0s(),t.j41(32,"mat-form-field",7)(33,"mat-label"),t.EFF(34,"Active"),t.k0s(),t.nrm(35,"input",8),t.k0s(),t.j41(36,"mat-form-field",7)(37,"mat-label"),t.EFF(38,"Distributor"),t.k0s(),t.nrm(39,"input",8),t.k0s(),t.j41(40,"mat-form-field",7)(41,"mat-label"),t.EFF(42,"Product Information"),t.k0s(),t.nrm(43,"input",8),t.k0s()(),t.j41(44,"button",9),t.bIt("click",function(){return n.closeModal()}),t.EFF(45," Close "),t.k0s()()()),2&i&&(t.R7$(13),t.Y8G("value",n.product.tagID),t.R7$(4),t.Y8G("value",t.i5U(18,8,n.product.shipmentDate,"short")),t.R7$(5),t.Y8G("value",t.i5U(23,11,n.product.productDate,"short")),t.R7$(5),t.Y8G("value",n.product.delivery),t.R7$(4),t.Y8G("value",n.product.stockOut),t.R7$(4),t.Y8G("value",n.product.isActive?"Yes":"No"),t.R7$(4),t.Y8G("value",(null==n.product.distributor?null:n.product.distributor.distributorName)||"N/A"),t.R7$(4),t.Y8G("value",(null==n.product.productInformation?null:n.product.productInformation.productCode)+" - "+(null==n.product.productInformation?null:n.product.productInformation.productName)||"N/A"))},dependencies:[_.rl,_.nJ,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,k.vh],styles:['@charset "UTF-8";.detail-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-top:16px}']})}return r})();const zo=()=>[4,6,10,20];function Zo(r,o){1&r&&(t.j41(0,"th",25),t.EFF(1," Action "),t.k0s())}function Qo(r,o){if(1&r){const e=t.RV6();t.j41(0,"td",26)(1,"button",27),t.EFF(2," Action"),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",28,0)(7,"button",29),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.viewProductDetail(n))}),t.EFF(8," Detail "),t.k0s(),t.j41(9,"button",29),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.updateProduct(n.id))}),t.EFF(10," Edit "),t.k0s(),t.j41(11,"button",29),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.deleteProduct(n.id))}),t.EFF(12," Delete "),t.k0s()()()}if(2&r){const e=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function Ko(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Tag ID "),t.k0s())}function tn(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.tagID," ")}}function en(r,o){1&r&&(t.j41(0,"th",25),t.EFF(1," Distributor "),t.k0s())}function rn(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",(null==e.distributor?null:e.distributor.distributorName)||"N/A"," ")}}function on(r,o){1&r&&(t.j41(0,"th",25),t.EFF(1," Product Name "),t.k0s())}function nn(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.Lme(" ",null==e.productInformation?null:e.productInformation.productCode," - ",(null==e.productInformation?null:e.productInformation.productName)||"N/A"," ")}}function an(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Shipment Date "),t.k0s())}function sn(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.shipmentDate,"yyyy-MM-dd")," ")}}function cn(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Product Date "),t.k0s())}function ln(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.productDate,"yyyy-MM-dd")," ")}}function dn(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Delivery "),t.k0s())}function mn(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.delivery," ")}}function un(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Stock Out "),t.k0s())}function pn(r,o){if(1&r&&(t.j41(0,"td",26),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.stockOut," ")}}function hn(r,o){1&r&&t.nrm(0,"tr",31)}function fn(r,o){1&r&&t.nrm(0,"tr",32)}let _n=(()=>{class r{constructor(e,i,n,a){this.repoService=e,this.dialog=i,this.dialogServe=n,this.dataService=a,this.displayedColumns=["action","tagID","distributorId","productInformationId","shipmentDate","productDate","delivery","stockOut"],this.dataSource=new p.I6,this.doFilter=d=>{this.dataSource.filter=d.trim().toLocaleLowerCase()},this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getProducts()})}ngOnInit(){this.getProducts()}getProducts(){this.repoService.getData("api/products").subscribe(e=>{this.dataSource.data=e},e=>{console.log(e)})}addProduct(){this.dialog.open(xo,{width:"500px",height:"570px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateProduct(e){this.dialog.open(Jo,{width:"500px",height:"567px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:e}})}deleteProduct(e){this.dialogServe.openConfirmDialog("Are you sure, you want to delete this product?").afterClosed().subscribe(i=>{i&&this.repoService.delete(`api/products/${e}`).subscribe(a=>{this.dialogServe.openSuccessDialog("The product has been deleted successfully.").afterClosed().subscribe(()=>{this.getProducts()})},a=>{console.log(a)})})}viewProductDetail(e){this.dialog.open(Wo,{width:"500px",height:"600px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{product:e}})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(b.bZ),t.rXU(S.o),t.rXU(I))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-products"]],viewQuery:function(i,n){if(1&i&&(t.GBs(O.iy,5),t.GBs(P.B4,5)),2&i){let a;t.mGM(a=t.lsd())&&(n.paginator=a.first),t.mGM(a=t.lsd())&&(n.sort=a.first)}},decls:42,vars:6,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","tagID"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","distributorId"],["matColumnDef","productInformationId"],["matColumnDef","shipmentDate"],["matColumnDef","productDate"],["matColumnDef","delivery"],["matColumnDef","stockOut"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),t.EFF(3,"Products"),t.k0s(),t.nrm(4,"span",3),t.j41(5,"button",4),t.bIt("click",function(){return n.addProduct()}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.j41(8,"span",5),t.EFF(9,"Create new product"),t.k0s()()(),t.j41(10,"mat-card-content",6)(11,"div",7)(12,"mat-form-field",8)(13,"input",9),t.bIt("keyup",function(d){return n.doFilter(d.target.value)}),t.k0s()(),t.j41(14,"table",10),t.qex(15,11),t.DNE(16,Zo,2,0,"th",12)(17,Qo,13,1,"td",13),t.bVm(),t.qex(18,14),t.DNE(19,Ko,2,0,"th",15)(20,tn,2,1,"td",13),t.bVm(),t.qex(21,16),t.DNE(22,en,2,0,"th",12)(23,rn,2,1,"td",13),t.bVm(),t.qex(24,17),t.DNE(25,on,2,0,"th",12)(26,nn,2,2,"td",13),t.bVm(),t.qex(27,18),t.DNE(28,an,2,0,"th",15)(29,sn,3,4,"td",13),t.bVm(),t.qex(30,19),t.DNE(31,cn,2,0,"th",15)(32,ln,3,4,"td",13),t.bVm(),t.qex(33,20),t.DNE(34,dn,2,0,"th",15)(35,mn,2,1,"td",13),t.bVm(),t.qex(36,21),t.DNE(37,un,2,0,"th",15)(38,pn,2,1,"td",13),t.bVm(),t.DNE(39,hn,1,0,"tr",22)(40,fn,1,0,"tr",23),t.k0s()(),t.nrm(41,"mat-paginator",24),t.k0s()()),2&i&&(t.R7$(14),t.Y8G("dataSource",n.dataSource),t.R7$(25),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,zo)))},dependencies:[_.rl,j.fg,R.kk,R.fb,R.Cp,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,O.iy,P.B4,P.aE,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,q.Om,k.vh],styles:['@charset "UTF-8";.mat-header-cell[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-column-action[_ngcontent-%COMP%]{width:150px}.mat-column-tagID[_ngcontent-%COMP%]{width:120px}.mat-column-shipmentDate[_ngcontent-%COMP%], .mat-column-productDate[_ngcontent-%COMP%], .mat-column-delivery[_ngcontent-%COMP%], .mat-column-stockOut[_ngcontent-%COMP%]{width:150px}.mat-column-isActive[_ngcontent-%COMP%]{width:100px}.mat-column-distributorId[_ngcontent-%COMP%]{width:150px}.mat-column-productInformationId[_ngcontent-%COMP%]{width:200px}']})}return r})();function gn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Code is required"),t.k0s())}function bn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Code must not exceed 50 characters"),t.k0s())}function Cn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Name is required"),t.k0s())}function kn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Name must not exceed 200 characters"),t.k0s())}function Fn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Unit is required"),t.k0s())}function vn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Unit must not exceed 20 characters"),t.k0s())}function En(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Weight is required"),t.k0s())}function Dn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Weight must be a positive number"),t.k0s())}let wn=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.dataService=i,this.toastr=n,this.dialogService=a,this.dialogRef=d,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,c)=>this.dataForm?.get(l)?.hasError(c),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.create("api/productInformations",{productCode:l.productCode,productName:l.productName,unit:l.unit,weight:l.weight,isActive:!0}).subscribe(f=>{this.dialogService.openSuccessDialog("The product information has been added successfully.").afterClosed().subscribe(()=>{this.dataService.triggerRefreshTab1(),this.dialogRef.close([])})},f=>{this.dialogService.openErrorDialog(f.message).afterClosed().subscribe(()=>{this.dialogRef.close([])})})}}ngOnInit(){this.dataForm=new s.gE({productCode:new s.MJ("",[s.k0.required,s.k0.maxLength(50)]),productName:new s.MJ("",[s.k0.required,s.k0.maxLength(200)]),unit:new s.MJ("",[s.k0.required,s.k0.maxLength(20)]),weight:new s.MJ(0,[s.k0.required,s.k0.min(0)]),isActive:new s.MJ(!0)})}closeModal(){this.dialogRef.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(I),t.rXU(y.tw),t.rXU(S.o),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-product-information"]],decls:36,vars:10,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","productCode"],[4,"ngIf"],["matInput","","formControlName","productName"],["matInput","","formControlName","unit"],["matInput","","type","number","formControlName","weight"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create Product Information"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"span",4),t.EFF(7,"Close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Product Code"),t.k0s(),t.nrm(13,"input",8),t.DNE(14,gn,2,0,"mat-error",9)(15,bn,2,0,"mat-error",9),t.k0s(),t.j41(16,"mat-form-field",7)(17,"mat-label"),t.EFF(18,"Product Name"),t.k0s(),t.nrm(19,"input",10),t.DNE(20,Cn,2,0,"mat-error",9)(21,kn,2,0,"mat-error",9),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Unit"),t.k0s(),t.nrm(25,"input",11),t.DNE(26,Fn,2,0,"mat-error",9)(27,vn,2,0,"mat-error",9),t.k0s(),t.j41(28,"mat-form-field",7)(29,"mat-label"),t.EFF(30,"Weight"),t.k0s(),t.nrm(31,"input",12),t.DNE(32,En,2,0,"mat-error",9)(33,Dn,2,0,"mat-error",9),t.k0s(),t.j41(34,"button",13),t.EFF(35," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("ngIf",n.validateControl("productCode")&&n.hasError("productCode","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("productCode")&&n.hasError("productCode","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("productName")&&n.hasError("productName","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("productName")&&n.hasError("productName","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("unit")&&n.hasError("unit","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("unit")&&n.hasError("unit","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("weight")&&n.hasError("weight","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("weight")&&n.hasError("weight","min")),t.R7$(),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[k.bT,_.rl,_.nJ,_.TL,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,s.qT,s.me,s.Q0,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();function Sn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Code is required"),t.k0s())}function In(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Code must not exceed 50 characters"),t.k0s())}function Rn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Name is required"),t.k0s())}function jn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Name must not exceed 200 characters"),t.k0s())}function yn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Unit is required"),t.k0s())}function Tn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Unit must not exceed 20 characters"),t.k0s())}function Nn(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Weight is required"),t.k0s())}function $n(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Weight must be a positive number"),t.k0s())}let Pn=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.dataService=i,this.toastr=n,this.dialogService=a,this.data=d,this.dialogRef=l,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataUpdate(c)},this.executeDataUpdate=c=>{this.repoService.update(`api/productInformations/${this.result.id}`,{productCode:c.productCode,productName:c.productName,unit:c.unit,weight:c.weight,isActive:!0}).subscribe(F=>{this.dialogService.openSuccessDialog("The product information has been updated successfully.").afterClosed().subscribe(()=>{this.dataService.triggerRefreshTab1(),this.dialogRef.close([])})},F=>{this.toastr.error(F),this.dialogRef.close([])})},this.getProductInformationToUpdate=()=>{this.repoService.getData(`api/productInformations/${this.result.id}`).subscribe({next:f=>{this.productInformation={...f},this.dataForm.patchValue({productCode:this.productInformation.productCode,productName:this.productInformation.productName,unit:this.productInformation.unit,weight:this.productInformation.weight,isActive:this.productInformation.isActive})},error:f=>{this.toastr.error(f)}})}}ngOnInit(){this.dataForm=new s.gE({productCode:new s.MJ("",[s.k0.required,s.k0.maxLength(50)]),productName:new s.MJ("",[s.k0.required,s.k0.maxLength(200)]),unit:new s.MJ("",[s.k0.required,s.k0.maxLength(20)]),weight:new s.MJ(0,[s.k0.required,s.k0.min(0)]),isActive:new s.MJ(!0)}),this.result=this.data,this.getProductInformationToUpdate()}closeModal(){this.dialogRef.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(I),t.rXU(y.tw),t.rXU(S.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-update-product-information"]],decls:36,vars:10,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","productCode"],[4,"ngIf"],["matInput","","formControlName","productName"],["matInput","","formControlName","unit"],["matInput","","type","number","formControlName","weight"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update Product Information"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"span",4),t.EFF(7,"Close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Product Code"),t.k0s(),t.nrm(13,"input",8),t.DNE(14,Sn,2,0,"mat-error",9)(15,In,2,0,"mat-error",9),t.k0s(),t.j41(16,"mat-form-field",7)(17,"mat-label"),t.EFF(18,"Product Name"),t.k0s(),t.nrm(19,"input",10),t.DNE(20,Rn,2,0,"mat-error",9)(21,jn,2,0,"mat-error",9),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Unit"),t.k0s(),t.nrm(25,"input",11),t.DNE(26,yn,2,0,"mat-error",9)(27,Tn,2,0,"mat-error",9),t.k0s(),t.j41(28,"mat-form-field",7)(29,"mat-label"),t.EFF(30,"Weight"),t.k0s(),t.nrm(31,"input",12),t.DNE(32,Nn,2,0,"mat-error",9)(33,$n,2,0,"mat-error",9),t.k0s(),t.j41(34,"button",13),t.EFF(35," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("ngIf",n.validateControl("productCode")&&n.hasError("productCode","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("productCode")&&n.hasError("productCode","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("productName")&&n.hasError("productName","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("productName")&&n.hasError("productName","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("unit")&&n.hasError("unit","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("unit")&&n.hasError("unit","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("weight")&&n.hasError("weight","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("weight")&&n.hasError("weight","min")),t.R7$(),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[k.bT,_.rl,_.nJ,_.TL,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,s.qT,s.me,s.Q0,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();const xn=["fileInput"],Un=()=>[4,6,10,20];function An(r,o){1&r&&(t.j41(0,"th",27),t.EFF(1," Action "),t.k0s())}function Mn(r,o){if(1&r){const e=t.RV6();t.j41(0,"td",28)(1,"button",29),t.EFF(2," Action"),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",30,1)(7,"button",31),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.updateProductInformation(n.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",31),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.deleteProductInformation(n.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&r){const e=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function On(r,o){1&r&&(t.j41(0,"th",32),t.EFF(1," Product Code "),t.k0s())}function Gn(r,o){if(1&r&&(t.j41(0,"td",28),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.productCode," ")}}function Yn(r,o){1&r&&(t.j41(0,"th",32),t.EFF(1," Product Name "),t.k0s())}function qn(r,o){if(1&r&&(t.j41(0,"td",28),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.productName," ")}}function Ln(r,o){1&r&&(t.j41(0,"th",32),t.EFF(1," Unit "),t.k0s())}function Bn(r,o){if(1&r&&(t.j41(0,"td",28),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.unit," ")}}function Xn(r,o){1&r&&(t.j41(0,"th",32),t.EFF(1," Weight "),t.k0s())}function Vn(r,o){if(1&r&&(t.j41(0,"td",28),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.weight," ")}}function Hn(r,o){1&r&&(t.j41(0,"th",27),t.EFF(1," Active "),t.k0s())}function Jn(r,o){1&r&&(t.j41(0,"span",35),t.EFF(1," Yes "),t.k0s())}function Wn(r,o){1&r&&(t.j41(0,"span",36),t.EFF(1," No "),t.k0s())}function zn(r,o){if(1&r&&(t.j41(0,"td",33),t.DNE(1,Jn,2,0,"ng-template",34)(2,Wn,2,0,"ng-template",34),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",e.isActive),t.R7$(),t.Y8G("ngIf",!e.isActive)}}function Zn(r,o){1&r&&t.nrm(0,"tr",37)}function Qn(r,o){1&r&&t.nrm(0,"tr",38)}let Kn=(()=>{class r{constructor(e,i,n,a){this.repoService=e,this.dialog=i,this.dialogServe=n,this.dataService=a,this.displayedColumns=["action","productCode","productName","unit","weight"],this.dataSource=new p.I6,this.doFilter=d=>{this.dataSource.filter=d.trim().toLocaleLowerCase()},this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getProductInformations()})}ngOnInit(){this.getProductInformations()}getProductInformations(){this.repoService.getData("api/productInformations").subscribe(e=>{this.dataSource.data=e},e=>{console.log(e)})}addProductInformation(){this.dialog.open(wn,{width:"500px",height:"450px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateProductInformation(e){this.dialog.open(Pn,{width:"500px",height:"450px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:e}})}deleteProductInformation(e){this.dialogServe.openConfirmDialog("Are you sure, you want to delete this product information?").afterClosed().subscribe(i=>{i&&this.repoService.delete(`api/productInformations/${e}`).subscribe(a=>{this.dialogServe.openSuccessDialog("The product information has been deleted successfully.").afterClosed().subscribe(()=>{this.getProductInformations()})},a=>{console.log(a)})})}triggerFileInput(){this.fileInput.nativeElement.click()}onFileChange(e){const i=e.target.files[0];if(!i)return;if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(i.type))return void this.dialogServe.openErrorDialog("Please select a valid Excel file (.xlsx or .xls).");const a=new FormData;a.append("file",i,i.name),this.repoService.upload("api/productInformations/import",a).subscribe(d=>{this.dialogServe.openSuccessDialog("Product informations imported successfully.").afterClosed().subscribe(()=>{this.getProductInformations()})},d=>{this.dialogServe.openErrorDialog(`Error importing product informations: ${d.message}`)}),e.target.value=""}downloadTemplate(){this.repoService.download("api/productInformations/template").subscribe(e=>{const i=window.URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download="ProductInformationTemplate.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(i)},e=>{this.dialogServe.openErrorDialog("Error downloading template: "+e.message)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(b.bZ),t.rXU(S.o),t.rXU(I))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-product-informations"]],viewQuery:function(i,n){if(1&i&&(t.GBs(xn,5),t.GBs(O.iy,5),t.GBs(P.B4,5)),2&i){let a;t.mGM(a=t.lsd())&&(n.fileInput=a.first),t.mGM(a=t.lsd())&&(n.paginator=a.first),t.mGM(a=t.lsd())&&(n.sort=a.first)}},decls:50,vars:6,consts:[["fileInput",""],["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],["mat-flat-button","","color","accent","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["type","file","accept",".xlsx, .xls",2,"display","none",3,"change"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","productCode"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","productName"],["matColumnDef","unit"],["matColumnDef","weight"],["matColumnDef","isActive"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[3,"ngIf"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],["mat-header-row",""],["mat-row",""]],template:function(i,n){if(1&i){const a=t.RV6();t.j41(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title",3),t.EFF(3,"Product Informations"),t.k0s(),t.nrm(4,"span",4),t.j41(5,"button",5),t.bIt("click",function(){return t.eBV(a),t.Njj(n.addProductInformation())}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.j41(8,"span",6),t.EFF(9,"Create new product information"),t.k0s()(),t.j41(10,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(n.triggerFileInput())}),t.j41(11,"mat-icon"),t.EFF(12,"upload_file"),t.k0s(),t.j41(13,"span",6),t.EFF(14,"Import from Excel"),t.k0s()(),t.j41(15,"input",8,0),t.bIt("change",function(l){return t.eBV(a),t.Njj(n.onFileChange(l))}),t.k0s(),t.j41(17,"input",8,0),t.bIt("change",function(l){return t.eBV(a),t.Njj(n.onFileChange(l))}),t.k0s(),t.j41(19,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(n.downloadTemplate())}),t.j41(20,"mat-icon"),t.EFF(21,"download"),t.k0s(),t.j41(22,"span",6),t.EFF(23,"Download Template"),t.k0s()()(),t.j41(24,"mat-card-content",9)(25,"div",10)(26,"mat-form-field",11)(27,"input",12),t.bIt("keyup",function(l){return t.eBV(a),t.Njj(n.doFilter(l.target.value))}),t.k0s()(),t.j41(28,"table",13),t.qex(29,14),t.DNE(30,An,2,0,"th",15)(31,Mn,11,1,"td",16),t.bVm(),t.qex(32,17),t.DNE(33,On,2,0,"th",18)(34,Gn,2,1,"td",16),t.bVm(),t.qex(35,19),t.DNE(36,Yn,2,0,"th",18)(37,qn,2,1,"td",16),t.bVm(),t.qex(38,20),t.DNE(39,Ln,2,0,"th",18)(40,Bn,2,1,"td",16),t.bVm(),t.qex(41,21),t.DNE(42,Xn,2,0,"th",18)(43,Vn,2,1,"td",16),t.bVm(),t.qex(44,22),t.DNE(45,Hn,2,0,"th",15)(46,zn,3,2,"td",23),t.bVm(),t.DNE(47,Zn,1,0,"tr",24)(48,Qn,1,0,"tr",25),t.k0s()(),t.nrm(49,"mat-paginator",26),t.k0s()()}2&i&&(t.R7$(28),t.Y8G("dataSource",n.dataSource),t.R7$(19),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,Un)))},dependencies:[k.bT,_.rl,j.fg,R.kk,R.fb,R.Cp,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,O.iy,P.B4,P.aE,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,q.Om],encapsulation:2})}return r})();function ti(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Distributor Code is required"),t.k0s())}function ei(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 50 characters"),t.k0s())}function ri(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Distributor Name is required"),t.k0s())}function oi(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 100 characters"),t.k0s())}function ni(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Address is required"),t.k0s())}function ii(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 200 characters"),t.k0s())}function ai(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Phone Number is required"),t.k0s())}function si(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Please enter a valid phone number"),t.k0s())}function ci(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 20 characters"),t.k0s())}function li(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 100 characters"),t.k0s())}function di(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Area is required"),t.k0s())}function mi(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 50 characters"),t.k0s())}function ui(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 500 characters"),t.k0s())}let pi=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.dataService=i,this.toastr=n,this.dialogService=a,this.dialogRef=d,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,c)=>this.dataForm?.get(l)?.hasError(c),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.create("api/distributors",{distributorCode:l.distributorCode,distributorName:l.distributorName,address:l.address,phoneNumber:l.phoneNumber,contactSource:l.contactSource,area:l.area,note:l.note,isActive:!0}).subscribe({next:()=>{this.dialogService.openSuccessDialog("The distributor has been added successfully.").afterClosed().subscribe(()=>{this.dataService.triggerRefreshTab1(),this.dialogRef.close([])})},error:f=>{this.dialogService.openErrorDialog(f.message).afterClosed().subscribe(()=>{this.dialogRef.close([])})}})}}ngOnInit(){this.dataForm=new s.gE({distributorCode:new s.MJ("",[s.k0.required,s.k0.maxLength(50)]),distributorName:new s.MJ("",[s.k0.required,s.k0.maxLength(100)]),address:new s.MJ("",[s.k0.required,s.k0.maxLength(200)]),phoneNumber:new s.MJ("",[s.k0.required,s.k0.maxLength(20),s.k0.pattern(/^\+?\d{10,20}$/)]),contactSource:new s.MJ("",[s.k0.maxLength(100)]),area:new s.MJ("",[s.k0.required,s.k0.maxLength(50)]),note:new s.MJ("",[s.k0.maxLength(500)]),isActive:new s.MJ(!0)})}closeModal(){this.dialogRef.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(I),t.rXU(y.tw),t.rXU(S.o),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-distributor"]],decls:53,vars:15,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","distributorCode"],[4,"ngIf"],["matInput","","formControlName","distributorName"],["matInput","","formControlName","address"],["matInput","","formControlName","phoneNumber"],["matInput","","formControlName","contactSource"],["matInput","","formControlName","area"],["matInput","","formControlName","note"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Create Distributor"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"span",4),t.EFF(7,"Close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Distributor Code"),t.k0s(),t.nrm(13,"input",8),t.DNE(14,ti,2,0,"mat-error",9)(15,ei,2,0,"mat-error",9),t.k0s(),t.j41(16,"mat-form-field",7)(17,"mat-label"),t.EFF(18,"Distributor Name"),t.k0s(),t.nrm(19,"input",10),t.DNE(20,ri,2,0,"mat-error",9)(21,oi,2,0,"mat-error",9),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Address"),t.k0s(),t.nrm(25,"input",11),t.DNE(26,ni,2,0,"mat-error",9)(27,ii,2,0,"mat-error",9),t.k0s(),t.j41(28,"mat-form-field",7)(29,"mat-label"),t.EFF(30,"Phone Number"),t.k0s(),t.nrm(31,"input",12),t.DNE(32,ai,2,0,"mat-error",9)(33,si,2,0,"mat-error",9)(34,ci,2,0,"mat-error",9),t.k0s(),t.j41(35,"mat-form-field",7)(36,"mat-label"),t.EFF(37,"Contact Source"),t.k0s(),t.nrm(38,"input",13),t.DNE(39,li,2,0,"mat-error",9),t.k0s(),t.j41(40,"mat-form-field",7)(41,"mat-label"),t.EFF(42,"Area"),t.k0s(),t.nrm(43,"input",14),t.DNE(44,di,2,0,"mat-error",9)(45,mi,2,0,"mat-error",9),t.k0s(),t.j41(46,"mat-form-field",7)(47,"mat-label"),t.EFF(48,"Note"),t.k0s(),t.nrm(49,"textarea",15),t.DNE(50,ui,2,0,"mat-error",9),t.k0s(),t.j41(51,"button",16),t.EFF(52," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("ngIf",n.validateControl("distributorCode")&&n.hasError("distributorCode","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("distributorCode")&&n.hasError("distributorCode","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("distributorName")&&n.hasError("distributorName","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("distributorName")&&n.hasError("distributorName","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("address")&&n.hasError("address","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("address")&&n.hasError("address","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("phoneNumber")&&n.hasError("phoneNumber","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("phoneNumber")&&n.hasError("phoneNumber","pattern")),t.R7$(),t.Y8G("ngIf",n.validateControl("phoneNumber")&&n.hasError("phoneNumber","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("contactSource")&&n.hasError("contactSource","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("area")&&n.hasError("area","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("area")&&n.hasError("area","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("note")&&n.hasError("note","maxlength")),t.R7$(),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[k.bT,_.rl,_.nJ,_.TL,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();function hi(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Distributor Code is required"),t.k0s())}function fi(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 50 characters"),t.k0s())}function _i(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Distributor Name is required"),t.k0s())}function gi(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 100 characters"),t.k0s())}function bi(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Address is required"),t.k0s())}function Ci(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 200 characters"),t.k0s())}function ki(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Phone Number is required"),t.k0s())}function Fi(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Please enter a valid phone number"),t.k0s())}function vi(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 20 characters"),t.k0s())}function Ei(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 100 characters"),t.k0s())}function Di(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Area is required"),t.k0s())}function wi(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 50 characters"),t.k0s())}function Si(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Maximum length is 500 characters"),t.k0s())}let Ii=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.dataService=i,this.toastr=n,this.dialogService=a,this.data=d,this.dialogRef=l,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.repoService.update(`api/distributors/${this.result.id}`,{distributorCode:c.distributorCode,distributorName:c.distributorName,address:c.address,phoneNumber:c.phoneNumber,contactSource:c.contactSource,area:c.area,note:c.note,isActive:!0}).subscribe({next:()=>{this.dialogService.openSuccessDialog("The distributor has been updated successfully.").afterClosed().subscribe(()=>{this.dataService.triggerRefreshTab1(),this.dialogRef.close([])})},error:F=>{this.toastr.error(F),this.dialogRef.close([])}})},this.getDistributorToUpdate=()=>{this.repoService.getData(`api/distributors/${this.result.id}`).subscribe({next:f=>{this.distributor={...f},this.dataForm.patchValue(this.distributor)},error:f=>{this.toastr.error(f)}})}}ngOnInit(){this.dataForm=new s.gE({distributorCode:new s.MJ("",[s.k0.required,s.k0.maxLength(50)]),distributorName:new s.MJ("",[s.k0.required,s.k0.maxLength(100)]),address:new s.MJ("",[s.k0.required,s.k0.maxLength(200)]),phoneNumber:new s.MJ("",[s.k0.required,s.k0.maxLength(20),s.k0.pattern(/^\+?\d{10,20}$/)]),contactSource:new s.MJ("",[s.k0.maxLength(100)]),area:new s.MJ("",[s.k0.required,s.k0.maxLength(50)]),note:new s.MJ("",[s.k0.maxLength(500)]),isActive:new s.MJ(!0)}),this.result=this.data,this.getDistributorToUpdate()}closeModal(){this.dialogRef.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(I),t.rXU(y.tw),t.rXU(S.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-update-distributor"]],decls:53,vars:15,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","distributorCode"],[4,"ngIf"],["matInput","","formControlName","distributorName"],["matInput","","formControlName","address"],["matInput","","formControlName","phoneNumber"],["matInput","","formControlName","contactSource"],["matInput","","formControlName","area"],["matInput","","formControlName","note"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){1&i&&(t.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),t.EFF(3,"Update Distributor"),t.k0s(),t.nrm(4,"span",2),t.j41(5,"button",3),t.bIt("click",function(){return n.closeModal()}),t.j41(6,"span",4),t.EFF(7,"Close"),t.k0s()()(),t.j41(8,"mat-card-content",5)(9,"form",6),t.bIt("ngSubmit",function(){return n.createData(n.dataForm.value)}),t.j41(10,"mat-form-field",7)(11,"mat-label"),t.EFF(12,"Distributor Code"),t.k0s(),t.nrm(13,"input",8),t.DNE(14,hi,2,0,"mat-error",9)(15,fi,2,0,"mat-error",9),t.k0s(),t.j41(16,"mat-form-field",7)(17,"mat-label"),t.EFF(18,"Distributor Name"),t.k0s(),t.nrm(19,"input",10),t.DNE(20,_i,2,0,"mat-error",9)(21,gi,2,0,"mat-error",9),t.k0s(),t.j41(22,"mat-form-field",7)(23,"mat-label"),t.EFF(24,"Address"),t.k0s(),t.nrm(25,"input",11),t.DNE(26,bi,2,0,"mat-error",9)(27,Ci,2,0,"mat-error",9),t.k0s(),t.j41(28,"mat-form-field",7)(29,"mat-label"),t.EFF(30,"Phone Number"),t.k0s(),t.nrm(31,"input",12),t.DNE(32,ki,2,0,"mat-error",9)(33,Fi,2,0,"mat-error",9)(34,vi,2,0,"mat-error",9),t.k0s(),t.j41(35,"mat-form-field",7)(36,"mat-label"),t.EFF(37,"Contact Source"),t.k0s(),t.nrm(38,"input",13),t.DNE(39,Ei,2,0,"mat-error",9),t.k0s(),t.j41(40,"mat-form-field",7)(41,"mat-label"),t.EFF(42,"Area"),t.k0s(),t.nrm(43,"input",14),t.DNE(44,Di,2,0,"mat-error",9)(45,wi,2,0,"mat-error",9),t.k0s(),t.j41(46,"mat-form-field",7)(47,"mat-label"),t.EFF(48,"Note"),t.k0s(),t.nrm(49,"textarea",15),t.DNE(50,Si,2,0,"mat-error",9),t.k0s(),t.j41(51,"button",16),t.EFF(52," Save "),t.k0s()()()()),2&i&&(t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("ngIf",n.validateControl("distributorCode")&&n.hasError("distributorCode","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("distributorCode")&&n.hasError("distributorCode","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("distributorName")&&n.hasError("distributorName","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("distributorName")&&n.hasError("distributorName","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("address")&&n.hasError("address","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("address")&&n.hasError("address","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("phoneNumber")&&n.hasError("phoneNumber","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("phoneNumber")&&n.hasError("phoneNumber","pattern")),t.R7$(),t.Y8G("ngIf",n.validateControl("phoneNumber")&&n.hasError("phoneNumber","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("contactSource")&&n.hasError("contactSource","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("area")&&n.hasError("area","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("area")&&n.hasError("area","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("note")&&n.hasError("note","maxlength")),t.R7$(),t.Y8G("disabled",!n.dataForm.valid))},dependencies:[k.bT,_.rl,_.nJ,_.TL,j.fg,m.RN,m.m2,m.MM,m.dh,E.$z,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();const Ri=["fileInput"],ji=()=>[4,6,10,20];function yi(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Action "),t.k0s())}function Ti(r,o){if(1&r){const e=t.RV6();t.j41(0,"td",31)(1,"button",32),t.EFF(2," Action"),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",33,1)(7,"button",34),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.updateDistributor(n.id))}),t.EFF(8," Edit "),t.k0s(),t.j41(9,"button",34),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.deleteDistributor(n.id))}),t.EFF(10," Delete "),t.k0s()()()}if(2&r){const e=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function Ni(r,o){1&r&&(t.j41(0,"th",35),t.EFF(1," Distributor Code "),t.k0s())}function $i(r,o){if(1&r&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.distributorCode," ")}}function Pi(r,o){1&r&&(t.j41(0,"th",35),t.EFF(1," Distributor Name "),t.k0s())}function xi(r,o){if(1&r&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.distributorName," ")}}function Ui(r,o){1&r&&(t.j41(0,"th",35),t.EFF(1," Address "),t.k0s())}function Ai(r,o){if(1&r&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.address," ")}}function Mi(r,o){1&r&&(t.j41(0,"th",35),t.EFF(1," Phone Number "),t.k0s())}function Oi(r,o){if(1&r&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.phoneNumber," ")}}function Gi(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Contact Source "),t.k0s())}function Yi(r,o){if(1&r&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.contactSource," ")}}function qi(r,o){1&r&&(t.j41(0,"th",35),t.EFF(1," Area "),t.k0s())}function Li(r,o){if(1&r&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.area," ")}}function Bi(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Note "),t.k0s())}function Xi(r,o){if(1&r&&(t.j41(0,"td",31),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.note," ")}}function Vi(r,o){1&r&&(t.j41(0,"th",30),t.EFF(1," Active "),t.k0s())}function Hi(r,o){1&r&&(t.j41(0,"span",38),t.EFF(1," Yes "),t.k0s())}function Ji(r,o){1&r&&(t.j41(0,"span",39),t.EFF(1," No "),t.k0s())}function Wi(r,o){if(1&r&&(t.j41(0,"td",36),t.DNE(1,Hi,2,0,"ng-template",37)(2,Ji,2,0,"ng-template",37),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.Y8G("ngIf",e.isActive),t.R7$(),t.Y8G("ngIf",!e.isActive)}}function zi(r,o){1&r&&t.nrm(0,"tr",40)}function Zi(r,o){1&r&&t.nrm(0,"tr",41)}let Qi=(()=>{class r{constructor(e,i,n,a){this.repoService=e,this.dialog=i,this.dialogServe=n,this.dataService=a,this.displayedColumns=["action","distributorCode","distributorName","address","phoneNumber","contactSource","area","note"],this.dataSource=new p.I6,this.doFilter=d=>{this.dataSource.filter=d.trim().toLocaleLowerCase()},this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getDistributors()})}ngOnInit(){this.getDistributors()}getDistributors(){this.repoService.getData("api/distributors").subscribe(e=>{this.dataSource.data=e},e=>{console.log(e)})}addDistributor(){this.dialog.open(pi,{width:"500px",height:"570px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateDistributor(e){this.dialog.open(Ii,{width:"500px",height:"567px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:e}})}deleteDistributor(e){this.dialogServe.openConfirmDialog("Are you sure, you want to delete this distributor?").afterClosed().subscribe(i=>{i&&this.repoService.delete(`api/distributors/${e}`).subscribe(a=>{this.dialogServe.openSuccessDialog("The distributor has been deleted successfully.").afterClosed().subscribe(()=>{this.getDistributors()})},a=>{console.log(a)})})}triggerFileInput(){this.fileInput.nativeElement.click()}onFileChange(e){const i=e.target.files[0];if(!i)return;if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(i.type))return void this.dialogServe.openErrorDialog("Please select a valid Excel file (.xlsx or .xls).");const a=new FormData;a.append("file",i,i.name),this.repoService.upload("api/distributors/import",a).subscribe(d=>{this.dialogServe.openSuccessDialog("Distributors imported successfully.").afterClosed().subscribe(()=>{this.getDistributors()})},d=>{this.dialogServe.openErrorDialog(`Error importing distributors: ${d.message}`)}),e.target.value=""}downloadTemplate(){this.repoService.download("api/distributors/template").subscribe(e=>{const i=window.URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download="DistributorTemplate.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(i)},e=>{this.dialogServe.openErrorDialog("Error downloading template: "+e.message)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(b.bZ),t.rXU(S.o),t.rXU(I))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-distributors"]],viewQuery:function(i,n){if(1&i&&(t.GBs(O.iy,5),t.GBs(P.B4,5),t.GBs(Ri,5)),2&i){let a;t.mGM(a=t.lsd())&&(n.paginator=a.first),t.mGM(a=t.lsd())&&(n.sort=a.first),t.mGM(a=t.lsd())&&(n.fileInput=a.first)}},decls:57,vars:6,consts:[["fileInput",""],["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],["mat-flat-button","","color","accent","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["type","file","accept",".xlsx, .xls",2,"display","none",3,"change"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","distributorCode"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","distributorName"],["matColumnDef","address"],["matColumnDef","phoneNumber"],["matColumnDef","contactSource"],["matColumnDef","area"],["matColumnDef","note"],["matColumnDef","isActive"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[3,"ngIf"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],["mat-header-row",""],["mat-row",""]],template:function(i,n){if(1&i){const a=t.RV6();t.j41(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title",3),t.EFF(3,"Distributors"),t.k0s(),t.nrm(4,"span",4),t.j41(5,"button",5),t.bIt("click",function(){return t.eBV(a),t.Njj(n.addDistributor())}),t.j41(6,"mat-icon"),t.EFF(7,"add"),t.k0s(),t.j41(8,"span",6),t.EFF(9,"Create new distributor"),t.k0s()(),t.j41(10,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(n.triggerFileInput())}),t.j41(11,"mat-icon"),t.EFF(12,"upload_file"),t.k0s(),t.j41(13,"span",6),t.EFF(14,"Import from Excel"),t.k0s()(),t.j41(15,"input",8,0),t.bIt("change",function(l){return t.eBV(a),t.Njj(n.onFileChange(l))}),t.k0s(),t.j41(17,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(n.downloadTemplate())}),t.j41(18,"mat-icon"),t.EFF(19,"download"),t.k0s(),t.j41(20,"span",6),t.EFF(21,"Download Template"),t.k0s()()(),t.j41(22,"mat-card-content",9)(23,"div",10)(24,"mat-form-field",11)(25,"input",12),t.bIt("keyup",function(l){return t.eBV(a),t.Njj(n.doFilter(l.target.value))}),t.k0s()(),t.j41(26,"table",13),t.qex(27,14),t.DNE(28,yi,2,0,"th",15)(29,Ti,11,1,"td",16),t.bVm(),t.qex(30,17),t.DNE(31,Ni,2,0,"th",18)(32,$i,2,1,"td",16),t.bVm(),t.qex(33,19),t.DNE(34,Pi,2,0,"th",18)(35,xi,2,1,"td",16),t.bVm(),t.qex(36,20),t.DNE(37,Ui,2,0,"th",18)(38,Ai,2,1,"td",16),t.bVm(),t.qex(39,21),t.DNE(40,Mi,2,0,"th",18)(41,Oi,2,1,"td",16),t.bVm(),t.qex(42,22),t.DNE(43,Gi,2,0,"th",15)(44,Yi,2,1,"td",16),t.bVm(),t.qex(45,23),t.DNE(46,qi,2,0,"th",18)(47,Li,2,1,"td",16),t.bVm(),t.qex(48,24),t.DNE(49,Bi,2,0,"th",15)(50,Xi,2,1,"td",16),t.bVm(),t.qex(51,25),t.DNE(52,Vi,2,0,"th",15)(53,Wi,3,2,"td",26),t.bVm(),t.DNE(54,zi,1,0,"tr",27)(55,Zi,1,0,"tr",28),t.k0s()(),t.nrm(56,"mat-paginator",29),t.k0s()()}2&i&&(t.R7$(26),t.Y8G("dataSource",n.dataSource),t.R7$(28),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(5,ji)))},dependencies:[k.bT,_.rl,j.fg,R.kk,R.fb,R.Cp,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,O.iy,P.B4,P.aE,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,q.Om],encapsulation:2})}return r})();function Ki(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Order Code is required"),t.k0s())}function ta(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Order Code must not exceed 50 characters"),t.k0s())}function ea(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Export Date is required"),t.k0s())}function ra(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Count is required"),t.k0s())}function oa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Count must be a positive number"),t.k0s())}function na(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Vehicle Number is required"),t.k0s())}function ia(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Vehicle Number must not exceed 20 characters"),t.k0s())}function aa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Container Number must be a positive number"),t.k0s())}function sa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Seal Number must be a positive number"),t.k0s())}function ca(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Name is required"),t.k0s())}function la(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Name must not exceed 100 characters"),t.k0s())}function da(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Phone Number is required"),t.k0s())}function ma(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Phone Number must be 10 digits"),t.k0s())}function ua(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Quantity (bags) is required"),t.k0s())}function pa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Quantity (bags) must not exceed 20 characters"),t.k0s())}function ha(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Weight (kg) is required"),t.k0s())}function fa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Weight (kg) must be a positive number"),t.k0s())}function _a(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Manufacture Date is required"),t.k0s())}function ga(r,o){if(1&r&&(t.j41(0,"mat-option",27),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.distributorName," ")}}function ba(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Distributor is required"),t.k0s())}function Ca(r,o){if(1&r&&(t.j41(0,"mat-option",27),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.Y8G("value",e.id),t.R7$(),t.Lme(" ",e.productCode," - ",e.productName," ")}}function ka(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Information is required"),t.k0s())}let Fa=(()=>{class r{constructor(e,i,n,a,d){this.repoService=e,this.dataService=i,this.toastr=n,this.dialogService=a,this.dialogRef=d,this.validateControl=l=>this.dataForm?.get(l)?.invalid&&this.dataForm?.get(l)?.touched,this.hasError=(l,c)=>this.dataForm?.get(l)?.hasError(c),this.createData=l=>{this.dataForm.valid&&this.executeDataCreation(l)},this.executeDataCreation=l=>{this.repoService.create("api/orders",{code:l.code,exportDate:l.exportDate,quantityVehicle:l.quantityVehicle,vehicleNumber:l.vehicleNumber,containerNumber:l.containerNumber,sealNumber:l.sealNumber,driverName:l.driverName,driverPhoneNumber:l.driverPhoneNumber,unitOrder:l.unitOrder,weightOrder:l.weightOrder,manufactureDate:l.manufactureDate,distributorId:l.distributorId,productInformationId:l.productInformationId,status:0}).subscribe(f=>{this.dialogService.openSuccessDialog("The order has been added successfully.").afterClosed().subscribe(()=>{this.dataService.triggerRefreshTab1(),this.dialogRef.close([])})},f=>{this.dialogService.openErrorDialog(f.message).afterClosed().subscribe(()=>{this.dialogRef.close([])})})}}ngOnInit(){this.dataForm=new s.gE({code:new s.MJ("",[s.k0.required,s.k0.maxLength(50)]),exportDate:new s.MJ(new Date,[s.k0.required]),quantityVehicle:new s.MJ(0,[s.k0.required,s.k0.min(0)]),vehicleNumber:new s.MJ("",[s.k0.required,s.k0.maxLength(20)]),containerNumber:new s.MJ(0,[s.k0.min(0)]),sealNumber:new s.MJ(0,[s.k0.min(0)]),driverName:new s.MJ("",[s.k0.required,s.k0.maxLength(100)]),driverPhoneNumber:new s.MJ("",[s.k0.required,s.k0.pattern("^[0-9]{10}$")]),unitOrder:new s.MJ("",[s.k0.required,s.k0.maxLength(20)]),weightOrder:new s.MJ(0,[s.k0.required,s.k0.min(0)]),manufactureDate:new s.MJ(new Date,[s.k0.required]),distributorId:new s.MJ(null,[s.k0.required]),productInformationId:new s.MJ(null,[s.k0.required])}),this.getDistributors(),this.getProductInformations()}getDistributors(){this.repoService.getData("api/distributors").subscribe(e=>{this.distributors=e},e=>{this.toastr.error(e)})}getProductInformations(){this.repoService.getData("api/productInformations").subscribe(e=>{this.productInformations=e},e=>{this.toastr.error(e)})}closeModal(){this.dialogRef.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(I),t.rXU(y.tw),t.rXU(S.o),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-order"]],decls:92,vars:28,consts:[["exportPicker",""],["manufacturePicker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","code"],[4,"ngIf"],["matInput","","formControlName","exportDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","type","number","formControlName","quantityVehicle"],["matInput","","formControlName","vehicleNumber"],["matInput","","type","number","formControlName","containerNumber"],["matInput","","type","number","formControlName","sealNumber"],["matInput","","formControlName","driverName"],["matInput","","formControlName","driverPhoneNumber"],["matInput","","formControlName","unitOrder"],["matInput","","type","number","formControlName","weightOrder"],["matInput","","formControlName","manufactureDate",3,"matDatepicker"],["formControlName","distributorId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","productInformationId"],["mat-flat-button","","color","primary",3,"disabled"],[3,"value"]],template:function(i,n){if(1&i){const a=t.RV6();t.j41(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title",3),t.EFF(3,"Create Order"),t.k0s(),t.nrm(4,"span",4),t.j41(5,"button",5),t.bIt("click",function(){return t.eBV(a),t.Njj(n.closeModal())}),t.j41(6,"span",6),t.EFF(7,"Close"),t.k0s()()(),t.j41(8,"mat-card-content",7)(9,"form",8),t.bIt("ngSubmit",function(){return t.eBV(a),t.Njj(n.createData(n.dataForm.value))}),t.j41(10,"mat-form-field",9)(11,"mat-label"),t.EFF(12,"Order Code"),t.k0s(),t.nrm(13,"input",10),t.DNE(14,Ki,2,0,"mat-error",11)(15,ta,2,0,"mat-error",11),t.k0s(),t.j41(16,"mat-form-field",9)(17,"mat-label"),t.EFF(18,"Export Date"),t.k0s(),t.nrm(19,"input",12)(20,"mat-datepicker-toggle",13)(21,"mat-datepicker",null,0),t.DNE(23,ea,2,0,"mat-error",11),t.k0s(),t.j41(24,"mat-form-field",9)(25,"mat-label"),t.EFF(26,"Driver Count"),t.k0s(),t.nrm(27,"input",14),t.DNE(28,ra,2,0,"mat-error",11)(29,oa,2,0,"mat-error",11),t.k0s(),t.j41(30,"mat-form-field",9)(31,"mat-label"),t.EFF(32,"Vehicle Number"),t.k0s(),t.nrm(33,"input",15),t.DNE(34,na,2,0,"mat-error",11)(35,ia,2,0,"mat-error",11),t.k0s(),t.j41(36,"mat-form-field",9)(37,"mat-label"),t.EFF(38,"Container Number"),t.k0s(),t.nrm(39,"input",16),t.DNE(40,aa,2,0,"mat-error",11),t.k0s(),t.j41(41,"mat-form-field",9)(42,"mat-label"),t.EFF(43,"Seal Number"),t.k0s(),t.nrm(44,"input",17),t.DNE(45,sa,2,0,"mat-error",11),t.k0s(),t.j41(46,"mat-form-field",9)(47,"mat-label"),t.EFF(48,"Driver Name"),t.k0s(),t.nrm(49,"input",18),t.DNE(50,ca,2,0,"mat-error",11)(51,la,2,0,"mat-error",11),t.k0s(),t.j41(52,"mat-form-field",9)(53,"mat-label"),t.EFF(54,"Driver Phone Number"),t.k0s(),t.nrm(55,"input",19),t.DNE(56,da,2,0,"mat-error",11)(57,ma,2,0,"mat-error",11),t.k0s(),t.j41(58,"mat-form-field",9)(59,"mat-label"),t.EFF(60,"Quantity (bags)"),t.k0s(),t.nrm(61,"input",20),t.DNE(62,ua,2,0,"mat-error",11)(63,pa,2,0,"mat-error",11),t.k0s(),t.j41(64,"mat-form-field",9)(65,"mat-label"),t.EFF(66,"Weight (kg)"),t.k0s(),t.nrm(67,"input",21),t.DNE(68,ha,2,0,"mat-error",11)(69,fa,2,0,"mat-error",11),t.k0s(),t.j41(70,"mat-form-field",9)(71,"mat-label"),t.EFF(72,"Manufacture Date"),t.k0s(),t.nrm(73,"input",22)(74,"mat-datepicker-toggle",13)(75,"mat-datepicker",null,1),t.DNE(77,_a,2,0,"mat-error",11),t.k0s(),t.j41(78,"mat-form-field",9)(79,"mat-label"),t.EFF(80,"Distributor"),t.k0s(),t.j41(81,"mat-select",23),t.DNE(82,ga,2,2,"mat-option",24),t.k0s(),t.DNE(83,ba,2,0,"mat-error",11),t.k0s(),t.j41(84,"mat-form-field",9)(85,"mat-label"),t.EFF(86,"Product Information"),t.k0s(),t.j41(87,"mat-select",25),t.DNE(88,Ca,2,3,"mat-option",24),t.k0s(),t.DNE(89,ka,2,0,"mat-error",11),t.k0s(),t.j41(90,"button",26),t.EFF(91," Save "),t.k0s()()()()}if(2&i){const a=t.sdS(22),d=t.sdS(76);t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("ngIf",n.validateControl("code")&&n.hasError("code","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("code")&&n.hasError("code","maxlength")),t.R7$(4),t.Y8G("matDatepicker",a),t.R7$(),t.Y8G("for",a),t.R7$(3),t.Y8G("ngIf",n.validateControl("exportDate")&&n.hasError("exportDate","required")),t.R7$(5),t.Y8G("ngIf",n.validateControl("quantityVehicle")&&n.hasError("quantityVehicle","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("quantityVehicle")&&n.hasError("quantityVehicle","min")),t.R7$(5),t.Y8G("ngIf",n.validateControl("vehicleNumber")&&n.hasError("vehicleNumber","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("vehicleNumber")&&n.hasError("vehicleNumber","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("containerNumber")&&n.hasError("containerNumber","min")),t.R7$(5),t.Y8G("ngIf",n.validateControl("sealNumber")&&n.hasError("sealNumber","min")),t.R7$(5),t.Y8G("ngIf",n.validateControl("driverName")&&n.hasError("driverName","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("driverName")&&n.hasError("driverName","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("driverPhoneNumber")&&n.hasError("driverPhoneNumber","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("driverPhoneNumber")&&n.hasError("driverPhoneNumber","pattern")),t.R7$(5),t.Y8G("ngIf",n.validateControl("unitOrder")&&n.hasError("unitOrder","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("unitOrder")&&n.hasError("unitOrder","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("weightOrder")&&n.hasError("weightOrder","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("weightOrder")&&n.hasError("weightOrder","min")),t.R7$(4),t.Y8G("matDatepicker",d),t.R7$(),t.Y8G("for",d),t.R7$(3),t.Y8G("ngIf",n.validateControl("manufactureDate")&&n.hasError("manufactureDate","required")),t.R7$(5),t.Y8G("ngForOf",n.distributors),t.R7$(),t.Y8G("ngIf",n.validateControl("distributorId")&&n.hasError("distributorId","required")),t.R7$(5),t.Y8G("ngForOf",n.productInformations),t.R7$(),t.Y8G("ngIf",n.validateControl("productInformationId")&&n.hasError("productInformationId","required")),t.R7$(),t.Y8G("disabled",!n.dataForm.valid)}},dependencies:[k.Sq,k.bT,W.wT,U.Vh,U.bZ,U.bU,_.rl,_.nJ,_.TL,_.yw,j.fg,K.VO,m.RN,m.m2,m.MM,m.dh,E.$z,s.qT,s.me,s.Q0,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();function va(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Order Code is required"),t.k0s())}function Ea(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Order Code must not exceed 50 characters"),t.k0s())}function Da(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Export Date is required"),t.k0s())}function wa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Count is required"),t.k0s())}function Sa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Count must be a positive number"),t.k0s())}function Ia(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Vehicle Number is required"),t.k0s())}function Ra(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Vehicle Number must not exceed 20 characters"),t.k0s())}function ja(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Container Number must be a positive number"),t.k0s())}function ya(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Seal Number must be a positive number"),t.k0s())}function Ta(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Name is required"),t.k0s())}function Na(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Name must not exceed 100 characters"),t.k0s())}function $a(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Phone Number is required"),t.k0s())}function Pa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Driver Phone Number must be 10 digits"),t.k0s())}function xa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Quantity (bags) is required"),t.k0s())}function Ua(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Quantity (bags) must not exceed 20 characters"),t.k0s())}function Aa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Weight (kg) is required"),t.k0s())}function Ma(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Weight (kg) must be a positive number"),t.k0s())}function Oa(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Manufacture Date is required"),t.k0s())}function Ga(r,o){if(1&r&&(t.j41(0,"mat-option",27),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.distributorName," ")}}function Ya(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Distributor is required"),t.k0s())}function qa(r,o){if(1&r&&(t.j41(0,"mat-option",27),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.Y8G("value",e.id),t.R7$(),t.Lme(" ",e.productCode," - ",e.productName," ")}}function La(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Product Information is required"),t.k0s())}function Ba(r,o){1&r&&(t.j41(0,"mat-error"),t.EFF(1,"Status is required"),t.k0s())}let Xa=(()=>{class r{constructor(e,i,n,a,d,l){this.repoService=e,this.dataService=i,this.toastr=n,this.dialogService=a,this.data=d,this.dialogRef=l,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,u)=>this.dataForm?.get(c)?.hasError(u),this.createData=c=>{this.dataForm.valid&&this.executeDataUpdate(c)},this.executeDataUpdate=c=>{this.repoService.update(`api/orders/${this.result.id}`,{code:c.code,exportDate:c.exportDate,quantityVehicle:c.quantityVehicle,vehicleNumber:c.vehicleNumber,containerNumber:c.containerNumber,sealNumber:c.sealNumber,driverName:c.driverName,driverPhoneNumber:c.driverPhoneNumber,unitOrder:c.unitOrder,weightOrder:c.weightOrder,manufactureDate:c.manufactureDate,distributorId:c.distributorId,productInformationId:c.productInformationId,status:c.status}).subscribe(F=>{this.dialogService.openSuccessDialog("The order has been updated successfully.").afterClosed().subscribe(()=>{this.dataService.triggerRefreshTab1(),this.dialogRef.close([])})},F=>{this.toastr.error(F),this.dialogRef.close([])})},this.getOrderToUpdate=()=>{this.repoService.getData(`api/orders/${this.result.id}`).subscribe({next:f=>{this.order={...f},this.dataForm.patchValue({code:this.order.code,exportDate:new Date(this.order.exportDate),quantityVehicle:this.order.quantityVehicle,vehicleNumber:this.order.vehicleNumber,containerNumber:this.order.containerNumber,sealNumber:this.order.sealNumber,driverName:this.order.driverName,driverPhoneNumber:this.order.driverPhoneNumber,unitOrder:this.order.unitOrder,weightOrder:this.order.weightOrder,manufactureDate:new Date(this.order.manufactureDate),distributorId:this.order.distributorId,productInformationId:this.order.productInformationId,status:this.order.status})},error:f=>{this.toastr.error(f)}})}}ngOnInit(){this.dataForm=new s.gE({code:new s.MJ("",[s.k0.required,s.k0.maxLength(50)]),exportDate:new s.MJ(new Date,[s.k0.required]),quantityVehicle:new s.MJ(0,[s.k0.required,s.k0.min(0)]),vehicleNumber:new s.MJ("",[s.k0.required,s.k0.maxLength(20)]),containerNumber:new s.MJ(0,[s.k0.min(0)]),sealNumber:new s.MJ(0,[s.k0.min(0)]),driverName:new s.MJ("",[s.k0.required,s.k0.maxLength(100)]),driverPhoneNumber:new s.MJ("",[s.k0.required,s.k0.pattern("^[0-9]{10}$")]),unitOrder:new s.MJ("",[s.k0.required,s.k0.maxLength(20)]),weightOrder:new s.MJ(0,[s.k0.required,s.k0.min(0)]),manufactureDate:new s.MJ(new Date,[s.k0.required]),distributorId:new s.MJ(null,[s.k0.required]),productInformationId:new s.MJ(null,[s.k0.required]),status:new s.MJ(0,[s.k0.required])}),this.getDistributors(),this.getProductInformations(),this.result=this.data,this.getOrderToUpdate()}getDistributors(){this.repoService.getData("api/distributors").subscribe(e=>{this.distributors=e},e=>{this.toastr.error(e)})}getProductInformations(){this.repoService.getData("api/productInformations").subscribe(e=>{this.productInformations=e},e=>{this.toastr.error(e)})}closeModal(){this.dialogRef.close([])}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(I),t.rXU(y.tw),t.rXU(S.o),t.rXU(b.Vh),t.rXU(b.CP))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-update-order"]],decls:103,vars:32,consts:[["exportPicker",""],["manufacturePicker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","code"],[4,"ngIf"],["matInput","","formControlName","exportDate",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","type","number","formControlName","quantityVehicle"],["matInput","","formControlName","vehicleNumber"],["matInput","","type","number","formControlName","containerNumber"],["matInput","","type","number","formControlName","sealNumber"],["matInput","","formControlName","driverName"],["matInput","","formControlName","driverPhoneNumber"],["matInput","","formControlName","unitOrder"],["matInput","","type","number","formControlName","weightOrder"],["matInput","","formControlName","manufactureDate",3,"matDatepicker"],["formControlName","distributorId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","productInformationId"],["formControlName","status"],[3,"value"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(i,n){if(1&i){const a=t.RV6();t.j41(0,"mat-card",2)(1,"mat-card-header")(2,"mat-card-title",3),t.EFF(3,"Update Order"),t.k0s(),t.nrm(4,"span",4),t.j41(5,"button",5),t.bIt("click",function(){return t.eBV(a),t.Njj(n.closeModal())}),t.j41(6,"span",6),t.EFF(7,"Close"),t.k0s()()(),t.j41(8,"mat-card-content",7)(9,"form",8),t.bIt("ngSubmit",function(){return t.eBV(a),t.Njj(n.createData(n.dataForm.value))}),t.j41(10,"mat-form-field",9)(11,"mat-label"),t.EFF(12,"Order Code"),t.k0s(),t.nrm(13,"input",10),t.DNE(14,va,2,0,"mat-error",11)(15,Ea,2,0,"mat-error",11),t.k0s(),t.j41(16,"mat-form-field",9)(17,"mat-label"),t.EFF(18,"Export Date"),t.k0s(),t.nrm(19,"input",12)(20,"mat-datepicker-toggle",13)(21,"mat-datepicker",null,0),t.DNE(23,Da,2,0,"mat-error",11),t.k0s(),t.j41(24,"mat-form-field",9)(25,"mat-label"),t.EFF(26,"Driver Count"),t.k0s(),t.nrm(27,"input",14),t.DNE(28,wa,2,0,"mat-error",11)(29,Sa,2,0,"mat-error",11),t.k0s(),t.j41(30,"mat-form-field",9)(31,"mat-label"),t.EFF(32,"Vehicle Number"),t.k0s(),t.nrm(33,"input",15),t.DNE(34,Ia,2,0,"mat-error",11)(35,Ra,2,0,"mat-error",11),t.k0s(),t.j41(36,"mat-form-field",9)(37,"mat-label"),t.EFF(38,"Container Number"),t.k0s(),t.nrm(39,"input",16),t.DNE(40,ja,2,0,"mat-error",11),t.k0s(),t.j41(41,"mat-form-field",9)(42,"mat-label"),t.EFF(43,"Seal Number"),t.k0s(),t.nrm(44,"input",17),t.DNE(45,ya,2,0,"mat-error",11),t.k0s(),t.j41(46,"mat-form-field",9)(47,"mat-label"),t.EFF(48,"Driver Name"),t.k0s(),t.nrm(49,"input",18),t.DNE(50,Ta,2,0,"mat-error",11)(51,Na,2,0,"mat-error",11),t.k0s(),t.j41(52,"mat-form-field",9)(53,"mat-label"),t.EFF(54,"Driver Phone Number"),t.k0s(),t.nrm(55,"input",19),t.DNE(56,$a,2,0,"mat-error",11)(57,Pa,2,0,"mat-error",11),t.k0s(),t.j41(58,"mat-form-field",9)(59,"mat-label"),t.EFF(60,"Quantity (bags)"),t.k0s(),t.nrm(61,"input",20),t.DNE(62,xa,2,0,"mat-error",11)(63,Ua,2,0,"mat-error",11),t.k0s(),t.j41(64,"mat-form-field",9)(65,"mat-label"),t.EFF(66,"Weight (kg)"),t.k0s(),t.nrm(67,"input",21),t.DNE(68,Aa,2,0,"mat-error",11)(69,Ma,2,0,"mat-error",11),t.k0s(),t.j41(70,"mat-form-field",9)(71,"mat-label"),t.EFF(72,"Manufacture Date"),t.k0s(),t.nrm(73,"input",22)(74,"mat-datepicker-toggle",13)(75,"mat-datepicker",null,1),t.DNE(77,Oa,2,0,"mat-error",11),t.k0s(),t.j41(78,"mat-form-field",9)(79,"mat-label"),t.EFF(80,"Distributor"),t.k0s(),t.j41(81,"mat-select",23),t.DNE(82,Ga,2,2,"mat-option",24),t.k0s(),t.DNE(83,Ya,2,0,"mat-error",11),t.k0s(),t.j41(84,"mat-form-field",9)(85,"mat-label"),t.EFF(86,"Product Information"),t.k0s(),t.j41(87,"mat-select",25),t.DNE(88,qa,2,3,"mat-option",24),t.k0s(),t.DNE(89,La,2,0,"mat-error",11),t.k0s(),t.j41(90,"mat-form-field",9)(91,"mat-label"),t.EFF(92,"Status"),t.k0s(),t.j41(93,"mat-select",26)(94,"mat-option",27),t.EFF(95,"Not Completed"),t.k0s(),t.j41(96,"mat-option",27),t.EFF(97,"In Progress"),t.k0s(),t.j41(98,"mat-option",27),t.EFF(99,"Completed"),t.k0s()(),t.DNE(100,Ba,2,0,"mat-error",11),t.k0s(),t.j41(101,"button",28),t.EFF(102," Save "),t.k0s()()()()}if(2&i){const a=t.sdS(22),d=t.sdS(76);t.R7$(9),t.Y8G("formGroup",n.dataForm),t.R7$(5),t.Y8G("ngIf",n.validateControl("code")&&n.hasError("code","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("code")&&n.hasError("code","maxlength")),t.R7$(4),t.Y8G("matDatepicker",a),t.R7$(),t.Y8G("for",a),t.R7$(3),t.Y8G("ngIf",n.validateControl("exportDate")&&n.hasError("exportDate","required")),t.R7$(5),t.Y8G("ngIf",n.validateControl("quantityVehicle")&&n.hasError("quantityVehicle","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("quantityVehicle")&&n.hasError("quantityVehicle","min")),t.R7$(5),t.Y8G("ngIf",n.validateControl("vehicleNumber")&&n.hasError("vehicleNumber","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("vehicleNumber")&&n.hasError("vehicleNumber","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("containerNumber")&&n.hasError("containerNumber","min")),t.R7$(5),t.Y8G("ngIf",n.validateControl("sealNumber")&&n.hasError("sealNumber","min")),t.R7$(5),t.Y8G("ngIf",n.validateControl("driverName")&&n.hasError("driverName","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("driverName")&&n.hasError("driverName","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("driverPhoneNumber")&&n.hasError("driverPhoneNumber","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("driverPhoneNumber")&&n.hasError("driverPhoneNumber","pattern")),t.R7$(5),t.Y8G("ngIf",n.validateControl("unitOrder")&&n.hasError("unitOrder","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("unitOrder")&&n.hasError("unitOrder","maxlength")),t.R7$(5),t.Y8G("ngIf",n.validateControl("weightOrder")&&n.hasError("weightOrder","required")),t.R7$(),t.Y8G("ngIf",n.validateControl("weightOrder")&&n.hasError("weightOrder","min")),t.R7$(4),t.Y8G("matDatepicker",d),t.R7$(),t.Y8G("for",d),t.R7$(3),t.Y8G("ngIf",n.validateControl("manufactureDate")&&n.hasError("manufactureDate","required")),t.R7$(5),t.Y8G("ngForOf",n.distributors),t.R7$(),t.Y8G("ngIf",n.validateControl("distributorId")&&n.hasError("distributorId","required")),t.R7$(5),t.Y8G("ngForOf",n.productInformations),t.R7$(),t.Y8G("ngIf",n.validateControl("productInformationId")&&n.hasError("productInformationId","required")),t.R7$(5),t.Y8G("value",0),t.R7$(2),t.Y8G("value",1),t.R7$(2),t.Y8G("value",2),t.R7$(2),t.Y8G("ngIf",n.validateControl("status")&&n.hasError("status","required")),t.R7$(),t.Y8G("disabled",!n.dataForm.valid)}},dependencies:[k.Sq,k.bT,W.wT,U.Vh,U.bZ,U.bU,_.rl,_.nJ,_.TL,_.yw,j.fg,K.VO,m.RN,m.m2,m.MM,m.dh,E.$z,s.qT,s.me,s.Q0,s.BC,s.cb,s.j4,s.JD],encapsulation:2})}return r})();const Va=["fileInput"],Ha=()=>[4,6,10,20],Ja=r=>["/ui-components/order-details",r];function Wa(r,o){if(1&r&&(t.j41(0,"div",35)(1,"h3"),t.EFF(2,"Import Report"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s()()),2&r){const e=t.XpG();t.R7$(4),t.SpI("Successful Imports: ",e.importReport.successfulImports,""),t.R7$(2),t.SpI("Duplicate Rows: ",e.importReport.duplicateRows,"")}}function za(r,o){1&r&&(t.j41(0,"th",36),t.EFF(1," Action "),t.k0s())}function Za(r,o){if(1&r){const e=t.RV6();t.j41(0,"td",37)(1,"button",38),t.EFF(2," Action"),t.j41(3,"mat-icon"),t.EFF(4,"arrow_drop_down"),t.k0s()(),t.j41(5,"mat-menu",39,1)(7,"button",40),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.updateOrder(n.id))}),t.EFF(8,"Edit"),t.k0s(),t.j41(9,"button",40),t.bIt("click",function(){const n=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.deleteOrder(n.id))}),t.EFF(10,"Delete"),t.k0s()()()}if(2&r){const e=t.sdS(6);t.R7$(),t.Y8G("matMenuTriggerFor",e)}}function Qa(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Status "),t.k0s())}function Ka(r,o){if(1&r&&(t.qex(0),t.j41(1,"a",43),t.EFF(2),t.k0s(),t.bVm()),2&r){const e=t.XpG().$implicit,i=t.XpG();t.R7$(),t.Y8G("routerLink",t.eq3(3,Ja,e.id))("ngClass",i.getStatusClass(e.status)),t.R7$(),t.SpI(" ",i.getStatusText(e.status)," ")}}function ts(r,o){if(1&r&&(t.j41(0,"span",44),t.EFF(1),t.k0s()),2&r){const e=t.XpG().$implicit,i=t.XpG();t.Y8G("ngClass",i.getStatusClass(e.status)),t.R7$(),t.SpI(" ",i.getStatusText(e.status)," ")}}function es(r,o){if(1&r&&(t.j41(0,"td",37),t.DNE(1,Ka,3,5,"ng-container",42)(2,ts,2,2,"ng-template",null,2,t.C5r),t.k0s()),2&r){const e=o.$implicit,i=t.sdS(3);t.R7$(),t.Y8G("ngIf",0===e.status||1===e.status)("ngIfElse",i)}}function rs(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Order Code "),t.k0s())}function os(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.code," ")}}function ns(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Export Date "),t.k0s())}function is(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.exportDate,"dd/MM/yyyy")," ")}}function as(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Driver Count "),t.k0s())}function ss(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.quantityVehicle," ")}}function cs(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Vehicle Number "),t.k0s())}function ls(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.vehicleNumber," ")}}function ds(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Driver Name "),t.k0s())}function ms(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.driverName," ")}}function us(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Driver Phone Number "),t.k0s())}function ps(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.driverPhoneNumber," ")}}function hs(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Weight (kg) "),t.k0s())}function fs(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.weightOrder," ")}}function _s(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Quantity (bags) "),t.k0s())}function gs(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",e.unitOrder," ")}}function bs(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Manufacture Date "),t.k0s())}function Cs(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",t.i5U(2,1,e.manufactureDate,"dd/MM/yyyy")," ")}}function ks(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Product Name "),t.k0s())}function Fs(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",(null==e.productInformation?null:e.productInformation.productName)||"N/A"," ")}}function vs(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Distributor Name "),t.k0s())}function Es(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",(null==e.distributor?null:e.distributor.distributorName)||"N/A"," ")}}function Ds(r,o){1&r&&(t.j41(0,"th",41),t.EFF(1," Area "),t.k0s())}function ws(r,o){if(1&r&&(t.j41(0,"td",37),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.R7$(),t.SpI(" ",(null==e.distributor?null:e.distributor.area)||"N/A"," ")}}function Ss(r,o){1&r&&t.nrm(0,"tr",45)}function Is(r,o){1&r&&t.nrm(0,"tr",46)}let Rs=(()=>{class r{constructor(e,i,n,a){this.repoService=e,this.dialog=i,this.dialogService=n,this.dataService=a,this.displayedColumns=["action","status","code","exportDate","quantityVehicle","vehicleNumber","driverName","driverPhoneNumber","weightOrder","unitOrder","manufactureDate","productName","distributorName","area"],this.dataSource=new p.I6,this.importReport=null,this.statusFilter="",this.searchText="",this.doFilter=d=>{this.dataSource.filter=d.trim().toLocaleLowerCase()},this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getOrders()})}ngOnInit(){this.getOrders()}getOrders(){this.repoService.getData("api/orders").subscribe(e=>{this.dataSource.data=e},e=>{console.log(e)})}addOrder(){this.dialog.open(Fa,{width:"600px",height:"700px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateOrder(e){this.dialog.open(Xa,{width:"600px",height:"700px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:e}})}deleteOrder(e){this.dialogService.openConfirmDialog("Are you sure you want to delete this order?").afterClosed().subscribe(i=>{i&&this.repoService.delete(`api/orders/${e}`).subscribe(()=>{this.dialogService.openSuccessDialog("The order has been deleted successfully.").afterClosed().subscribe(()=>{this.getOrders()})},a=>{console.log(a)})})}triggerFileInput(){this.fileInput.nativeElement.click()}onFileChange(e){const i=e.target.files[0];if(!i)return;if(!["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(i.type))return void this.dialogService.openErrorDialog("Please select a valid Excel file (.xlsx or .xls).");const a=new FormData;a.append("file",i,i.name),this.repoService.upload("api/orders/import",a).subscribe(d=>{this.importReport=d,this.dialogService.openSuccessDialog("Orders imported successfully.").afterClosed().subscribe(()=>{this.getOrders()})},d=>{this.dialogService.openErrorDialog(`Error importing orders: ${d.message}`)}),e.target.value=""}downloadTemplate(){this.repoService.download("api/orders/template").subscribe(e=>{const i=window.URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download="OrderTemplate.xlsx",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(i)},e=>{this.dialogService.openErrorDialog("Error downloading template: "+e.message)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}getStatusText(e){switch(e){case 0:return"Not Completed";case 1:return"In Progress";case 2:return"Completed";default:return"Unknown"}}getStatusClass(e){switch(e){case 0:return"status-not-completed";case 1:return"status-in-progress";case 2:return"status-completed";default:return"status-unknown"}}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(D.U),t.rXU(b.bZ),t.rXU(S.o),t.rXU(I))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-orders"]],viewQuery:function(i,n){if(1&i&&(t.GBs(Va,5),t.GBs(O.iy,5),t.GBs(P.B4,5)),2&i){let a;t.mGM(a=t.lsd())&&(n.fileInput=a.first),t.mGM(a=t.lsd())&&(n.paginator=a.first),t.mGM(a=t.lsd())&&(n.sort=a.first)}},decls:69,vars:7,consts:[["fileInput",""],["actions","matMenu"],["nonClickableStatus",""],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","accent","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],["type","file","accept",".xlsx, .xls",2,"display","none",3,"change"],[1,"b-t-1"],["class","import-report m-b-16",4,"ngIf"],[1,"table-responsive","m-t-16"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","status"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","code"],["matColumnDef","exportDate"],["matColumnDef","quantityVehicle"],["matColumnDef","vehicleNumber"],["matColumnDef","driverName"],["matColumnDef","driverPhoneNumber"],["matColumnDef","weightOrder"],["matColumnDef","unitOrder"],["matColumnDef","manufactureDate"],["matColumnDef","productName"],["matColumnDef","distributorName"],["matColumnDef","area"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],[1,"import-report","m-b-16"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],[4,"ngIf","ngIfElse"],[1,"status-link",3,"routerLink","ngClass"],[3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(i,n){if(1&i){const a=t.RV6();t.j41(0,"mat-card",3)(1,"mat-card-header")(2,"mat-card-title",4),t.EFF(3,"Orders"),t.k0s(),t.nrm(4,"span",5),t.j41(5,"button",6),t.bIt("click",function(){return t.eBV(a),t.Njj(n.triggerFileInput())}),t.j41(6,"mat-icon"),t.EFF(7,"upload_file"),t.k0s(),t.j41(8,"span",7),t.EFF(9,"Import from Excel"),t.k0s()(),t.j41(10,"input",8,0),t.bIt("change",function(l){return t.eBV(a),t.Njj(n.onFileChange(l))}),t.k0s(),t.j41(12,"button",6),t.bIt("click",function(){return t.eBV(a),t.Njj(n.downloadTemplate())}),t.j41(13,"mat-icon"),t.EFF(14,"download"),t.k0s(),t.j41(15,"span",7),t.EFF(16,"Download Template"),t.k0s()()(),t.j41(17,"mat-card-content",9),t.DNE(18,Wa,7,2,"div",10),t.j41(19,"div",11)(20,"mat-form-field",12)(21,"input",13),t.bIt("keyup",function(l){return t.eBV(a),t.Njj(n.doFilter(l.target.value))}),t.k0s()()(),t.j41(22,"div",11)(23,"table",14),t.qex(24,15),t.DNE(25,za,2,0,"th",16)(26,Za,11,1,"td",17),t.bVm(),t.qex(27,18),t.DNE(28,Qa,2,0,"th",19)(29,es,4,2,"td",17),t.bVm(),t.qex(30,20),t.DNE(31,rs,2,0,"th",19)(32,os,2,1,"td",17),t.bVm(),t.qex(33,21),t.DNE(34,ns,2,0,"th",19)(35,is,3,4,"td",17),t.bVm(),t.qex(36,22),t.DNE(37,as,2,0,"th",19)(38,ss,2,1,"td",17),t.bVm(),t.qex(39,23),t.DNE(40,cs,2,0,"th",19)(41,ls,2,1,"td",17),t.bVm(),t.qex(42,24),t.DNE(43,ds,2,0,"th",19)(44,ms,2,1,"td",17),t.bVm(),t.qex(45,25),t.DNE(46,us,2,0,"th",19)(47,ps,2,1,"td",17),t.bVm(),t.qex(48,26),t.DNE(49,hs,2,0,"th",19)(50,fs,2,1,"td",17),t.bVm(),t.qex(51,27),t.DNE(52,_s,2,0,"th",19)(53,gs,2,1,"td",17),t.bVm(),t.qex(54,28),t.DNE(55,bs,2,0,"th",19)(56,Cs,3,4,"td",17),t.bVm(),t.qex(57,29),t.DNE(58,ks,2,0,"th",19)(59,Fs,2,1,"td",17),t.bVm(),t.qex(60,30),t.DNE(61,vs,2,0,"th",19)(62,Es,2,1,"td",17),t.bVm(),t.qex(63,31),t.DNE(64,Ds,2,0,"th",19)(65,ws,2,1,"td",17),t.bVm(),t.DNE(66,Ss,1,0,"tr",32)(67,Is,1,0,"tr",33),t.k0s()(),t.nrm(68,"mat-paginator",34),t.k0s()()}2&i&&(t.R7$(18),t.Y8G("ngIf",n.importReport),t.R7$(5),t.Y8G("dataSource",n.dataSource),t.R7$(43),t.Y8G("matHeaderRowDef",n.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",n.displayedColumns),t.R7$(),t.Y8G("pageSize",4)("pageSizeOptions",t.lJ4(6,Ha)))},dependencies:[k.YU,k.bT,X.Wk,_.rl,j.fg,R.kk,R.fb,R.Cp,m.RN,m.m2,m.MM,m.dh,E.$z,T.An,O.iy,P.B4,P.aE,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,q.Om,q.PW,k.vh],styles:['@charset "UTF-8";.mat-header-cell[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-column-action[_ngcontent-%COMP%], .mat-column-status[_ngcontent-%COMP%]{width:150px}.mat-column-code[_ngcontent-%COMP%]{width:120px}.mat-column-exportDate[_ngcontent-%COMP%]{width:150px}.mat-column-quantityVehicle[_ngcontent-%COMP%]{width:100px}.mat-column-vehicleNumber[_ngcontent-%COMP%]{width:120px}.mat-column-driverName[_ngcontent-%COMP%], .mat-column-driverPhoneNumber[_ngcontent-%COMP%]{width:150px}.mat-column-weightOrder[_ngcontent-%COMP%], .mat-column-unitOrder[_ngcontent-%COMP%]{width:120px}.mat-column-manufactureDate[_ngcontent-%COMP%]{width:150px}.mat-column-productName[_ngcontent-%COMP%]{width:200px}.mat-column-distributorName[_ngcontent-%COMP%], .mat-column-area[_ngcontent-%COMP%]{width:150px}.import-report[_ngcontent-%COMP%]{padding:16px;background-color:#f5f5f5;border-radius:8px}.status-not-completed[_ngcontent-%COMP%]{background-color:#fcc;padding:4px 8px;border-radius:4px;display:inline-block}.status-in-progress[_ngcontent-%COMP%]{background-color:#fff3cc;padding:4px 8px;border-radius:4px;display:inline-block}.status-completed[_ngcontent-%COMP%]{background-color:#cfc;padding:4px 8px;border-radius:4px;display:inline-block}.status-unknown[_ngcontent-%COMP%]{background-color:#e0e0e0;padding:4px 8px;border-radius:4px;display:inline-block}.filter-container[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.status-link[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer}.status-link[_ngcontent-%COMP%]:hover{text-decoration:none}.status-not-completed[_ngcontent-%COMP%]{color:red}.status-in-progress[_ngcontent-%COMP%]{color:orange}.status-completed[_ngcontent-%COMP%]{color:green}.m-l-8[_ngcontent-%COMP%]{margin-left:8px}']})}return r})();var js=v(5122);function ys(r,o){if(1&r&&(t.j41(0,"div",4)(1,"h3",5),t.EFF(2,"Assigned Line"),t.k0s(),t.j41(3,"div",6)(4,"div",7)(5,"span",8),t.EFF(6,"Sequence Number:"),t.k0s(),t.j41(7,"span",9),t.EFF(8),t.k0s()(),t.j41(9,"div",7)(10,"span",8),t.EFF(11,"Line:"),t.k0s(),t.j41(12,"span",9),t.EFF(13),t.k0s()(),t.j41(14,"div",7)(15,"span",8),t.EFF(16,"Created At:"),t.k0s(),t.j41(17,"span",9),t.EFF(18),t.nI1(19,"date"),t.k0s()()()()),2&r){const e=t.XpG(2);t.R7$(8),t.JRh(e.orderLineDetails.sequenceNumber),t.R7$(5),t.JRh(e.orderLineDetails.line),t.R7$(5),t.JRh(t.i5U(19,3,e.orderLineDetails.createdAt,"dd/MM/yyyy HH:mm:ss"))}}function Ts(r,o){if(1&r&&(t.j41(0,"mat-option",19),t.EFF(1),t.k0s()),2&r){const e=o.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" Line ",e," ")}}function Ns(r,o){if(1&r){const e=t.RV6();t.j41(0,"mat-form-field",16)(1,"mat-label"),t.EFF(2,"Select Line"),t.k0s(),t.j41(3,"mat-select",17),t.mxI("ngModelChange",function(n){t.eBV(e);const a=t.XpG(2);return t.DH7(a.selectedLine,n)||(a.selectedLine=n),t.Njj(n)}),t.DNE(4,Ts,2,2,"mat-option",18),t.k0s()()}if(2&r){const e=t.XpG(2);t.R7$(3),t.R50("ngModel",e.selectedLine),t.Y8G("disabled",2===e.order.status||e.isStarting),t.R7$(),t.Y8G("ngForOf",e.lines)}}function $s(r,o){if(1&r){const e=t.RV6();t.j41(0,"mat-card",1)(1,"mat-card-header",2)(2,"mat-card-title"),t.EFF(3),t.k0s()(),t.j41(4,"mat-card-content",3)(5,"div",4)(6,"h3",5),t.EFF(7,"General Information"),t.k0s(),t.j41(8,"div",6)(9,"div",7)(10,"span",8),t.EFF(11,"Export Date:"),t.k0s(),t.j41(12,"span",9),t.EFF(13),t.nI1(14,"date"),t.k0s()(),t.j41(15,"div",7)(16,"span",8),t.EFF(17,"Status:"),t.k0s(),t.j41(18,"span",10),t.EFF(19),t.k0s()(),t.j41(20,"div",7)(21,"span",8),t.EFF(22,"Vehicle Number:"),t.k0s(),t.j41(23,"span",9),t.EFF(24),t.k0s()(),t.j41(25,"div",7)(26,"span",8),t.EFF(27,"Driver Count:"),t.k0s(),t.j41(28,"span",9),t.EFF(29),t.k0s()()()(),t.j41(30,"div",4)(31,"h3",5),t.EFF(32,"Driver Information"),t.k0s(),t.j41(33,"div",6)(34,"div",7)(35,"span",8),t.EFF(36,"Driver Name:"),t.k0s(),t.j41(37,"span",9),t.EFF(38),t.k0s()(),t.j41(39,"div",7)(40,"span",8),t.EFF(41,"Phone Number:"),t.k0s(),t.j41(42,"span",9),t.EFF(43),t.k0s()()()(),t.j41(44,"div",4)(45,"h3",5),t.EFF(46,"Product Information"),t.k0s(),t.j41(47,"div",6)(48,"div",7)(49,"span",8),t.EFF(50,"Product Name:"),t.k0s(),t.j41(51,"span",9),t.EFF(52),t.k0s()(),t.j41(53,"div",7)(54,"span",8),t.EFF(55,"Quantity (Bags):"),t.k0s(),t.j41(56,"span",9),t.EFF(57),t.k0s()(),t.j41(58,"div",7)(59,"span",8),t.EFF(60,"Weight (Kg):"),t.k0s(),t.j41(61,"span",9),t.EFF(62),t.k0s()(),t.j41(63,"div",7)(64,"span",8),t.EFF(65,"Manufacture Date:"),t.k0s(),t.j41(66,"span",9),t.EFF(67),t.nI1(68,"date"),t.k0s()()()(),t.j41(69,"div",4)(70,"h3",5),t.EFF(71,"Distributor Information"),t.k0s(),t.j41(72,"div",6)(73,"div",7)(74,"span",8),t.EFF(75,"Distributor Name:"),t.k0s(),t.j41(76,"span",9),t.EFF(77),t.k0s()(),t.j41(78,"div",7)(79,"span",8),t.EFF(80,"Area:"),t.k0s(),t.j41(81,"span",9),t.EFF(82),t.k0s()(),t.j41(83,"div",7)(84,"span",8),t.EFF(85,"Address:"),t.k0s(),t.j41(86,"span",9),t.EFF(87),t.k0s()()()(),t.DNE(88,ys,20,6,"div",11),t.k0s(),t.j41(89,"mat-card-actions",12),t.DNE(90,Ns,5,3,"mat-form-field",13),t.j41(91,"button",14),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goBack())}),t.EFF(92,"Back"),t.k0s(),t.j41(93,"button",15),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.startOrder())}),t.EFF(94),t.k0s()()()}if(2&r){const e=t.XpG();t.R7$(3),t.SpI("Order Code: ",e.order.code,""),t.R7$(10),t.JRh(t.i5U(14,19,e.order.exportDate,"dd/MM/yyyy")),t.R7$(5),t.Y8G("ngClass",e.getStatusClass(e.order.status)),t.R7$(),t.SpI(" ",e.getStatusText(e.order.status)," "),t.R7$(5),t.JRh(e.order.vehicleNumber),t.R7$(5),t.JRh(e.order.quantityVehicle),t.R7$(9),t.JRh(e.order.driverName),t.R7$(5),t.JRh(e.order.driverPhoneNumber),t.R7$(9),t.JRh(e.order.productInformation.productName),t.R7$(5),t.SpI("",e.order.unitOrder," bags"),t.R7$(5),t.SpI("",e.order.weightOrder," kg"),t.R7$(5),t.SpI(" ",t.i5U(68,22,e.order.manufactureDate,"dd/MM/yyyy")," "),t.R7$(10),t.JRh(e.order.distributor.distributorName),t.R7$(5),t.JRh(e.order.distributor.area),t.R7$(5),t.JRh(e.order.distributor.address),t.R7$(),t.Y8G("ngIf",e.orderLineDetails),t.R7$(2),t.Y8G("ngIf",!e.hasAssignedLine()),t.R7$(3),t.Y8G("disabled",e.hasAssignedLine()||2===e.order.status||e.isStarting||!e.selectedLine),t.R7$(),t.SpI(" ",e.isStarting?"Starting...":"Start"," ")}}const Ps=[{path:"",children:[{path:"order-details/:id",component:(()=>{class r{constructor(e,i,n,a){this.route=e,this.router=i,this.repoService=n,this.snackBar=a,this.orderId=null,this.order=null,this.selectedLine=null,this.lines=[1,2,3,4],this.isStarting=!1,this.orderLineDetails=null}ngOnInit(){this.orderId=this.route.snapshot.paramMap.get("id"),this.orderId&&(this.repoService.getData(`api/orders/${this.orderId}`).subscribe(e=>{this.order=e},e=>{console.log(e)}),this.loadOrderLineDetails())}loadOrderLineDetails(){this.orderId&&this.repoService.getData(`api/OrderLineDetails/${this.orderId}`).subscribe(e=>{this.orderLineDetails=e,console.log("Order line details:",this.orderLineDetails),this.orderLineDetails&&(this.selectedLine=this.orderLineDetails.line)},e=>{console.log("Error loading order line details:",e),this.orderLineDetails=null})}hasAssignedLine(){return null!==this.orderLineDetails}getStatusText(e){switch(e){case 0:return"Not Completed";case 1:return"In Progress";case 2:return"Completed";default:return"Unknown"}}getStatusClass(e){switch(e){case 0:return"status-not-completed";case 1:return"status-in-progress";case 2:return"status-completed";default:return"status-unknown"}}goBack(){this.router.navigate(["/ui-components/orders"])}startOrder(){this.selectedLine?this.order&&this.orderId&&(this.isStarting=!0,this.repoService.create("api/OrderLineDetails",{OrderId:this.orderId,Line:this.selectedLine}).subscribe(i=>{this.isStarting=!1,this.snackBar.open("Order started successfully.","Close",{duration:3e3}),this.ngOnInit()},i=>{this.isStarting=!1,this.snackBar.open("Failed to start order.","Close",{duration:3e3}),console.log(i)})):this.snackBar.open("Please select a Line before starting.","Close",{duration:3e3})}static#t=this.\u0275fac=function(i){return new(i||r)(t.rXU(X.nX),t.rXU(X.Ix),t.rXU(D.U),t.rXU(js.UG))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-order-details"]],decls:1,vars:1,consts:[["class","order-card",4,"ngIf"],[1,"order-card"],[1,"order-header"],[1,"order-content"],[1,"info-section"],[1,"section-title"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"value",3,"ngClass"],["class","info-section",4,"ngIf"],[1,"order-actions"],["appearance","outline","class","line-select",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click","disabled"],["appearance","outline",1,"line-select"],[3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(i,n){1&i&&t.DNE(0,$s,95,25,"mat-card",0),2&i&&t.Y8G("ngIf",n.order)},dependencies:[k.YU,k.Sq,k.bT,W.wT,_.rl,_.nJ,K.VO,m.RN,m.YY,m.m2,m.MM,m.dh,E.$z,q.PW,s.BC,s.vS,k.vh],styles:['@charset "UTF-8";.order-card[_ngcontent-%COMP%]{width:100%;margin:24px 16px;box-shadow:0 4px 12px #0000001a;border-radius:8px;overflow:hidden}.order-header[_ngcontent-%COMP%]{background:linear-gradient(90deg,#1976d2,#2196f3);color:#fff;padding:16px 24px}mat-card-title[_ngcontent-%COMP%]{font-size:32px;font-weight:600}mat-card-subtitle[_ngcontent-%COMP%]{font-size:18px;opacity:.9}.order-content[_ngcontent-%COMP%]{padding:24px}.info-section[_ngcontent-%COMP%]{margin-bottom:24px}.section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#0f172a;margin-bottom:16px;border-bottom:2px solid #e0e0e0;padding-bottom:8px}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.info-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;background-color:#fafafa;border-radius:4px;transition:background-color .2s}.info-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.label[_ngcontent-%COMP%]{font-weight:600;color:#444;font-size:16px}.value[_ngcontent-%COMP%]{color:#666;font-weight:400;font-size:16px}.order-actions[_ngcontent-%COMP%]{padding:16px 24px;background-color:#f5f5f5;text-align:right;display:flex;justify-content:flex-end;gap:20px;align-items:center}.modern-select[_ngcontent-%COMP%]{width:200px;background-color:#fff;border-radius:6px;box-shadow:0 2px 4px #0000001a;transition:box-shadow .2s}.modern-select[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #00000026}.modern-select[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:#555;font-weight:500}.modern-select[_ngcontent-%COMP%]   .mat-select-value[_ngcontent-%COMP%]{color:#333;font-size:16px}.action-button[_ngcontent-%COMP%]{min-width:120px;padding:0 24px;height:48px;font-size:16px;font-weight:500;border-radius:6px;box-shadow:0 2px 4px #0000001a;transition:transform .2s,box-shadow .2s}.action-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}.action-button[disabled][_ngcontent-%COMP%]{opacity:.6;transform:none;box-shadow:none}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}mat-spinner[_ngcontent-%COMP%]{margin:0 auto 16px}.status-not-completed[_ngcontent-%COMP%]{color:#d32f2f;font-weight:600}.status-in-progress[_ngcontent-%COMP%]{color:#f57c00;font-weight:600}.status-completed[_ngcontent-%COMP%]{color:#388e3c;font-weight:600}.status-unknown[_ngcontent-%COMP%]{color:#757575}@media (max-width: 768px){.info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr))}mat-card-title[_ngcontent-%COMP%]{font-size:28px}mat-card-subtitle[_ngcontent-%COMP%]{font-size:16px}.section-title[_ngcontent-%COMP%]{font-size:18px}.label[_ngcontent-%COMP%], .value[_ngcontent-%COMP%]{font-size:14px}.modern-select[_ngcontent-%COMP%]{width:150px}.action-button[_ngcontent-%COMP%]{min-width:100px;padding:0 16px;height:40px;font-size:14px}}']})}return r})()},{path:"orders",component:Rs},{path:"products",component:_n},{path:"product-informations",component:Kn},{path:"distributors",component:Qi},{path:"lists",component:Wt},{path:"users",component:ve},{path:"roles",component:Xe},{path:"categories",component:po},{path:"permissions",component:vo},{path:"audits",component:or},{path:"about",component:oo},{path:"customer-details/:id",component:ar}]}];let xs=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.$C({type:r});static#r=this.\u0275inj=t.G2t({imports:[k.MD,X.iI.forChild(Ps),bt.G,s.YN,s.X1,Ct.X.pick(kt),W.WX,y._B.forRoot({timeOut:3e3,positionClass:"toast-top-right",preventDuplicates:!0,progressBar:!0,closeButton:!0})]})}return r})()}}]);