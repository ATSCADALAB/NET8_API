"use strict";(self.webpackChunkMatech=self.webpackChunkMatech||[]).push([[958],{5958:(yn,ae,b)=>{b.r(ae),b.d(ae,{UicomponentsModule:()=>wn});var z=b(8498),A=b(177),l=b(9417),ge=b(2448),_e=b(4912),be=b(5509),C=b(467),O=b(9217),B=b(5756),h=b(5686),e=b(4438),E=b(958),j=b(5794),ce=b(1413);let $=(()=>{class n{constructor(){this.refreshTab1=new ce.B,this.refreshTab1$=this.refreshTab1.asObservable()}triggerRefreshTab1(){this.refreshTab1.next()}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var I=b(1321),S=b(2524),V=b(1918),k=b(7421),P=b(2788),p=b(1818),R=b(5484),T=b(9308);let Ce=(()=>{class n{constructor(o,s,r,i,d){this.repoService=o,this.toastr=s,this.dataService=r,this.dialogserve=i,this.Ref=d,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,a)=>this.dataForm?.get(c)?.hasError(a),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{let a={firstName:c.firstName,lastName:c.lastName,dateOfBirth:c.dateOfBirth,address:c.address,country:c.country};console.log(a),this.repoService.create("api/customers",a).subscribe(f=>{this.dialogserve.openSuccessDialog("The customer has been added successfully.").afterClosed().subscribe(g=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},f=>{this.toastr.error(f)})}}ngOnInit(){this.dataForm=new l.gE({firstName:new l.MJ("",[l.k0.required,l.k0.maxLength(60)]),lastName:new l.MJ("",[l.k0.required,l.k0.maxLength(60)]),dateOfBirth:new l.MJ(new Date),address:new l.MJ("",[l.k0.required,l.k0.maxLength(100)]),country:new l.MJ("",[l.k0.required,l.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(j.tw),e.rXU($),e.rXU(I.o),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-add-customer"]],decls:33,vars:4,consts:[["picker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","placeholder","Choose a date of birth","formControlName","dateOfBirth","id","dateOfBirth","readonly","",3,"click","matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","address"],["matInput","","formControlName","country"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,r){if(1&s){const i=e.RV6();e.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),e.EFF(3,"Create customer"),e.k0s(),e.nrm(4,"span",3),e.j41(5,"button",4),e.bIt("click",function(){return e.eBV(i),e.Njj(r.closeModal())}),e.j41(6,"mat-icon",5),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",6)(9,"form",7),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(r.createData(r.dataForm.value))}),e.j41(10,"mat-form-field",8)(11,"mat-label"),e.EFF(12,"First Name"),e.k0s(),e.nrm(13,"input",9),e.k0s(),e.j41(14,"mat-form-field",8)(15,"mat-label"),e.EFF(16,"Last Name"),e.k0s(),e.nrm(17,"input",10),e.k0s(),e.j41(18,"mat-form-field",8)(19,"input",11),e.bIt("click",function(){e.eBV(i);const c=e.sdS(22);return e.Njj(c.open())}),e.k0s(),e.nrm(20,"mat-datepicker-toggle",12)(21,"mat-datepicker",null,0),e.k0s(),e.j41(23,"mat-form-field",8)(24,"mat-label"),e.EFF(25,"Address"),e.k0s(),e.nrm(26,"input",13),e.k0s(),e.j41(27,"mat-form-field",8)(28,"mat-label"),e.EFF(29,"Country"),e.k0s(),e.nrm(30,"input",14),e.k0s(),e.j41(31,"button",15),e.EFF(32," Save "),e.k0s()()()()}if(2&s){const i=e.sdS(22);e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(10),e.Y8G("matDatepicker",i),e.R7$(),e.Y8G("for",i),e.R7$(11),e.Y8G("disabled",!r.dataForm.valid)}},dependencies:[V.Vh,V.bZ,V.bU,k.rl,k.nJ,k.yw,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})(),ke=(()=>{class n{constructor(o,s,r,i,d,c){this.repoService=o,this.toastr=s,this.dataService=r,this.dialogserve=i,this.data=d,this.Ref=c,this.validateControl=a=>this.dataForm?.get(a)?.invalid&&this.dataForm?.get(a)?.touched,this.hasError=(a,u)=>this.dataForm?.get(a)?.hasError(u),this.createData=a=>{this.dataForm.valid&&this.executeDataCreation(a)},this.executeDataCreation=a=>{this.repoService.update(`api/customers/${this.result.id}`,{firstName:a.firstName,lastName:a.lastName,dateOfBirth:a.dateOfBirth,address:a.address,country:a.country}).subscribe(v=>{this.dialogserve.openSuccessDialog("The customer has been updated successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},v=>{this.toastr.error(v)})},this.getCustomertoUpdate=()=>{const u=`api/customers/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:f=>{this.customer={...f},this.dataForm.patchValue(this.customer)},error:f=>{this.toastr.success(f)}})}}ngOnInit(){this.dataForm=new l.gE({firstName:new l.MJ("",[l.k0.required,l.k0.maxLength(60)]),lastName:new l.MJ("",[l.k0.required,l.k0.maxLength(60)]),dateOfBirth:new l.MJ(new Date),address:new l.MJ("",[l.k0.required,l.k0.maxLength(100)]),country:new l.MJ("",[l.k0.required,l.k0.maxLength(60)])}),this.result=this.data,this.getCustomertoUpdate()}closeModal(){this.Ref.close([])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(j.tw),e.rXU($),e.rXU(I.o),e.rXU(S.Vh),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-update-customer"]],decls:33,vars:4,consts:[["picker",""],[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","placeholder","Choose a date of birth","formControlName","dateOfBirth","id","dateOfBirth","readonly","",3,"click","matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","address"],["matInput","","formControlName","country"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,r){if(1&s){const i=e.RV6();e.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),e.EFF(3,"Update customer"),e.k0s(),e.nrm(4,"span",3),e.j41(5,"button",4),e.bIt("click",function(){return e.eBV(i),e.Njj(r.closeModal())}),e.j41(6,"mat-icon",5),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",6)(9,"form",7),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(r.createData(r.dataForm.value))}),e.j41(10,"mat-form-field",8)(11,"mat-label"),e.EFF(12,"First Name"),e.k0s(),e.nrm(13,"input",9),e.k0s(),e.j41(14,"mat-form-field",8)(15,"mat-label"),e.EFF(16,"Last Name"),e.k0s(),e.nrm(17,"input",10),e.k0s(),e.j41(18,"mat-form-field",8)(19,"input",11),e.bIt("click",function(){e.eBV(i);const c=e.sdS(22);return e.Njj(c.open())}),e.k0s(),e.nrm(20,"mat-datepicker-toggle",12)(21,"mat-datepicker",null,0),e.k0s(),e.j41(23,"mat-form-field",8)(24,"mat-label"),e.EFF(25,"Address"),e.k0s(),e.nrm(26,"input",13),e.k0s(),e.j41(27,"mat-form-field",8)(28,"mat-label"),e.EFF(29,"Country"),e.k0s(),e.nrm(30,"input",14),e.k0s(),e.j41(31,"button",15),e.EFF(32," Update "),e.k0s()()()()}if(2&s){const i=e.sdS(22);e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(10),e.Y8G("matDatepicker",i),e.R7$(),e.Y8G("for",i),e.R7$(11),e.Y8G("disabled",!r.dataForm.valid)}},dependencies:[V.Vh,V.bZ,V.bU,k.rl,k.nJ,k.yw,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})();var U=b(8269),Z=b(6038);const ve=()=>[4,6,10,20];function Se(n,t){1&n&&(e.j41(0,"th",26),e.EFF(1," Action "),e.k0s())}function we(n,t){if(1&n){const o=e.RV6();e.j41(0,"td",27)(1,"button",28),e.EFF(2," Action "),e.j41(3,"mat-icon"),e.EFF(4,"arrow_drop_down"),e.k0s()(),e.j41(5,"mat-menu",29,0)(7,"button",30),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.redirectToDetails(r.id))}),e.EFF(8," Details "),e.k0s(),e.j41(9,"button",30),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.updateCustomer(r.id))}),e.EFF(10," Edit "),e.k0s(),e.j41(11,"button",30),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.DeleteCustomer(r.id))}),e.EFF(12," Delete "),e.k0s()()()}if(2&n){const o=e.sdS(6);e.R7$(),e.Y8G("matMenuTriggerFor",o)}}function ye(n,t){1&n&&(e.j41(0,"th",31),e.EFF(1," FirstName "),e.k0s())}function Fe(n,t){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.firstName," ")}}function Ee(n,t){1&n&&(e.j41(0,"th",31),e.EFF(1," LastName "),e.k0s())}function Re(n,t){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.lastName," ")}}function Te(n,t){1&n&&(e.j41(0,"th",31),e.EFF(1," DateOfBirth "),e.k0s())}function De(n,t){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,o.dateOfBirth,"mediumDate")," ")}}function Ie(n,t){1&n&&(e.j41(0,"th",31),e.EFF(1," Country "),e.k0s())}function je(n,t){if(1&n&&(e.j41(0,"td",27),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.country," ")}}function $e(n,t){1&n&&(e.j41(0,"th",26),e.EFF(1," Type "),e.k0s())}function Ae(n,t){1&n&&(e.j41(0,"span",34),e.EFF(1," No Account "),e.k0s())}function Ue(n,t){1&n&&(e.j41(0,"span",35),e.EFF(1," Beginner "),e.k0s())}function xe(n,t){1&n&&(e.j41(0,"span",36),e.EFF(1," Advanced "),e.k0s())}function Pe(n,t){1&n&&(e.j41(0,"span",34),e.EFF(1," Gold "),e.k0s())}function Ne(n,t){1&n&&(e.j41(0,"span",37),e.EFF(1," Platinum "),e.k0s())}function Me(n,t){if(1&n&&(e.j41(0,"td",32),e.DNE(1,Ae,2,0,"ng-template",33)(2,Ue,2,0,"ng-template",33)(3,xe,2,0,"ng-template",33)(4,Pe,2,0,"ng-template",33)(5,Ne,2,0,"ng-template",33),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.Y8G("ngIf","0"==o.accountCount),e.R7$(),e.Y8G("ngIf","1"==o.accountCount),e.R7$(),e.Y8G("ngIf","2"==o.accountCount),e.R7$(),e.Y8G("ngIf","3"==o.accountCount),e.R7$(),e.Y8G("ngIf",+o.accountCount>=4)}}function Be(n,t){1&n&&(e.j41(0,"th",26),e.EFF(1," Status "),e.k0s())}function Le(n,t){1&n&&(e.j41(0,"span",35),e.EFF(1," Active "),e.k0s())}function Ge(n,t){1&n&&(e.j41(0,"span",34),e.EFF(1," Blocked "),e.k0s())}function Xe(n,t){if(1&n&&(e.j41(0,"td",32),e.DNE(1,Le,2,0,"ng-template",33)(2,Ge,2,0,"ng-template",33),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.Y8G("ngIf",1==o.status),e.R7$(),e.Y8G("ngIf",0==o.status)}}function He(n,t){1&n&&(e.j41(0,"th",26),e.EFF(1," Details "),e.k0s())}function Oe(n,t){1&n&&(e.j41(0,"td",27)(1,"mat-icon",38),e.EFF(2,"remove_red_eye"),e.k0s()())}function Ve(n,t){1&n&&e.nrm(0,"tr",39)}function Ye(n,t){1&n&&e.nrm(0,"tr",40)}let We=(()=>{class n{constructor(o,s,r,i,d,c){var a=this;this.repoService=o,this.router=s,this.toastr=r,this.dialog=i,this.dataService=d,this.dialogserve=c,this.displayedColumns=["action","firstName","lastName","dateOfBirth","country","type","status"],this.dataSource=new h.I6,this.doFilter=u=>{this.dataSource.filter=u.trim().toLocaleLowerCase()},this.redirectToDetails=function(){var u=(0,C.A)(function*(f){a.router.navigate([`/ui-components/customer-details/${f}`])});return function(f){return u.apply(this,arguments)}}(),this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getCustomers()})}ngOnInit(){this.getCustomers()}getCustomers(){this.repoService.getData("api/customers").subscribe(o=>{this.dataSource.data=o},o=>{console.log(o)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}addCustomer(){this.dialog.open(Ce,{width:"500px",height:"545px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateCustomer(o){this.dialog.open(ke,{width:"500px",height:"545px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:o}})}DeleteCustomer(o){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the customer ?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/customers/${o}`).subscribe(i=>{this.dialogserve.openSuccessDialog("The customer has been deleted successfully.").afterClosed().subscribe(d=>{this.getCustomers()})})})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(z.Ix),e.rXU(j.tw),e.rXU(S.bZ),e.rXU($),e.rXU(I.o))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-lists"]],viewQuery:function(s,r){if(1&s&&(e.GBs(O.iy,5),e.GBs(B.B4,5)),2&s){let i;e.mGM(i=e.lsd())&&(r.paginator=i.first),e.mGM(i=e.lsd())&&(r.sort=i.first)}},decls:42,vars:6,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],[1,"table-responsive","m-t-16"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","firstName"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","lastName"],["matColumnDef","dateOfBirth"],["matColumnDef","country"],["matColumnDef","type"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","Details"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[3,"ngIf"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-primary","text-primary","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-success","text-success","rounded","f-w-600","p-6","p-y-4","f-s-12"],["color","primary"],["mat-header-row",""],["mat-row",""]],template:function(s,r){1&s&&(e.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),e.EFF(3,"Customers"),e.k0s(),e.nrm(4,"span",3),e.j41(5,"button",4),e.bIt("click",function(){return r.addCustomer()}),e.j41(6,"mat-icon"),e.EFF(7,"add"),e.k0s(),e.j41(8,"span",5),e.EFF(9,"Create new customer"),e.k0s()()(),e.j41(10,"mat-card-content",6)(11,"mat-form-field",7)(12,"input",8),e.bIt("keyup",function(d){return r.doFilter(d.target.value)}),e.k0s()(),e.j41(13,"div",9)(14,"table",10),e.qex(15,11),e.DNE(16,Se,2,0,"th",12)(17,we,13,1,"td",13),e.bVm(),e.qex(18,14),e.DNE(19,ye,2,0,"th",15)(20,Fe,2,1,"td",13),e.bVm(),e.qex(21,16),e.DNE(22,Ee,2,0,"th",15)(23,Re,2,1,"td",13),e.bVm(),e.qex(24,17),e.DNE(25,Te,2,0,"th",15)(26,De,3,4,"td",13),e.bVm(),e.qex(27,18),e.DNE(28,Ie,2,0,"th",15)(29,je,2,1,"td",13),e.bVm(),e.qex(30,19),e.DNE(31,$e,2,0,"th",12)(32,Me,6,5,"td",20),e.bVm(),e.qex(33,21),e.DNE(34,Be,2,0,"th",12)(35,Xe,3,2,"td",20),e.bVm(),e.qex(36,22),e.DNE(37,He,2,0,"th",12)(38,Oe,3,0,"td",13),e.bVm(),e.DNE(39,Ve,1,0,"tr",23)(40,Ye,1,0,"tr",24),e.k0s()(),e.nrm(41,"mat-paginator",25),e.k0s()()),2&s&&(e.R7$(14),e.Y8G("dataSource",r.dataSource),e.R7$(25),e.Y8G("matHeaderRowDef",r.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",r.displayedColumns),e.R7$(),e.Y8G("pageSize",4)("pageSizeOptions",e.lJ4(5,ve)))},dependencies:[A.bT,k.rl,P.fg,U.kk,U.fb,U.Cp,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,O.iy,B.B4,B.aE,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,Z.Om,A.vh],encapsulation:2})}return n})();var Je=b(1682),te=b(1351);function qe(n,t){1&n&&(e.j41(0,"mat-error"),e.EFF(1,"Please provide a valid email"),e.k0s())}function ze(n,t){1&n&&(e.j41(0,"mat-error"),e.EFF(1,"Email is required"),e.k0s())}function Ze(n,t){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"mat-checkbox",15),e.bIt("change",function(r){const i=e.eBV(o).$implicit,d=e.XpG();return e.Njj(d.toggleRoleSelection(r,i.name))}),e.EFF(2),e.k0s()()}if(2&n){const o=t.$implicit,s=e.XpG();e.R7$(),e.Y8G("checked",s.isSelected(o.name)),e.R7$(),e.SpI(" ",o.name," ")}}let Ke=(()=>{class n{constructor(o,s,r,i,d,c){this.repoService=o,this.dataService=s,this.toastr=r,this.dialogserve=i,this.authService=d,this.Ref=c,this.selectedRoles=[],this.validateControl=a=>this.dataForm?.get(a)?.invalid&&this.dataForm?.get(a)?.touched,this.hasError=(a,u)=>this.dataForm?.get(a)?.hasError(u),this.createData=a=>{this.dataForm.valid&&this.executeDataCreation(a)},this.executeDataCreation=a=>{this.authService.registerUser("api/authentication",{firstName:a.firstName,lastName:a.lastName,userName:a.userName,email:a.email,roles:this.selectedRoles}).subscribe(g=>{this.dialogserve.openSuccessDialog("The default password is sent to the user's email address").afterClosed().subscribe(v=>{this.dialogserve.openSuccessDialog("The user has been added successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})})},g=>{this.dialogserve.openErrorDialog(g.message).afterClosed().subscribe(v=>{})})}}ngOnInit(){this.dataForm=new l.gE({firstName:new l.MJ("",[l.k0.required,l.k0.maxLength(60)]),lastName:new l.MJ("",[l.k0.required,l.k0.maxLength(60)]),userName:new l.MJ("",[l.k0.required,l.k0.maxLength(60)]),email:new l.MJ("",[l.k0.required,l.k0.email])}),this.getRoles()}getRoles(){this.repoService.getData("api/roles").subscribe(o=>{this.roles=o},o=>{this.toastr.success(o)})}isSelected(o){return this.selectedRoles.includes(o)}toggleRoleSelection(o,s){o.checked?this.selectedRoles.push(s):this.selectedRoles=this.selectedRoles.filter(r=>r!==s)}closeModal(){this.Ref.close([])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU($),e.rXU(j.tw),e.rXU(I.o),e.rXU(Je.k),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-add-user"]],decls:33,vars:5,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","userName"],["matInput","","type","email","formControlName","email"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled"],[3,"change","checked"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Create user"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.closeModal()}),e.j41(6,"mat-icon",4),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",5)(9,"form",6),e.bIt("ngSubmit",function(){return r.createData(r.dataForm.value)}),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"First Name"),e.k0s(),e.nrm(13,"input",8),e.k0s(),e.j41(14,"mat-form-field",7)(15,"mat-label"),e.EFF(16,"Last Name"),e.k0s(),e.nrm(17,"input",9),e.k0s(),e.j41(18,"mat-form-field",7)(19,"mat-label"),e.EFF(20,"User Name"),e.k0s(),e.nrm(21,"input",10),e.k0s(),e.j41(22,"mat-form-field",7)(23,"mat-label"),e.EFF(24,"Email"),e.k0s(),e.nrm(25,"input",11),e.DNE(26,qe,2,0,"mat-error",12)(27,ze,2,0,"mat-error",12),e.k0s(),e.j41(28,"mat-label"),e.EFF(29,"Roles"),e.k0s(),e.DNE(30,Ze,3,2,"div",13),e.j41(31,"button",14),e.EFF(32," Save "),e.k0s()()()()),2&s&&(e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(17),e.Y8G("ngIf",r.validateControl("email")&&r.hasError("email","email")),e.R7$(),e.Y8G("ngIf",r.validateControl("email")&&r.hasError("email","required")),e.R7$(3),e.Y8G("ngForOf",r.roles),e.R7$(),e.Y8G("disabled",!r.dataForm.valid))},dependencies:[A.Sq,A.bT,te.So,k.rl,k.nJ,k.TL,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})();function Qe(n,t){if(1&n){const o=e.RV6();e.j41(0,"div")(1,"mat-checkbox",14),e.bIt("change",function(r){const i=e.eBV(o).$implicit,d=e.XpG();return e.Njj(d.toggleRoleSelection(r,i.name))}),e.EFF(2),e.k0s()()}if(2&n){const o=t.$implicit,s=e.XpG();e.R7$(),e.Y8G("checked",s.isSelected(o.name)),e.R7$(),e.SpI(" ",o.name," ")}}let et=(()=>{class n{constructor(o,s,r,i,d,c){this.repoService=o,this.dataService=s,this.toastr=r,this.dialogserve=i,this.data=d,this.Ref=c,this.selectedRoles=[],this.validateControl=a=>this.dataForm?.get(a)?.invalid&&this.dataForm?.get(a)?.touched,this.hasError=(a,u)=>this.dataForm?.get(a)?.hasError(u),this.createData=a=>{this.dataForm.valid&&this.executeDataCreation(a)},this.executeDataCreation=a=>{this.repoService.update(`api/users/${this.result.id}`,{firstName:a.firstName,lastName:a.lastName,userName:a.userName,email:a.email,roles:this.selectedRoles}).subscribe(v=>{this.dialogserve.openSuccessDialog("The user has been updated successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},v=>{this.toastr.error(v),this.Ref.close([])})},this.getUsertoUpdate=()=>{const u=`api/users/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:f=>{this.user={...f},this.dataForm.patchValue(this.user),this.selectedRoles=this.user.roles},error:f=>{this.toastr.error(f)}})}}ngOnInit(){this.dataForm=new l.gE({firstName:new l.MJ("",[l.k0.required,l.k0.maxLength(60)]),lastName:new l.MJ("",[l.k0.required,l.k0.maxLength(60)]),userName:new l.MJ("",[l.k0.required,l.k0.maxLength(60)]),email:new l.MJ("",[l.k0.required,l.k0.maxLength(100)])}),this.getRoles(),this.result=this.data,this.getUsertoUpdate()}getRoles(){this.repoService.getData("api/roles").subscribe(o=>{this.roles=o},o=>{this.toastr.error(o)})}toggleRoleSelection(o,s){o.checked?this.selectedRoles.push(s):this.selectedRoles=this.selectedRoles.filter(r=>r!==s)}closeModal(){this.Ref.close([])}isSelected(o){return this.selectedRoles.includes(o)}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU($),e.rXU(j.tw),e.rXU(I.o),e.rXU(S.Vh),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-update-user"]],decls:31,vars:3,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","userName"],["matInput","","formControlName","email"],[4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled"],[3,"change","checked"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Update user"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.closeModal()}),e.j41(6,"mat-icon",4),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",5)(9,"form",6),e.bIt("ngSubmit",function(){return r.createData(r.dataForm.value)}),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"First Name"),e.k0s(),e.nrm(13,"input",8),e.k0s(),e.j41(14,"mat-form-field",7)(15,"mat-label"),e.EFF(16,"Last Name"),e.k0s(),e.nrm(17,"input",9),e.k0s(),e.j41(18,"mat-form-field",7)(19,"mat-label"),e.EFF(20,"User Name"),e.k0s(),e.nrm(21,"input",10),e.k0s(),e.j41(22,"mat-form-field",7)(23,"mat-label"),e.EFF(24,"Email"),e.k0s(),e.nrm(25,"input",11),e.k0s(),e.j41(26,"mat-label"),e.EFF(27,"Roles"),e.k0s(),e.DNE(28,Qe,3,2,"div",12),e.j41(29,"button",13),e.EFF(30," Save "),e.k0s()()()()),2&s&&(e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(19),e.Y8G("ngForOf",r.roles),e.R7$(),e.Y8G("disabled",!r.dataForm.valid))},dependencies:[A.Sq,te.So,k.rl,k.nJ,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})();const tt=()=>[4,6,10,20];function ot(n,t){1&n&&(e.j41(0,"th",25),e.EFF(1," Action "),e.k0s())}function nt(n,t){if(1&n){const o=e.RV6();e.j41(0,"td",26)(1,"button",27),e.EFF(2," Action"),e.j41(3,"mat-icon"),e.EFF(4,"arrow_drop_down"),e.k0s()(),e.j41(5,"mat-menu",28,0)(7,"button",29),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.updateUser(r.id))}),e.EFF(8," Edit "),e.k0s(),e.j41(9,"button",29),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.DeleteUser(r.id))}),e.EFF(10," Delete "),e.k0s()()()}if(2&n){const o=e.sdS(6);e.R7$(),e.Y8G("matMenuTriggerFor",o)}}function st(n,t){1&n&&(e.j41(0,"th",30),e.EFF(1," User Name "),e.k0s())}function rt(n,t){if(1&n&&(e.j41(0,"td",26),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.userName," ")}}function it(n,t){1&n&&(e.j41(0,"th",30),e.EFF(1," First Name "),e.k0s())}function at(n,t){if(1&n&&(e.j41(0,"td",26),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.firstName," ")}}function ct(n,t){1&n&&(e.j41(0,"th",30),e.EFF(1," Last Name "),e.k0s())}function lt(n,t){if(1&n&&(e.j41(0,"td",26),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.lastName," ")}}function dt(n,t){1&n&&(e.j41(0,"th",25),e.EFF(1," Roles "),e.k0s())}function mt(n,t){if(1&n&&(e.j41(0,"td",26),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.roles," ")}}function ut(n,t){1&n&&(e.j41(0,"th",30),e.EFF(1," Email "),e.k0s())}function ht(n,t){if(1&n&&(e.j41(0,"td",26),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.email," ")}}function pt(n,t){1&n&&(e.j41(0,"th",25),e.EFF(1," Email confirm "),e.k0s())}function ft(n,t){1&n&&(e.j41(0,"span",33),e.EFF(1," Yes "),e.k0s())}function gt(n,t){1&n&&(e.j41(0,"span",34),e.EFF(1," No "),e.k0s())}function _t(n,t){if(1&n&&(e.j41(0,"td",31),e.DNE(1,ft,2,0,"ng-template",32)(2,gt,2,0,"ng-template",32),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.Y8G("ngIf","True"==o.emailConfirmed),e.R7$(),e.Y8G("ngIf","False"==o.emailConfirmed)}}function bt(n,t){1&n&&e.nrm(0,"tr",35)}function Ct(n,t){1&n&&e.nrm(0,"tr",36)}let kt=(()=>{class n{constructor(o,s,r,i){this.repoService=o,this.dialog=s,this.dialogserve=r,this.dataService=i,this.displayedColumns=["action","username","name","surname","roles","email","emailconfirm"],this.dataSource=new h.I6,this.doFilter=d=>{this.dataSource.filter=d.trim().toLocaleLowerCase()},this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getUsers()})}ngOnInit(){this.getUsers()}getUsers(){this.repoService.getData("api/users").subscribe(o=>{this.dataSource.data=o},o=>{console.log(o)})}addUser(){this.dialog.open(Ke,{width:"500px",height:"570px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateUser(o){this.dialog.open(et,{width:"500px",height:"567px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:o}})}DeleteUser(o){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the user ?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/users/${o}`).subscribe(i=>{this.dialogserve.openSuccessDialog("The user has been deleted successfully.").afterClosed().subscribe(d=>{this.getUsers()})})})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(S.bZ),e.rXU(I.o),e.rXU($))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-users"]],viewQuery:function(s,r){if(1&s&&(e.GBs(O.iy,5),e.GBs(B.B4,5)),2&s){let i;e.mGM(i=e.lsd())&&(r.paginator=i.first),e.mGM(i=e.lsd())&&(r.sort=i.first)}},decls:39,vars:6,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["appearance","outline",1,"w-100"],["matInput","","type","text","placeholder","Search....",3,"keyup"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","username"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","surname"],["matColumnDef","roles"],["matColumnDef","email"],["matColumnDef","emailconfirm"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell",""],[3,"ngIf"],[1,"bg-light-accent","text-accent","rounded","f-w-600","p-6","p-y-4","f-s-12"],[1,"bg-light-warning","text-warning","rounded","f-w-600","p-6","p-y-4","f-s-12"],["mat-header-row",""],["mat-row",""]],template:function(s,r){1&s&&(e.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),e.EFF(3,"Users"),e.k0s(),e.nrm(4,"span",3),e.j41(5,"button",4),e.bIt("click",function(){return r.addUser()}),e.j41(6,"mat-icon"),e.EFF(7,"add"),e.k0s(),e.j41(8,"span",5),e.EFF(9,"Create new user"),e.k0s()()(),e.j41(10,"mat-card-content",6)(11,"div",7)(12,"mat-form-field",8)(13,"input",9),e.bIt("keyup",function(d){return r.doFilter(d.target.value)}),e.k0s()(),e.j41(14,"table",10),e.qex(15,11),e.DNE(16,ot,2,0,"th",12)(17,nt,11,1,"td",13),e.bVm(),e.qex(18,14),e.DNE(19,st,2,0,"th",15)(20,rt,2,1,"td",13),e.bVm(),e.qex(21,16),e.DNE(22,it,2,0,"th",15)(23,at,2,1,"td",13),e.bVm(),e.qex(24,17),e.DNE(25,ct,2,0,"th",15)(26,lt,2,1,"td",13),e.bVm(),e.qex(27,18),e.DNE(28,dt,2,0,"th",12)(29,mt,2,1,"td",13),e.bVm(),e.qex(30,19),e.DNE(31,ut,2,0,"th",15)(32,ht,2,1,"td",13),e.bVm(),e.qex(33,20),e.DNE(34,pt,2,0,"th",12)(35,_t,3,2,"td",21),e.bVm(),e.DNE(36,bt,1,0,"tr",22)(37,Ct,1,0,"tr",23),e.k0s()(),e.nrm(38,"mat-paginator",24),e.k0s()()),2&s&&(e.R7$(14),e.Y8G("dataSource",r.dataSource),e.R7$(22),e.Y8G("matHeaderRowDef",r.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",r.displayedColumns),e.R7$(),e.Y8G("pageSize",4)("pageSizeOptions",e.lJ4(5,tt)))},dependencies:[A.bT,k.rl,P.fg,U.kk,U.fb,U.Cp,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,O.iy,B.B4,B.aE,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,Z.Om],encapsulation:2})}return n})(),vt=(()=>{class n{constructor(o,s,r,i,d,c){this.repoService=o,this.toastr=s,this.dataService=r,this.dialogserve=i,this.data=d,this.Ref=c,this.validateControl=a=>this.dataForm?.get(a)?.invalid&&this.dataForm?.get(a)?.touched,this.hasError=(a,u)=>this.dataForm?.get(a)?.hasError(u),this.createData=a=>{this.dataForm.valid&&this.executeDataCreation(a)},this.executeDataCreation=a=>{this.repoService.update(`api/roles/${this.result.id}`,{name:a.name}).subscribe(v=>{this.dialogserve.openSuccessDialog("The role has been updated successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},v=>{this.toastr.error(v),this.Ref.close([])})},this.getRoletoUpdate=()=>{const u=`api/roles/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:f=>{this.role={...f},this.dataForm.patchValue(this.role)},error:f=>{this.toastr.success(f)}})}}ngOnInit(){this.dataForm=new l.gE({name:new l.MJ("",[l.k0.required,l.k0.maxLength(60)])}),this.result=this.data,this.getRoletoUpdate()}closeModal(){this.Ref.close([])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(j.tw),e.rXU($),e.rXU(I.o),e.rXU(S.Vh),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-update-role"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Update role"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.closeModal()}),e.j41(6,"mat-icon",4),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",5)(9,"form",6),e.bIt("ngSubmit",function(){return r.createData(r.dataForm.value)}),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Role Name"),e.k0s(),e.nrm(13,"input",8),e.k0s(),e.j41(14,"button",9),e.EFF(15," Save "),e.k0s()()()()),2&s&&(e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(5),e.Y8G("disabled",!r.dataForm.valid))},dependencies:[k.rl,k.nJ,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})(),St=(()=>{class n{constructor(o,s,r,i,d){this.repoService=o,this.toastr=s,this.dataService=r,this.dialogserve=i,this.Ref=d,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,a)=>this.dataForm?.get(c)?.hasError(a),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.repoService.create("api/roles",{name:c.name}).subscribe(f=>{this.dialogserve.openSuccessDialog("The role has been added successfully.").afterClosed().subscribe(g=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},f=>{this.toastr.error(f),this.Ref.close([])})}}ngOnInit(){this.dataForm=new l.gE({name:new l.MJ("",[l.k0.required,l.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(j.tw),e.rXU($),e.rXU(I.o),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-add-role"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Create role"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.closeModal()}),e.j41(6,"mat-icon",4),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",5)(9,"form",6),e.bIt("ngSubmit",function(){return r.createData(r.dataForm.value)}),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Role Name"),e.k0s(),e.nrm(13,"input",8),e.k0s(),e.j41(14,"button",9),e.EFF(15," Save "),e.k0s()()()()),2&s&&(e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(5),e.Y8G("disabled",!r.dataForm.valid))},dependencies:[k.rl,k.nJ,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})();var wt=b(8661);function yt(n,t){1&n&&(e.j41(0,"th",17),e.EFF(1,"Category"),e.k0s())}function Ft(n,t){if(1&n&&(e.j41(0,"td",18)(1,"span",19),e.EFF(2),e.k0s()()),2&n){const o=t.$implicit;e.R7$(2),e.JRh(o.name)}}function Et(n,t){if(1&n&&(e.j41(0,"th",17),e.EFF(1),e.k0s()),2&n){const o=e.XpG().$implicit;e.R7$(),e.JRh(o.name)}}function Rt(n,t){if(1&n){const o=e.RV6();e.j41(0,"mat-checkbox",22),e.mxI("ngModelChange",function(r){e.eBV(o);const i=e.XpG().$implicit,d=e.XpG().$implicit,c=e.XpG();return e.DH7(c.permissionAssignments[i.id][d.id],r)||(c.permissionAssignments[i.id][d.id]=r),e.Njj(r)}),e.k0s()}if(2&n){const o=e.XpG().$implicit,s=e.XpG().$implicit,r=e.XpG();e.R50("ngModel",r.permissionAssignments[o.id][s.id])}}function Tt(n,t){if(1&n&&(e.j41(0,"td",18),e.DNE(1,Rt,1,1,"mat-checkbox",21),e.k0s()),2&n){const o=t.$implicit,s=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",o.id&&s.id)}}function Dt(n,t){if(1&n&&(e.qex(0,20),e.DNE(1,Et,2,1,"th",7)(2,Tt,2,1,"td",8),e.bVm()),2&n){let o;e.Y8G("matColumnDef",null!==(o=t.$implicit.name)&&void 0!==o?o:"unknown")}}function It(n,t){1&n&&e.nrm(0,"tr",23)}function jt(n,t){1&n&&e.nrm(0,"tr",24)}function $t(n,t){1&n&&e.nrm(0,"mat-spinner",25)}function At(n,t){1&n&&(e.j41(0,"span"),e.EFF(1,"Save Permissions"),e.k0s())}let Ut=(()=>{class n{constructor(o,s,r){this.repoService=o,this.dialogRef=s,this.data=r,this.categories=[],this.permissions=[],this.rolePermissions=[],this.permissionAssignments={},this.displayedColumns=[],this.isSaving=!1,this.roleId=r.roleId}ngOnInit(){this.loadCategories(),this.loadPermissions(),this.loadRolePermissions()}loadCategories(){this.repoService.getData("api/categories").subscribe({next:o=>{this.categories=o,this.initializeAssignments()},error:o=>{console.error("Error loading categories:",o),alert("Failed to load categories")}})}loadPermissions(){this.repoService.getData("api/permissions").subscribe({next:o=>{const s=o;this.permissions=s,this.displayedColumns=["category",...s.map(r=>r.name??"")],this.initializeAssignments()},error:o=>{console.error("Error loading permissions:",o),alert("Failed to load permissions")}})}loadRolePermissions(){console.log("Role ID:",this.roleId),this.repoService.getData(`api/rolepermissions/role/${this.roleId}`).subscribe({next:o=>{this.rolePermissions=o,this.initializeAssignments()},error:o=>{console.error("Error loading role permissions:",o),alert("Failed to load role permissions")}})}initializeAssignments(){0===this.categories.length||0===this.permissions.length||(this.permissionAssignments={},this.categories.forEach(o=>{o.id&&(this.permissionAssignments[o.id]={}),this.permissions.forEach(s=>{const r=this.rolePermissions.some(i=>i.categoryId===o.id&&i.permissionId===s.id);o.id&&s.id&&(this.permissionAssignments[o.id][s.id]=r)})}))}savePermissions(){this.isSaving=!0;const o={roleId:this.roleId,categoryAssignments:[]};this.categories.forEach(s=>{const r=this.permissions.filter(i=>s.id&&i.id&&this.permissionAssignments[s.id][i.id]).map(i=>i.id);if(r.length>0&&s.id){const i={categoryId:s.id,permissionIds:r.filter(d=>!!d)};o.categoryAssignments.push(i)}}),this.repoService.create("api/rolepermissions/assign",o).subscribe({next:()=>{alert("Permissions assigned successfully"),this.isSaving=!1,this.dialogRef.close(!0)},error:s=>{console.error("Error assigning permissions:",s),this.isSaving=!1,alert("Failed to assign permissions")}})}closeModal(){this.dialogRef.close()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(S.CP),e.rXU(S.Vh))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-assign-permissions"]],decls:20,vars:7,consts:[[1,"modal-card"],[1,"header"],[1,"spacer"],[1,"content"],[1,"table-container"],["mat-table","",1,"permission-table",3,"dataSource"],["matColumnDef","category"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","permission-row",4,"matRowDef","matRowDefColumns"],[1,"actions"],["mat-flat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"category-name"],[3,"matColumnDef"],["color","primary","class","permission-checkbox",3,"ngModel","ngModelChange",4,"ngIf"],["color","primary",1,"permission-checkbox",3,"ngModelChange","ngModel"],["mat-header-row",""],["mat-row","",1,"permission-row"],["diameter","20"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),e.EFF(3,"Assign Permissions"),e.k0s(),e.nrm(4,"span",2),e.k0s(),e.j41(5,"mat-card-content",3)(6,"div",4)(7,"table",5),e.qex(8,6),e.DNE(9,yt,2,0,"th",7)(10,Ft,3,1,"td",8),e.bVm(),e.DNE(11,Dt,3,1,"ng-container",9)(12,It,1,0,"tr",10)(13,jt,1,0,"tr",11),e.k0s()(),e.j41(14,"div",12)(15,"button",13),e.bIt("click",function(){return r.closeModal()}),e.EFF(16,"Cancel"),e.k0s(),e.j41(17,"button",14),e.bIt("click",function(){return r.savePermissions()}),e.DNE(18,$t,1,0,"mat-spinner",15)(19,At,2,0,"span",16),e.k0s()()()()),2&s&&(e.R7$(7),e.Y8G("dataSource",r.categories),e.R7$(4),e.Y8G("ngForOf",r.permissions),e.R7$(),e.Y8G("matHeaderRowDef",r.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",r.displayedColumns),e.R7$(4),e.Y8G("disabled",r.isSaving),e.R7$(),e.Y8G("ngIf",r.isSaving),e.R7$(),e.Y8G("ngIf",!r.isSaving))},dependencies:[A.Sq,A.bT,te.So,p.RN,p.m2,p.MM,p.dh,R.$z,wt.LG,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,l.BC,l.vS],styles:[".modal-card[_ngcontent-%COMP%]{width:700px;max-height:80vh;border-radius:8px;box-shadow:0 4px 12px #00000026}.header[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-bottom:1px solid #e0e0e0}.header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;color:#333}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.content[_ngcontent-%COMP%]{padding:24px;overflow-y:auto}.table-container[_ngcontent-%COMP%]{margin-bottom:24px;max-height:400px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:4px}.permission-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.permission-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .permission-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:center;border-bottom:1px solid #e0e0e0}.permission-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#555;position:sticky;top:0;z-index:1}.permission-row[_ngcontent-%COMP%]:hover{background-color:#f9f9f9;cursor:pointer}.category-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.permission-checkbox[_ngcontent-%COMP%]{transition:transform .2s ease}.permission-checkbox[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border-radius:4px}.actions[_ngcontent-%COMP%]   button[mat-flat-button][_ngcontent-%COMP%]{font-weight:500}.actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.actions[_ngcontent-%COMP%]   button[color=primary][_ngcontent-%COMP%]:disabled{background-color:#ccc}mat-spinner[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-right:8px}"]})}return n})();function xt(n,t){1&n&&(e.j41(0,"th",15),e.EFF(1," Action "),e.k0s())}function Pt(n,t){if(1&n){const o=e.RV6();e.j41(0,"td",16)(1,"button",17),e.EFF(2," Action "),e.j41(3,"mat-icon"),e.EFF(4,"arrow_drop_down"),e.k0s()(),e.j41(5,"mat-menu",18,0)(7,"button",19),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.updateRole(r.id))}),e.EFF(8," Edit "),e.k0s(),e.j41(9,"button",19),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.assignPermissions(r.id))}),e.EFF(10," Assign Permissions "),e.k0s(),e.j41(11,"button",19),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.deleteRole(r.id))}),e.EFF(12," Delete "),e.k0s()()()}if(2&n){const o=e.sdS(6);e.R7$(),e.Y8G("matMenuTriggerFor",o)}}function Nt(n,t){1&n&&(e.j41(0,"th",15),e.EFF(1," Role Name "),e.k0s())}function Mt(n,t){if(1&n&&(e.j41(0,"td",16),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.name," ")}}function Bt(n,t){1&n&&(e.j41(0,"th",15),e.EFF(1," Creation time "),e.k0s())}function Lt(n,t){if(1&n&&(e.j41(0,"td",16),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,o.dateCreated,"medium")," ")}}function Gt(n,t){1&n&&e.nrm(0,"tr",20)}function Xt(n,t){1&n&&e.nrm(0,"tr",21)}let Ht=(()=>{class n{constructor(o,s,r,i,d){this.repoService=o,this.dialog=s,this.toastr=r,this.dataService=i,this.dialogserve=d,this.displayedColumns=["action","role","date"],this.dataSource=new h.I6,this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getRoles()})}ngOnInit(){this.getRoles()}getRoles(){this.repoService.getData("api/roles").subscribe({next:o=>{this.dataSource.data=o},error:o=>{console.error("Error loading roles:",o),this.toastr.error("Failed to load roles")}})}addRole(){this.dialog.open(St,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}updateRole(o){this.dialog.open(vt,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:o}})}assignPermissions(o){this.dialog.open(Ut,{width:"700px",maxHeight:"80vh",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{roleId:o}}).afterClosed().subscribe(r=>{r&&this.getRoles()})}deleteRole(o){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the role?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/roles/${o}`).subscribe({next:()=>{this.dialogserve.openSuccessDialog("The role has been deleted successfully.").afterClosed().subscribe(()=>{this.getRoles()})},error:i=>{console.error("Error deleting role:",i),this.toastr.error("Failed to delete role")}})})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(S.bZ),e.rXU(j.tw),e.rXU($),e.rXU(I.o))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-roles"]],decls:23,vars:3,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,r){1&s&&(e.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),e.EFF(3,"User roles"),e.k0s(),e.nrm(4,"span",3),e.j41(5,"button",4),e.bIt("click",function(){return r.addRole()}),e.j41(6,"mat-icon"),e.EFF(7,"add"),e.k0s(),e.EFF(8,"Create new role "),e.k0s()(),e.j41(9,"mat-card-content",5)(10,"div",6)(11,"table",7),e.qex(12,8),e.DNE(13,xt,2,0,"th",9)(14,Pt,13,1,"td",10),e.bVm(),e.qex(15,11),e.DNE(16,Nt,2,0,"th",9)(17,Mt,2,1,"td",10),e.bVm(),e.qex(18,12),e.DNE(19,Bt,2,0,"th",9)(20,Lt,3,4,"td",10),e.bVm(),e.DNE(21,Gt,1,0,"tr",13)(22,Xt,1,0,"tr",14),e.k0s()()()()),2&s&&(e.R7$(11),e.Y8G("dataSource",r.dataSource),e.R7$(10),e.Y8G("matHeaderRowDef",r.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",r.displayedColumns))},dependencies:[U.kk,U.fb,U.Cp,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,A.vh],encapsulation:2})}return n})();const Ot=()=>[4,6,10,20];function Vt(n,t){1&n&&(e.j41(0,"th",18),e.EFF(1," Entity "),e.k0s())}function Yt(n,t){if(1&n&&(e.j41(0,"td",19),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.entityName," ")}}function Wt(n,t){1&n&&(e.j41(0,"th",20),e.EFF(1," Action "),e.k0s())}function Jt(n,t){if(1&n&&(e.j41(0,"td",19),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.action," ")}}function qt(n,t){1&n&&(e.j41(0,"th",18),e.EFF(1," Creation time "),e.k0s())}function zt(n,t){if(1&n&&(e.j41(0,"td",19),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",e.i5U(2,1,o.timestamp,"medium")," ")}}function Zt(n,t){1&n&&(e.j41(0,"th",20),e.EFF(1," Changes "),e.k0s())}function Kt(n,t){if(1&n&&(e.j41(0,"td",19),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.changes," ")}}function Qt(n,t){1&n&&e.nrm(0,"tr",21)}function eo(n,t){1&n&&e.nrm(0,"tr",22)}let to=(()=>{class n{constructor(o){this.repoService=o,this.displayedColumns=["name","action","date","change"],this.dataSource=new h.I6}ngOnInit(){this.getRoles()}getRoles(){this.repoService.getData("api/audits").subscribe(o=>{this.dataSource.data=o},o=>{console.log(o)})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}refresh(){this.getRoles()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-audits"]],viewQuery:function(s,r){if(1&s&&(e.GBs(O.iy,5),e.GBs(B.B4,5)),2&s){let i;e.mGM(i=e.lsd())&&(r.paginator=i.first),e.mGM(i=e.lsd())&&(r.sort=i.first)}},decls:28,vars:6,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","accent","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["fxHide.xs",""],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["matColumnDef","date"],["matColumnDef","change"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-header-row",""],["mat-row",""]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Audit logs"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.refresh()}),e.j41(6,"span",4),e.EFF(7,"Refresh"),e.k0s(),e.j41(8,"mat-icon"),e.EFF(9,"refresh"),e.k0s()()(),e.j41(10,"mat-card-content",5)(11,"div",6)(12,"table",7),e.qex(13,8),e.DNE(14,Vt,2,0,"th",9)(15,Yt,2,1,"td",10),e.bVm(),e.qex(16,11),e.DNE(17,Wt,2,0,"th",12)(18,Jt,2,1,"td",10),e.bVm(),e.qex(19,13),e.DNE(20,qt,2,0,"th",9)(21,zt,3,4,"td",10),e.bVm(),e.qex(22,14),e.DNE(23,Zt,2,0,"th",12)(24,Kt,2,1,"td",10),e.bVm(),e.DNE(25,Qt,1,0,"tr",15)(26,eo,1,0,"tr",16),e.k0s()(),e.nrm(27,"mat-paginator",17),e.k0s()()),2&s&&(e.R7$(12),e.Y8G("dataSource",r.dataSource),e.R7$(13),e.Y8G("matHeaderRowDef",r.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",r.displayedColumns),e.R7$(),e.Y8G("pageSize",4)("pageSizeOptions",e.lJ4(5,Ot)))},dependencies:[p.RN,p.m2,p.MM,p.dh,R.$z,T.An,O.iy,B.B4,B.aE,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,Z.Om,A.vh],encapsulation:2})}return n})(),oo=(()=>{class n{constructor(o,s,r,i,d,c){this.repoService=o,this.toastr=s,this.dataService=r,this.dialogserve=i,this.data=d,this.Ref=c,this.validateControl=a=>this.dataForm?.get(a)?.invalid&&this.dataForm?.get(a)?.touched,this.hasError=(a,u)=>this.dataForm?.get(a)?.hasError(u),this.createData=a=>{this.dataForm.valid&&this.executeDataCreation(a)},this.executeDataCreation=a=>{this.repoService.create(`api/customers/${this.result.id}/accounts`,{accountType:a.accountType}).subscribe(v=>{this.dialogserve.openSuccessDialog("The account has been added successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},v=>{this.toastr.error(v)})}}ngOnInit(){this.dataForm=new l.gE({accountType:new l.MJ("",[l.k0.required,l.k0.maxLength(60)])}),this.result=this.data}closeModal(){this.Ref.close([])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(j.tw),e.rXU($),e.rXU(I.o),e.rXU(S.Vh),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-add-account"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","accountType"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Create Account"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.closeModal()}),e.j41(6,"mat-icon",4),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",5)(9,"form",6),e.bIt("ngSubmit",function(){return r.createData(r.dataForm.value)}),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Account type"),e.k0s(),e.nrm(13,"input",8),e.k0s(),e.j41(14,"button",9),e.EFF(15," Save "),e.k0s()()()()),2&s&&(e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(5),e.Y8G("disabled",!r.dataForm.valid))},dependencies:[k.rl,k.nJ,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})();var G=b(2608);function no(n,t){if(1&n){const o=e.RV6();e.j41(0,"div",13)(1,"mat-card",7)(2,"mat-card-header")(3,"mat-card-title"),e.EFF(4),e.k0s()(),e.j41(5,"mat-card-content",4)(6,"mat-list")(7,"mat-list-item")(8,"span",8),e.EFF(9,"Created"),e.k0s(),e.j41(10,"span",9),e.EFF(11),e.nI1(12,"date"),e.k0s()()(),e.j41(13,"button",14),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.DeleteCustomer(r.id))}),e.EFF(14," Delete "),e.k0s()()()()}if(2&n){const o=t.$implicit;e.R7$(4),e.SpI("Account: ",o.accountType,""),e.R7$(7),e.JRh(e.i5U(12,2,o.dateCreated,"medium"))}}let so=(()=>{class n{constructor(o,s,r,i,d){this.repoService=o,this.router=s,this.dialog=r,this.dialogserve=i,this.activeRoute=d}ngOnInit(){this.getCustomer(),this.getCustomerAccount()}getCustomer(){this.repoService.getData(`api/customers/${this.activeRoute.snapshot.params.id}`).subscribe(s=>{this.customer=s},s=>{this.dialogserve.openErrorDialog(s).afterClosed().subscribe(r=>{this.router.navigate(["/ui-components/lists"])})})}getCustomerAccount(){this.repoService.getData(`api/customers/${this.activeRoute.snapshot.params.id}/accounts`).subscribe(s=>{this.accounts=s},s=>{})}addAccount(o){this.dialog.open(oo,{width:"500px",height:"270px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:o}})}DeleteCustomer(o){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the account ?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/customers/${this.activeRoute.snapshot.params.id}/accounts/${o}`).subscribe(d=>{this.getCustomer()})})}close(){this.router.navigate(["/ui-components/lists"])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(z.Ix),e.rXU(S.bZ),e.rXU(I.o),e.rXU(z.nX))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-details"]],decls:60,vars:9,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"row"],[1,"col-lg-6"],[1,"b-1","shadow-none"],["matListItemTitle","",1,"f-s-16","f-w-600"],["matListItemLine","",1,"mat-body-1"],[1,"col-12"],["fxHide.xs",""],["class","col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-sm-6","col-lg-4"],["mat-flat-button","","color","warn",1,"m-t-8",3,"click"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Customer details"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.close()}),e.j41(6,"mat-icon"),e.EFF(7,"close"),e.k0s(),e.EFF(8," Close "),e.k0s()(),e.j41(9,"mat-card-content",4)(10,"div",5)(11,"div",6)(12,"mat-card",7)(13,"mat-card-header")(14,"mat-card-title"),e.EFF(15,"Basic information"),e.k0s()(),e.j41(16,"mat-card-content",4)(17,"mat-list")(18,"mat-list-item")(19,"span",8),e.EFF(20,"Full Name"),e.k0s(),e.j41(21,"span",9),e.EFF(22),e.k0s()(),e.j41(23,"mat-list-item")(24,"span",8),e.EFF(25,"Date of birth"),e.k0s(),e.j41(26,"span",9),e.EFF(27),e.nI1(28,"date"),e.k0s()()()()()(),e.j41(29,"div",6)(30,"mat-card",7)(31,"mat-card-header")(32,"mat-card-title"),e.EFF(33,"Address"),e.k0s()(),e.j41(34,"mat-card-content",4)(35,"mat-list")(36,"mat-list-item")(37,"span",8),e.EFF(38,"Resident address"),e.k0s(),e.j41(39,"span",9),e.EFF(40),e.k0s()(),e.j41(41,"mat-list-item")(42,"span",8),e.EFF(43,"Country"),e.k0s(),e.j41(44,"span",9),e.EFF(45),e.k0s()()()()()(),e.j41(46,"div",10)(47,"mat-card",7)(48,"mat-card-header")(49,"mat-card-title"),e.EFF(50),e.k0s(),e.nrm(51,"span",2),e.j41(52,"button",3),e.bIt("click",function(){return r.addAccount(r.customer.id)}),e.j41(53,"mat-icon"),e.EFF(54,"add"),e.k0s(),e.j41(55,"span",11),e.EFF(56,"Create new account "),e.k0s()()(),e.j41(57,"mat-card-content",4)(58,"div",5),e.DNE(59,no,15,5,"div",12),e.k0s()()()()()()()),2&s&&(e.R7$(22),e.Lme("",null==r.customer?null:r.customer.firstName," ",null==r.customer?null:r.customer.lastName,""),e.R7$(5),e.JRh(e.bMT(28,7,null==r.customer?null:r.customer.dateOfBirth)),e.R7$(13),e.JRh(null==r.customer?null:r.customer.address),e.R7$(5),e.JRh(null==r.customer?null:r.customer.country),e.R7$(5),e.SpI("Accounts (",null==r.customer?null:r.customer.accountCount,")"),e.R7$(9),e.Y8G("ngForOf",r.accounts))},dependencies:[A.Sq,p.RN,p.m2,p.MM,p.dh,G.jt,G.YE,G.C_,G.yE,R.$z,T.An,Z.Om,A.vh],encapsulation:2})}return n})();const ro=[0,2e3,1e4,3e4,null];class le{constructor(t){this._retryDelays=void 0!==t?[...t,null]:ro}nextRetryDelayInMilliseconds(t){return this._retryDelays[t.previousRetryCount]}}let W=(()=>{class n{}return n.Authorization="Authorization",n.Cookie="Cookie",n})();class de{constructor(t,o,s){this.statusCode=t,this.statusText=o,this.content=s}}class K{get(t,o){return this.send({...o,method:"GET",url:t})}post(t,o){return this.send({...o,method:"POST",url:t})}delete(t,o){return this.send({...o,method:"DELETE",url:t})}getCookieString(t){return""}}class io extends K{constructor(t,o){super(),this._innerClient=t,this._accessTokenFactory=o}send(t){var o=this;return(0,C.A)(function*(){let s=!0;o._accessTokenFactory&&(!o._accessToken||t.url&&t.url.indexOf("/negotiate?")>0)&&(s=!1,o._accessToken=yield o._accessTokenFactory()),o._setAuthorizationHeader(t);const r=yield o._innerClient.send(t);return s&&401===r.statusCode&&o._accessTokenFactory?(o._accessToken=yield o._accessTokenFactory(),o._setAuthorizationHeader(t),yield o._innerClient.send(t)):r})()}_setAuthorizationHeader(t){t.headers||(t.headers={}),this._accessToken?t.headers[W.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&t.headers[W.Authorization]&&delete t.headers[W.Authorization]}getCookieString(t){return this._innerClient.getCookieString(t)}}class X extends Error{constructor(t,o){const s=new.target.prototype;super(`${t}: Status code '${o}'`),this.statusCode=o,this.__proto__=s}}class oe extends Error{constructor(t="A timeout occurred."){const o=new.target.prototype;super(t),this.__proto__=o}}class M extends Error{constructor(t="An abort occurred."){const o=new.target.prototype;super(t),this.__proto__=o}}class ao extends Error{constructor(t,o){const s=new.target.prototype;super(t),this.transport=o,this.errorType="UnsupportedTransportError",this.__proto__=s}}class co extends Error{constructor(t,o){const s=new.target.prototype;super(t),this.transport=o,this.errorType="DisabledTransportError",this.__proto__=s}}class lo extends Error{constructor(t,o){const s=new.target.prototype;super(t),this.transport=o,this.errorType="FailedToStartTransportError",this.__proto__=s}}class me extends Error{constructor(t){const o=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=o}}class mo extends Error{constructor(t,o){const s=new.target.prototype;super(t),this.innerErrors=o,this.__proto__=s}}var m=function(n){return n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Information=2]="Information",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.None=6]="None",n}(m||{});class J{constructor(){}log(t,o){}}J.instance=new J;const uo="8.0.7";class F{static isRequired(t,o){if(null==t)throw new Error(`The '${o}' argument is required.`)}static isNotEmpty(t,o){if(!t||t.match(/^\s*$/))throw new Error(`The '${o}' argument should not be empty.`)}static isIn(t,o,s){if(!(t in o))throw new Error(`Unknown ${s} value: ${t}.`)}}class w{static get isBrowser(){return!w.isNode&&"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return!w.isNode&&"object"==typeof self&&"importScripts"in self}static get isReactNative(){return!w.isNode&&"object"==typeof window&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&"node"===process.release.name}}function q(n,t){let o="";return H(n)?(o=`Binary data of length ${n.byteLength}`,t&&(o+=`. Content: '${function ho(n){const t=new Uint8Array(n);let o="";return t.forEach(s=>{o+=`0x${s<16?"0":""}${s.toString(16)} `}),o.substr(0,o.length-1)}(n)}'`)):"string"==typeof n&&(o=`String data of length ${n.length}`,t&&(o+=`. Content: '${n}'`)),o}function H(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name)}function ue(n,t,o,s,r,i){return ne.apply(this,arguments)}function ne(){return(ne=(0,C.A)(function*(n,t,o,s,r,i){const d={},[c,a]=Y();d[c]=a,n.log(m.Trace,`(${t} transport) sending data. ${q(r,i.logMessageContent)}.`);const u=H(r)?"arraybuffer":"text",f=yield o.post(s,{content:r,headers:{...d,...i.headers},responseType:u,timeout:i.timeout,withCredentials:i.withCredentials});n.log(m.Trace,`(${t} transport) request complete. Response status: ${f.statusCode}.`)})).apply(this,arguments)}class fo{constructor(t,o){this._subject=t,this._observer=o}dispose(){const t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(o=>{})}}class Q{constructor(t){this._minLevel=t,this.out=console}log(t,o){if(t>=this._minLevel){const s=`[${(new Date).toISOString()}] ${m[t]}: ${o}`;switch(t){case m.Critical:case m.Error:this.out.error(s);break;case m.Warning:this.out.warn(s);break;case m.Information:this.out.info(s);break;default:this.out.log(s)}}}}function Y(){let n="X-SignalR-User-Agent";return w.isNode&&(n="User-Agent"),[n,go(uo,_o(),w.isNode?"NodeJS":"Browser",bo())]}function go(n,t,o,s){let r="Microsoft SignalR/";const i=n.split(".");return r+=`${i[0]}.${i[1]}`,r+=` (${n}; `,r+=t&&""!==t?`${t}; `:"Unknown OS; ",r+=`${o}`,r+=s?`; ${s}`:"; Unknown Runtime Version",r+=")",r}function _o(){if(!w.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function bo(){if(w.isNode)return process.versions.node}function se(n){return n.stack?n.stack:n.message?n.message:`${n}`}class vo extends K{constructor(t){if(super(),this._logger=t,typeof fetch>"u"||w.isNode){const o=require;this._jar=new(o("tough-cookie").CookieJar),this._fetchType=typeof fetch>"u"?o("node-fetch"):fetch,this._fetchType=o("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function ko(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}());if(typeof AbortController>"u"){const o=require;this._abortControllerType=o("abort-controller")}else this._abortControllerType=AbortController}send(t){var o=this;return(0,C.A)(function*(){if(t.abortSignal&&t.abortSignal.aborted)throw new M;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");const s=new o._abortControllerType;let r;t.abortSignal&&(t.abortSignal.onabort=()=>{s.abort(),r=new M});let d,i=null;t.timeout&&(i=setTimeout(()=>{s.abort(),o._logger.log(m.Warning,"Timeout from HTTP request."),r=new oe},t.timeout)),""===t.content&&(t.content=void 0),t.content&&(t.headers=t.headers||{},t.headers["Content-Type"]=H(t.content)?"application/octet-stream":"text/plain;charset=UTF-8");try{d=yield o._fetchType(t.url,{body:t.content,cache:"no-cache",credentials:!0===t.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...t.headers},method:t.method,mode:"cors",redirect:"follow",signal:s.signal})}catch(u){throw r||(o._logger.log(m.Warning,`Error from HTTP request. ${u}.`),u)}finally{i&&clearTimeout(i),t.abortSignal&&(t.abortSignal.onabort=null)}if(!d.ok){const u=yield he(d,"text");throw new X(u||d.statusText,d.status)}const a=yield he(d,t.responseType);return new de(d.status,d.statusText,a)})()}getCookieString(t){let o="";return w.isNode&&this._jar&&this._jar.getCookies(t,(s,r)=>o=r.join("; ")),o}}function he(n,t){let o;switch(t){case"arraybuffer":o=n.arrayBuffer();break;case"text":default:o=n.text();break;case"blob":case"document":case"json":throw new Error(`${t} is not supported.`)}return o}class So extends K{constructor(t){super(),this._logger=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new M):t.method?t.url?new Promise((o,s)=>{const r=new XMLHttpRequest;r.open(t.method,t.url,!0),r.withCredentials=void 0===t.withCredentials||t.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===t.content&&(t.content=void 0),t.content&&(H(t.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const i=t.headers;i&&Object.keys(i).forEach(d=>{r.setRequestHeader(d,i[d])}),t.responseType&&(r.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{r.abort(),s(new M)}),t.timeout&&(r.timeout=t.timeout),r.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),r.status>=200&&r.status<300?o(new de(r.status,r.statusText,r.response||r.responseText)):s(new X(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(m.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),s(new X(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(m.Warning,"Timeout from HTTP request."),s(new oe)},r.send(t.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class wo extends K{constructor(t){if(super(),typeof fetch<"u"||w.isNode)this._httpClient=new vo(t);else{if(!(typeof XMLHttpRequest<"u"))throw new Error("No usable HttpClient found.");this._httpClient=new So(t)}}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new M):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this._httpClient.getCookieString(t)}}var D=function(n){return n[n.None=0]="None",n[n.WebSockets=1]="WebSockets",n[n.ServerSentEvents=2]="ServerSentEvents",n[n.LongPolling=4]="LongPolling",n}(D||{}),x=function(n){return n[n.Text=1]="Text",n[n.Binary=2]="Binary",n}(x||{});class yo{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}class pe{get pollAborted(){return this._pollAbort.aborted}constructor(t,o,s){this._httpClient=t,this._logger=o,this._pollAbort=new yo,this._options=s,this._running=!1,this.onreceive=null,this.onclose=null}connect(t,o){var s=this;return(0,C.A)(function*(){if(F.isRequired(t,"url"),F.isRequired(o,"transferFormat"),F.isIn(o,x,"transferFormat"),s._url=t,s._logger.log(m.Trace,"(LongPolling transport) Connecting."),o===x.Binary&&typeof XMLHttpRequest<"u"&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[r,i]=Y(),d={[r]:i,...s._options.headers},c={abortSignal:s._pollAbort.signal,headers:d,timeout:1e5,withCredentials:s._options.withCredentials};o===x.Binary&&(c.responseType="arraybuffer");const a=`${t}&_=${Date.now()}`;s._logger.log(m.Trace,`(LongPolling transport) polling: ${a}.`);const u=yield s._httpClient.get(a,c);200!==u.statusCode?(s._logger.log(m.Error,`(LongPolling transport) Unexpected response code: ${u.statusCode}.`),s._closeError=new X(u.statusText||"",u.statusCode),s._running=!1):s._running=!0,s._receiving=s._poll(s._url,c)})()}_poll(t,o){var s=this;return(0,C.A)(function*(){try{for(;s._running;)try{const r=`${t}&_=${Date.now()}`;s._logger.log(m.Trace,`(LongPolling transport) polling: ${r}.`);const i=yield s._httpClient.get(r,o);204===i.statusCode?(s._logger.log(m.Information,"(LongPolling transport) Poll terminated by server."),s._running=!1):200!==i.statusCode?(s._logger.log(m.Error,`(LongPolling transport) Unexpected response code: ${i.statusCode}.`),s._closeError=new X(i.statusText||"",i.statusCode),s._running=!1):i.content?(s._logger.log(m.Trace,`(LongPolling transport) data received. ${q(i.content,s._options.logMessageContent)}.`),s.onreceive&&s.onreceive(i.content)):s._logger.log(m.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(r){s._running?r instanceof oe?s._logger.log(m.Trace,"(LongPolling transport) Poll timed out, reissuing."):(s._closeError=r,s._running=!1):s._logger.log(m.Trace,`(LongPolling transport) Poll errored after shutdown: ${r.message}`)}}finally{s._logger.log(m.Trace,"(LongPolling transport) Polling complete."),s.pollAborted||s._raiseOnClose()}})()}send(t){var o=this;return(0,C.A)(function*(){return o._running?ue(o._logger,"LongPolling",o._httpClient,o._url,t,o._options):Promise.reject(new Error("Cannot send until the transport is connected"))})()}stop(){var t=this;return(0,C.A)(function*(){t._logger.log(m.Trace,"(LongPolling transport) Stopping polling."),t._running=!1,t._pollAbort.abort();try{yield t._receiving,t._logger.log(m.Trace,`(LongPolling transport) sending DELETE request to ${t._url}.`);const o={},[s,r]=Y();o[s]=r;const i={headers:{...o,...t._options.headers},timeout:t._options.timeout,withCredentials:t._options.withCredentials};let d;try{yield t._httpClient.delete(t._url,i)}catch(c){d=c}d?d instanceof X&&t._logger.log(m.Trace,404===d.statusCode?"(LongPolling transport) A 404 response was returned from sending a DELETE request.":`(LongPolling transport) Error sending a DELETE request: ${d}`):t._logger.log(m.Trace,"(LongPolling transport) DELETE request accepted.")}finally{t._logger.log(m.Trace,"(LongPolling transport) Stop finished."),t._raiseOnClose()}})()}_raiseOnClose(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(m.Trace,t),this.onclose(this._closeError)}}}class Fo{constructor(t,o,s,r){this._httpClient=t,this._accessToken=o,this._logger=s,this._options=r,this.onreceive=null,this.onclose=null}connect(t,o){var s=this;return(0,C.A)(function*(){return F.isRequired(t,"url"),F.isRequired(o,"transferFormat"),F.isIn(o,x,"transferFormat"),s._logger.log(m.Trace,"(SSE transport) Connecting."),s._url=t,s._accessToken&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(s._accessToken)}`),new Promise((r,i)=>{let c,d=!1;if(o===x.Text){if(w.isBrowser||w.isWebWorker)c=new s._options.EventSource(t,{withCredentials:s._options.withCredentials});else{const a=s._httpClient.getCookieString(t),u={};u.Cookie=a;const[f,g]=Y();u[f]=g,c=new s._options.EventSource(t,{withCredentials:s._options.withCredentials,headers:{...u,...s._options.headers}})}try{c.onmessage=a=>{if(s.onreceive)try{s._logger.log(m.Trace,`(SSE transport) data received. ${q(a.data,s._options.logMessageContent)}.`),s.onreceive(a.data)}catch(u){return void s._close(u)}},c.onerror=a=>{d?s._close():i(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},c.onopen=()=>{s._logger.log(m.Information,`SSE connected to ${s._url}`),s._eventSource=c,d=!0,r()}}catch(a){return void i(a)}}else i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})})()}send(t){var o=this;return(0,C.A)(function*(){return o._eventSource?ue(o._logger,"SSE",o._httpClient,o._url,t,o._options):Promise.reject(new Error("Cannot send until the transport is connected"))})()}stop(){return this._close(),Promise.resolve()}_close(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))}}class Eo{constructor(t,o,s,r,i,d){this._logger=s,this._accessTokenFactory=o,this._logMessageContent=r,this._webSocketConstructor=i,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=d}connect(t,o){var s=this;return(0,C.A)(function*(){let r;return F.isRequired(t,"url"),F.isRequired(o,"transferFormat"),F.isIn(o,x,"transferFormat"),s._logger.log(m.Trace,"(WebSockets transport) Connecting."),s._accessTokenFactory&&(r=yield s._accessTokenFactory()),new Promise((i,d)=>{let c;t=t.replace(/^http/,"ws");const a=s._httpClient.getCookieString(t);let u=!1;if(w.isNode||w.isReactNative){const f={},[g,v]=Y();f[g]=v,r&&(f[W.Authorization]=`Bearer ${r}`),a&&(f[W.Cookie]=a),c=new s._webSocketConstructor(t,void 0,{headers:{...f,...s._headers}})}else r&&(t+=(t.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(r)}`);c||(c=new s._webSocketConstructor(t)),o===x.Binary&&(c.binaryType="arraybuffer"),c.onopen=f=>{s._logger.log(m.Information,`WebSocket connected to ${t}.`),s._webSocket=c,u=!0,i()},c.onerror=f=>{let g=null;g=typeof ErrorEvent<"u"&&f instanceof ErrorEvent?f.error:"There was an error with the transport",s._logger.log(m.Information,`(WebSockets transport) ${g}.`)},c.onmessage=f=>{if(s._logger.log(m.Trace,`(WebSockets transport) data received. ${q(f.data,s._logMessageContent)}.`),s.onreceive)try{s.onreceive(f.data)}catch(g){return void s._close(g)}},c.onclose=f=>{if(u)s._close(f);else{let g=null;g=typeof ErrorEvent<"u"&&f instanceof ErrorEvent?f.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",d(new Error(g))}}})})()}send(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(m.Trace,`(WebSockets transport) sending data. ${q(t,this._logMessageContent)}.`),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(t){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(m.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(t)||!1!==t.wasClean&&1e3===t.code?t instanceof Error?this.onclose(t):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${t.code} (${t.reason||"no reason given"}).`)))}_isCloseEvent(t){return t&&"boolean"==typeof t.wasClean&&"number"==typeof t.code}}class Ro{constructor(t,o={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,F.isRequired(t,"url"),this._logger=function po(n){return void 0===n?new Q(m.Information):null===n?J.instance:void 0!==n.log?n:new Q(n)}(o.logger),this.baseUrl=this._resolveUrl(t),(o=o||{}).logMessageContent=void 0!==o.logMessageContent&&o.logMessageContent,"boolean"!=typeof o.withCredentials&&void 0!==o.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");o.withCredentials=void 0===o.withCredentials||o.withCredentials,o.timeout=void 0===o.timeout?1e5:o.timeout;let s=null,r=null;if(w.isNode){const i=require;s=i("ws"),r=i("eventsource")}!w.isNode&&typeof WebSocket<"u"&&!o.WebSocket?o.WebSocket=WebSocket:w.isNode&&!o.WebSocket&&s&&(o.WebSocket=s),!w.isNode&&typeof EventSource<"u"&&!o.EventSource?o.EventSource=EventSource:w.isNode&&!o.EventSource&&typeof r<"u"&&(o.EventSource=r),this._httpClient=new io(o.httpClient||new wo(this._logger),o.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=o,this.onreceive=null,this.onclose=null}start(t){var o=this;return(0,C.A)(function*(){if(F.isIn(t=t||x.Binary,x,"transferFormat"),o._logger.log(m.Debug,`Starting connection with transfer format '${x[t]}'.`),"Disconnected"!==o._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(o._connectionState="Connecting",o._startInternalPromise=o._startInternal(t),yield o._startInternalPromise,"Disconnecting"===o._connectionState){const s="Failed to start the HttpConnection before stop() was called.";return o._logger.log(m.Error,s),yield o._stopPromise,Promise.reject(new M(s))}if("Connected"!==o._connectionState){const s="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return o._logger.log(m.Error,s),Promise.reject(new M(s))}o._connectionStarted=!0})()}send(t){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new re(this.transport)),this._sendQueue.send(t))}stop(t){var o=this;return(0,C.A)(function*(){return"Disconnected"===o._connectionState?(o._logger.log(m.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===o._connectionState?(o._logger.log(m.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),o._stopPromise):(o._connectionState="Disconnecting",o._stopPromise=new Promise(s=>{o._stopPromiseResolver=s}),yield o._stopInternal(t),void(yield o._stopPromise))})()}_stopInternal(t){var o=this;return(0,C.A)(function*(){o._stopError=t;try{yield o._startInternalPromise}catch{}if(o.transport){try{yield o.transport.stop()}catch(s){o._logger.log(m.Error,`HttpConnection.transport.stop() threw error '${s}'.`),o._stopConnection()}o.transport=void 0}else o._logger.log(m.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})()}_startInternal(t){var o=this;return(0,C.A)(function*(){let s=o.baseUrl;o._accessTokenFactory=o._options.accessTokenFactory,o._httpClient._accessTokenFactory=o._accessTokenFactory;try{if(o._options.skipNegotiation){if(o._options.transport!==D.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");o.transport=o._constructTransport(D.WebSockets),yield o._startTransport(s,t)}else{let r=null,i=0;do{if(r=yield o._getNegotiationResponse(s),"Disconnecting"===o._connectionState||"Disconnected"===o._connectionState)throw new M("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(s=r.url),r.accessToken){const d=r.accessToken;o._accessTokenFactory=()=>d,o._httpClient._accessToken=d,o._httpClient._accessTokenFactory=void 0}i++}while(r.url&&i<100);if(100===i&&r.url)throw new Error("Negotiate redirection limit exceeded.");yield o._createTransport(s,o._options.transport,r,t)}o.transport instanceof pe&&(o.features.inherentKeepAlive=!0),"Connecting"===o._connectionState&&(o._logger.log(m.Debug,"The HttpConnection connected successfully."),o._connectionState="Connected")}catch(r){return o._logger.log(m.Error,"Failed to start the connection: "+r),o._connectionState="Disconnected",o.transport=void 0,o._stopPromiseResolver(),Promise.reject(r)}})()}_getNegotiationResponse(t){var o=this;return(0,C.A)(function*(){const s={},[r,i]=Y();s[r]=i;const d=o._resolveNegotiateUrl(t);o._logger.log(m.Debug,`Sending negotiation request: ${d}.`);try{const c=yield o._httpClient.post(d,{content:"",headers:{...s,...o._options.headers},timeout:o._options.timeout,withCredentials:o._options.withCredentials});if(200!==c.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${c.statusCode}'`));const a=JSON.parse(c.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a.useStatefulReconnect&&!0!==o._options._useStatefulReconnect?Promise.reject(new me("Client didn't negotiate Stateful Reconnect but the server did.")):a}catch(c){let a="Failed to complete negotiation with the server: "+c;return c instanceof X&&404===c.statusCode&&(a+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),o._logger.log(m.Error,a),Promise.reject(new me(a))}})()}_createConnectUrl(t,o){return o?t+(-1===t.indexOf("?")?"?":"&")+`id=${o}`:t}_createTransport(t,o,s,r){var i=this;return(0,C.A)(function*(){let d=i._createConnectUrl(t,s.connectionToken);if(i._isITransport(o))return i._logger.log(m.Debug,"Connection was provided an instance of ITransport, using that directly."),i.transport=o,yield i._startTransport(d,r),void(i.connectionId=s.connectionId);const c=[],a=s.availableTransports||[];let u=s;for(const f of a){const g=i._resolveTransportOrError(f,o,r,!0===u?.useStatefulReconnect);if(g instanceof Error)c.push(`${f.transport} failed:`),c.push(g);else if(i._isITransport(g)){if(i.transport=g,!u){try{u=yield i._getNegotiationResponse(t)}catch(v){return Promise.reject(v)}d=i._createConnectUrl(t,u.connectionToken)}try{return yield i._startTransport(d,r),void(i.connectionId=u.connectionId)}catch(v){if(i._logger.log(m.Error,`Failed to start the transport '${f.transport}': ${v}`),u=void 0,c.push(new lo(`${f.transport} failed: ${v}`,D[f.transport])),"Connecting"!==i._connectionState){const L="Failed to select transport before stop() was called.";return i._logger.log(m.Debug,L),Promise.reject(new M(L))}}}}return Promise.reject(c.length>0?new mo(`Unable to connect to the server with any of the available transports. ${c.join(" ")}`,c):new Error("None of the transports supported by the client are supported by the server."))})()}_constructTransport(t){switch(t){case D.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Eo(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case D.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Fo(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case D.LongPolling:return new pe(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${t}.`)}}_startTransport(t,o){var s=this;return this.transport.onreceive=this.onreceive,this.transport.onclose=this.features.reconnect?function(){var r=(0,C.A)(function*(i){let d=!1;if(s.features.reconnect){try{s.features.disconnected(),yield s.transport.connect(t,o),yield s.features.resend()}catch{d=!0}d&&s._stopConnection(i)}else s._stopConnection(i)});return function(i){return r.apply(this,arguments)}}():r=>this._stopConnection(r),this.transport.connect(t,o)}_resolveTransportOrError(t,o,s,r){const i=D[t.transport];if(null==i)return this._logger.log(m.Debug,`Skipping transport '${t.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${t.transport}' because it is not supported by this client.`);if(!function To(n,t){return!n||!!(t&n)}(o,i))return this._logger.log(m.Debug,`Skipping transport '${D[i]}' because it was disabled by the client.`),new co(`'${D[i]}' is disabled by the client.`,i);if(!(t.transferFormats.map(c=>x[c]).indexOf(s)>=0))return this._logger.log(m.Debug,`Skipping transport '${D[i]}' because it does not support the requested transfer format '${x[s]}'.`),new Error(`'${D[i]}' does not support ${x[s]}.`);if(i===D.WebSockets&&!this._options.WebSocket||i===D.ServerSentEvents&&!this._options.EventSource)return this._logger.log(m.Debug,`Skipping transport '${D[i]}' because it is not supported in your environment.'`),new ao(`'${D[i]}' is not supported in your environment.`,i);this._logger.log(m.Debug,`Selecting transport '${D[i]}'.`);try{return this.features.reconnect=i===D.WebSockets?r:void 0,this._constructTransport(i)}catch(c){return c}}_isITransport(t){return t&&"object"==typeof t&&"connect"in t}_stopConnection(t){if(this._logger.log(m.Debug,`HttpConnection.stopConnection(${t}) called while in state ${this._connectionState}.`),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(m.Warning,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${t}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),t?this._logger.log(m.Error,`Connection disconnected with error '${t}'.`):this._logger.log(m.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(o=>{this._logger.log(m.Error,`TransportSendQueue.stop() threw error '${o}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(o){this._logger.log(m.Error,`HttpConnection.onclose(${t}) threw error '${o}'.`)}}}else this._logger.log(m.Debug,`Call to HttpConnection.stopConnection(${t}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!w.isBrowser)throw new Error(`Cannot resolve '${t}'.`);const o=window.document.createElement("a");return o.href=t,this._logger.log(m.Information,`Normalizing '${t}' to '${o.href}'.`),o.href}_resolveNegotiateUrl(t){const o=new URL(t);o.pathname.endsWith("/")?o.pathname+="negotiate":o.pathname+="/negotiate";const s=new URLSearchParams(o.searchParams);return s.has("negotiateVersion")||s.append("negotiateVersion",this._negotiateVersion.toString()),s.has("useStatefulReconnect")?"true"===s.get("useStatefulReconnect")&&(this._options._useStatefulReconnect=!0):!0===this._options._useStatefulReconnect&&s.append("useStatefulReconnect","true"),o.search=s.toString(),o.toString()}}class re{constructor(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new ee,this._transportResult=new ee,this._sendLoopPromise=this._sendLoop()}send(t){return this._bufferData(t),this._transportResult||(this._transportResult=new ee),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof t}`);this._buffer.push(t),this._sendBufferedData.resolve()}_sendLoop(){var t=this;return(0,C.A)(function*(){for(;;){if(yield t._sendBufferedData.promise,!t._executing){t._transportResult&&t._transportResult.reject("Connection stopped.");break}t._sendBufferedData=new ee;const o=t._transportResult;t._transportResult=void 0;const s="string"==typeof t._buffer[0]?t._buffer.join(""):re._concatBuffers(t._buffer);t._buffer.length=0;try{yield t._transport.send(s),o.resolve()}catch(r){o.reject(r)}}})()}static _concatBuffers(t){const o=t.map(i=>i.byteLength).reduce((i,d)=>i+d),s=new Uint8Array(o);let r=0;for(const i of t)s.set(new Uint8Array(i),r),r+=i.byteLength;return s.buffer}}class ee{constructor(){this.promise=new Promise((t,o)=>[this._resolver,this._rejecter]=[t,o])}resolve(){this._resolver()}reject(t){this._rejecter(t)}}class N{static write(t){return`${t}${N.RecordSeparator}`}static parse(t){if(t[t.length-1]!==N.RecordSeparator)throw new Error("Message is incomplete.");const o=t.split(N.RecordSeparator);return o.pop(),o}}N.RecordSeparatorCode=30,N.RecordSeparator=String.fromCharCode(N.RecordSeparatorCode);class Do{writeHandshakeRequest(t){return N.write(JSON.stringify(t))}parseHandshakeResponse(t){let o,s;if(H(t)){const c=new Uint8Array(t),a=c.indexOf(N.RecordSeparatorCode);if(-1===a)throw new Error("Message is incomplete.");const u=a+1;o=String.fromCharCode.apply(null,Array.prototype.slice.call(c.slice(0,u))),s=c.byteLength>u?c.slice(u).buffer:null}else{const c=t,a=c.indexOf(N.RecordSeparator);if(-1===a)throw new Error("Message is incomplete.");const u=a+1;o=c.substring(0,u),s=c.length>u?c.substring(u):null}const r=N.parse(o),i=JSON.parse(r[0]);if(i.type)throw new Error("Expected a handshake response from the server.");return[s,i]}}var _=function(n){return n[n.Invocation=1]="Invocation",n[n.StreamItem=2]="StreamItem",n[n.Completion=3]="Completion",n[n.StreamInvocation=4]="StreamInvocation",n[n.CancelInvocation=5]="CancelInvocation",n[n.Ping=6]="Ping",n[n.Close=7]="Close",n[n.Ack=8]="Ack",n[n.Sequence=9]="Sequence",n}(_||{});class Io{constructor(){this.observers=[]}next(t){for(const o of this.observers)o.next(t)}error(t){for(const o of this.observers)o.error&&o.error(t)}complete(){for(const t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new fo(this,t)}}class jo{constructor(t,o,s){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=t,this._connection=o,this._bufferSize=s}_send(t){var o=this;return(0,C.A)(function*(){const s=o._protocol.writeMessage(t);let r=Promise.resolve();if(o._isInvocationMessage(t)){o._totalMessageCount++;let i=()=>{},d=()=>{};H(s)?o._bufferedByteCount+=s.byteLength:o._bufferedByteCount+=s.length,o._bufferedByteCount>=o._bufferSize&&(r=new Promise((c,a)=>{i=c,d=a})),o._messages.push(new $o(s,o._totalMessageCount,i,d))}try{o._reconnectInProgress||(yield o._connection.send(s))}catch{o._disconnected()}yield r})()}_ack(t){let o=-1;for(let s=0;s<this._messages.length;s++){const r=this._messages[s];if(r._id<=t.sequenceId)o=s,H(r._message)?this._bufferedByteCount-=r._message.byteLength:this._bufferedByteCount-=r._message.length,r._resolver();else{if(!(this._bufferedByteCount<this._bufferSize))break;r._resolver()}}-1!==o&&(this._messages=this._messages.slice(o+1))}_shouldProcessMessage(t){if(this._waitForSequenceMessage)return t.type===_.Sequence&&(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(t))return!0;const o=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,o<=this._latestReceivedSequenceId?(o===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=o,this._ackTimer(),!0)}_resetSequence(t){t.sequenceId>this._nextReceivingSequenceId?this._connection.stop(new Error("Sequence ID greater than amount of messages we've received.")):this._nextReceivingSequenceId=t.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){var t=this;return(0,C.A)(function*(){const o=0!==t._messages.length?t._messages[0]._id:t._totalMessageCount+1;yield t._connection.send(t._protocol.writeMessage({type:_.Sequence,sequenceId:o}));const s=t._messages;for(const r of s)yield t._connection.send(r._message);t._reconnectInProgress=!1})()}_dispose(t){t??(t=new Error("Unable to reconnect to server."));for(const o of this._messages)o._rejector(t)}_isInvocationMessage(t){switch(t.type){case _.Invocation:case _.StreamItem:case _.Completion:case _.StreamInvocation:case _.CancelInvocation:return!0;case _.Close:case _.Sequence:case _.Ping:case _.Ack:return!1}}_ackTimer(){var t=this;void 0===this._ackTimerHandle&&(this._ackTimerHandle=setTimeout((0,C.A)(function*(){try{t._reconnectInProgress||(yield t._connection.send(t._protocol.writeMessage({type:_.Ack,sequenceId:t._latestReceivedSequenceId})))}catch{}clearTimeout(t._ackTimerHandle),t._ackTimerHandle=void 0}),1e3))}}class $o{constructor(t,o,s,r){this._message=t,this._id=o,this._resolver=s,this._rejector=r}}var y=function(n){return n.Disconnected="Disconnected",n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Reconnecting="Reconnecting",n}(y||{});class ie{static create(t,o,s,r,i,d,c){return new ie(t,o,s,r,i,d,c)}constructor(t,o,s,r,i,d,c){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(m.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},F.isRequired(t,"connection"),F.isRequired(o,"logger"),F.isRequired(s,"protocol"),this.serverTimeoutInMilliseconds=i??3e4,this.keepAliveIntervalInMilliseconds=d??15e3,this._statefulReconnectBufferSize=c??1e5,this._logger=o,this._protocol=s,this.connection=t,this._reconnectPolicy=r,this._handshakeProtocol=new Do,this.connection.onreceive=a=>this._processIncomingData(a),this.connection.onclose=a=>this._connectionClosed(a),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=y.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:_.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this._connectionState!==y.Disconnected&&this._connectionState!==y.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){var t=this;return(0,C.A)(function*(){if(t._connectionState!==y.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));t._connectionState=y.Connecting,t._logger.log(m.Debug,"Starting HubConnection.");try{yield t._startInternal(),w.isBrowser&&window.document.addEventListener("freeze",t._freezeEventListener),t._connectionState=y.Connected,t._connectionStarted=!0,t._logger.log(m.Debug,"HubConnection connected successfully.")}catch(o){return t._connectionState=y.Disconnected,t._logger.log(m.Debug,`HubConnection failed to start successfully because of error '${o}'.`),Promise.reject(o)}})()}_startInternal(){var t=this;return(0,C.A)(function*(){t._stopDuringStartError=void 0,t._receivedHandshakeResponse=!1;const o=new Promise((s,r)=>{t._handshakeResolver=s,t._handshakeRejecter=r});yield t.connection.start(t._protocol.transferFormat);try{let s=t._protocol.version;t.connection.features.reconnect||(s=1);const r={protocol:t._protocol.name,version:s};if(t._logger.log(m.Debug,"Sending handshake request."),yield t._sendMessage(t._handshakeProtocol.writeHandshakeRequest(r)),t._logger.log(m.Information,`Using HubProtocol '${t._protocol.name}'.`),t._cleanupTimeout(),t._resetTimeoutPeriod(),t._resetKeepAliveInterval(),yield o,t._stopDuringStartError)throw t._stopDuringStartError;!!t.connection.features.reconnect&&(t._messageBuffer=new jo(t._protocol,t.connection,t._statefulReconnectBufferSize),t.connection.features.disconnected=t._messageBuffer._disconnected.bind(t._messageBuffer),t.connection.features.resend=()=>{if(t._messageBuffer)return t._messageBuffer._resend()}),t.connection.features.inherentKeepAlive||(yield t._sendMessage(t._cachedPingMessage))}catch(s){throw t._logger.log(m.Debug,`Hub handshake failed with error '${s}' during start(). Stopping HubConnection.`),t._cleanupTimeout(),t._cleanupPingTimer(),yield t.connection.stop(s),s}})()}stop(){var t=this;return(0,C.A)(function*(){const o=t._startPromise;t.connection.features.reconnect=!1,t._stopPromise=t._stopInternal(),yield t._stopPromise;try{yield o}catch{}})()}_stopInternal(t){if(this._connectionState===y.Disconnected)return this._logger.log(m.Debug,`Call to HubConnection.stop(${t}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===y.Disconnecting)return this._logger.log(m.Debug,`Call to HttpConnection.stop(${t}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const o=this._connectionState;return this._connectionState=y.Disconnecting,this._logger.log(m.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(m.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(o===y.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new M("The connection was stopped before the hub handshake could complete."),this.connection.stop(t))}_sendCloseMessage(){var t=this;return(0,C.A)(function*(){try{yield t._sendWithProtocol(t._createCloseMessage())}catch{}})()}stream(t,...o){const[s,r]=this._replaceStreamingParams(o),i=this._createStreamInvocation(t,o,r);let d;const c=new Io;return c.cancelCallback=()=>{const a=this._createCancelInvocation(i.invocationId);return delete this._callbacks[i.invocationId],d.then(()=>this._sendWithProtocol(a))},this._callbacks[i.invocationId]=(a,u)=>{u?c.error(u):a&&(a.type===_.Completion?a.error?c.error(new Error(a.error)):c.complete():c.next(a.item))},d=this._sendWithProtocol(i).catch(a=>{c.error(a),delete this._callbacks[i.invocationId]}),this._launchStreams(s,d),c}_sendMessage(t){return this._resetKeepAliveInterval(),this.connection.send(t)}_sendWithProtocol(t){return this._messageBuffer?this._messageBuffer._send(t):this._sendMessage(this._protocol.writeMessage(t))}send(t,...o){const[s,r]=this._replaceStreamingParams(o),i=this._sendWithProtocol(this._createInvocation(t,o,!0,r));return this._launchStreams(s,i),i}invoke(t,...o){const[s,r]=this._replaceStreamingParams(o),i=this._createInvocation(t,o,!1,r);return new Promise((c,a)=>{this._callbacks[i.invocationId]=(f,g)=>{g?a(g):f&&(f.type===_.Completion?f.error?a(new Error(f.error)):c(f.result):a(new Error(`Unexpected message type: ${f.type}`)))};const u=this._sendWithProtocol(i).catch(f=>{a(f),delete this._callbacks[i.invocationId]});this._launchStreams(s,u)})}on(t,o){!t||!o||(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),-1===this._methods[t].indexOf(o)&&this._methods[t].push(o))}off(t,o){if(!t)return;t=t.toLowerCase();const s=this._methods[t];if(s)if(o){const r=s.indexOf(o);-1!==r&&(s.splice(r,1),0===s.length&&delete this._methods[t])}else delete this._methods[t]}onclose(t){t&&this._closedCallbacks.push(t)}onreconnecting(t){t&&this._reconnectingCallbacks.push(t)}onreconnected(t){t&&this._reconnectedCallbacks.push(t)}_processIncomingData(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t){const o=this._protocol.parseMessages(t,this._logger);for(const s of o)if(!this._messageBuffer||this._messageBuffer._shouldProcessMessage(s))switch(s.type){case _.Invocation:this._invokeClientMethod(s).catch(r=>{this._logger.log(m.Error,`Invoke client method threw error: ${se(r)}`)});break;case _.StreamItem:case _.Completion:{const r=this._callbacks[s.invocationId];if(r){s.type===_.Completion&&delete this._callbacks[s.invocationId];try{r(s)}catch(i){this._logger.log(m.Error,`Stream callback threw error: ${se(i)}`)}}break}case _.Ping:break;case _.Close:{this._logger.log(m.Information,"Close message received from server.");const r=s.error?new Error("Server returned an error on close: "+s.error):void 0;!0===s.allowReconnect?this.connection.stop(r):this._stopPromise=this._stopInternal(r);break}case _.Ack:this._messageBuffer&&this._messageBuffer._ack(s);break;case _.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(s);break;default:this._logger.log(m.Warning,`Invalid message type: ${s.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(t){let o,s;try{[s,o]=this._handshakeProtocol.parseHandshakeResponse(t)}catch(r){const i="Error parsing handshake response: "+r;this._logger.log(m.Error,i);const d=new Error(i);throw this._handshakeRejecter(d),d}if(o.error){const r="Server returned handshake error: "+o.error;this._logger.log(m.Error,r);const i=new Error(r);throw this._handshakeRejecter(i),i}return this._logger.log(m.Debug,"Server handshake complete."),this._handshakeResolver(),s}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){var t=this;if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let o=this._nextKeepAlive-(new Date).getTime();o<0&&(o=0),this._pingServerHandle=setTimeout((0,C.A)(function*(){if(t._connectionState===y.Connected)try{yield t._sendMessage(t._cachedPingMessage)}catch{t._cleanupPingTimer()}}),o)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(t){var o=this;return(0,C.A)(function*(){const s=t.target.toLowerCase(),r=o._methods[s];if(!r)return o._logger.log(m.Warning,`No client method with the name '${s}' found.`),void(t.invocationId&&(o._logger.log(m.Warning,`No result given for '${s}' method and invocation ID '${t.invocationId}'.`),yield o._sendWithProtocol(o._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null))));const i=r.slice(),d=!!t.invocationId;let c,a,u;for(const f of i)try{const g=c;c=yield f.apply(o,t.arguments),d&&c&&g&&(o._logger.log(m.Error,`Multiple results provided for '${s}'. Sending error to server.`),u=o._createCompletionMessage(t.invocationId,"Client provided multiple results.",null)),a=void 0}catch(g){a=g,o._logger.log(m.Error,`A callback for the method '${s}' threw error '${g}'.`)}u?yield o._sendWithProtocol(u):d?(a?u=o._createCompletionMessage(t.invocationId,`${a}`,null):void 0!==c?u=o._createCompletionMessage(t.invocationId,null,c):(o._logger.log(m.Warning,`No result given for '${s}' method and invocation ID '${t.invocationId}'.`),u=o._createCompletionMessage(t.invocationId,"Client didn't provide a result.",null)),yield o._sendWithProtocol(u)):c&&o._logger.log(m.Error,`Result given for '${s}' method but server is not expecting a result.`)})()}_connectionClosed(t){this._logger.log(m.Debug,`HubConnection.connectionClosed(${t}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||t||new M("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===y.Disconnecting?this._completeClose(t):this._connectionState===y.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===y.Connected&&this._completeClose(t)}_completeClose(t){if(this._connectionStarted){this._connectionState=y.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(t??new Error("Connection closed.")),this._messageBuffer=void 0),w.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(o=>o.apply(this,[t]))}catch(o){this._logger.log(m.Error,`An onclose callback called with error '${t}' threw error '${o}'.`)}}}_reconnect(t){var o=this;return(0,C.A)(function*(){const s=Date.now();let r=0,i=void 0!==t?t:new Error("Attempting to reconnect due to a unknown error."),d=o._getNextRetryDelay(r++,0,i);if(null===d)return o._logger.log(m.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void o._completeClose(t);if(o._connectionState=y.Reconnecting,o._logger.log(m.Information,t?`Connection reconnecting because of error '${t}'.`:"Connection reconnecting."),0!==o._reconnectingCallbacks.length){try{o._reconnectingCallbacks.forEach(c=>c.apply(o,[t]))}catch(c){o._logger.log(m.Error,`An onreconnecting callback called with error '${t}' threw error '${c}'.`)}if(o._connectionState!==y.Reconnecting)return void o._logger.log(m.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==d;){if(o._logger.log(m.Information,`Reconnect attempt number ${r} will start in ${d} ms.`),yield new Promise(c=>{o._reconnectDelayHandle=setTimeout(c,d)}),o._reconnectDelayHandle=void 0,o._connectionState!==y.Reconnecting)return void o._logger.log(m.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(yield o._startInternal(),o._connectionState=y.Connected,o._logger.log(m.Information,"HubConnection reconnected successfully."),0!==o._reconnectedCallbacks.length)try{o._reconnectedCallbacks.forEach(c=>c.apply(o,[o.connection.connectionId]))}catch(c){o._logger.log(m.Error,`An onreconnected callback called with connectionId '${o.connection.connectionId}; threw error '${c}'.`)}return}catch(c){if(o._logger.log(m.Information,`Reconnect attempt failed because of error '${c}'.`),o._connectionState!==y.Reconnecting)return o._logger.log(m.Debug,`Connection moved to the '${o._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(o._connectionState===y.Disconnecting&&o._completeClose());i=c instanceof Error?c:new Error(c.toString()),d=o._getNextRetryDelay(r++,Date.now()-s,i)}}o._logger.log(m.Information,`Reconnect retries have been exhausted after ${Date.now()-s} ms and ${r} failed attempts. Connection disconnecting.`),o._completeClose()})()}_getNextRetryDelay(t,o,s){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:o,previousRetryCount:t,retryReason:s})}catch(r){return this._logger.log(m.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${t}, ${o}) threw error '${r}'.`),null}}_cancelCallbacksWithError(t){const o=this._callbacks;this._callbacks={},Object.keys(o).forEach(s=>{const r=o[s];try{r(null,t)}catch(i){this._logger.log(m.Error,`Stream 'error' callback called with '${t}' threw error: ${se(i)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(t,o,s,r){if(s)return 0!==r.length?{arguments:o,streamIds:r,target:t,type:_.Invocation}:{arguments:o,target:t,type:_.Invocation};{const i=this._invocationId;return this._invocationId++,0!==r.length?{arguments:o,invocationId:i.toString(),streamIds:r,target:t,type:_.Invocation}:{arguments:o,invocationId:i.toString(),target:t,type:_.Invocation}}}_launchStreams(t,o){if(0!==t.length){o||(o=Promise.resolve());for(const s in t)t[s].subscribe({complete:()=>{o=o.then(()=>this._sendWithProtocol(this._createCompletionMessage(s)))},error:r=>{let i;i=r instanceof Error?r.message:r&&r.toString?r.toString():"Unknown error",o=o.then(()=>this._sendWithProtocol(this._createCompletionMessage(s,i)))},next:r=>{o=o.then(()=>this._sendWithProtocol(this._createStreamItemMessage(s,r)))}})}}_replaceStreamingParams(t){const o=[],s=[];for(let r=0;r<t.length;r++){const i=t[r];if(this._isObservable(i)){const d=this._invocationId;this._invocationId++,o[d]=i,s.push(d.toString()),t.splice(r,1)}}return[o,s]}_isObservable(t){return t&&t.subscribe&&"function"==typeof t.subscribe}_createStreamInvocation(t,o,s){const r=this._invocationId;return this._invocationId++,0!==s.length?{arguments:o,invocationId:r.toString(),streamIds:s,target:t,type:_.StreamInvocation}:{arguments:o,invocationId:r.toString(),target:t,type:_.StreamInvocation}}_createCancelInvocation(t){return{invocationId:t,type:_.CancelInvocation}}_createStreamItemMessage(t,o){return{invocationId:t,item:o,type:_.StreamItem}}_createCompletionMessage(t,o,s){return o?{error:o,invocationId:t,type:_.Completion}:{invocationId:t,result:s,type:_.Completion}}_createCloseMessage(){return{type:_.Close}}}class No{constructor(){this.name="json",this.version=2,this.transferFormat=x.Text}parseMessages(t,o){if("string"!=typeof t)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];null===o&&(o=J.instance);const s=N.parse(t),r=[];for(const i of s){const d=JSON.parse(i);if("number"!=typeof d.type)throw new Error("Invalid payload.");switch(d.type){case _.Invocation:this._isInvocationMessage(d);break;case _.StreamItem:this._isStreamItemMessage(d);break;case _.Completion:this._isCompletionMessage(d);break;case _.Ping:case _.Close:break;case _.Ack:this._isAckMessage(d);break;case _.Sequence:this._isSequenceMessage(d);break;default:o.log(m.Information,"Unknown message type '"+d.type+"' ignored.");continue}r.push(d)}return r}writeMessage(t){return N.write(JSON.stringify(t))}_isInvocationMessage(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),void 0!==t.invocationId&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),void 0===t.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")}_isAckMessage(t){if("number"!=typeof t.sequenceId)throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(t){if("number"!=typeof t.sequenceId)throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(t,o){if("string"!=typeof t||""===t)throw new Error(o)}}const Mo={trace:m.Trace,debug:m.Debug,info:m.Information,information:m.Information,warn:m.Warning,warning:m.Warning,error:m.Error,critical:m.Critical,none:m.None};class Lo{configureLogging(t){if(F.isRequired(t,"logging"),function Go(n){return void 0!==n.log}(t))this.logger=t;else if("string"==typeof t){const o=function Bo(n){const t=Mo[n.toLowerCase()];if(typeof t<"u")return t;throw new Error(`Unknown log level: ${n}`)}(t);this.logger=new Q(o)}else this.logger=new Q(t);return this}withUrl(t,o){return F.isRequired(t,"url"),F.isNotEmpty(t,"url"),this.url=t,this.httpConnectionOptions="object"==typeof o?{...this.httpConnectionOptions,...o}:{...this.httpConnectionOptions,transport:o},this}withHubProtocol(t){return F.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return this.reconnectPolicy=t?Array.isArray(t)?new le(t):t:new le,this}withServerTimeout(t){return F.isRequired(t,"milliseconds"),this._serverTimeoutInMilliseconds=t,this}withKeepAliveInterval(t){return F.isRequired(t,"milliseconds"),this._keepAliveIntervalInMilliseconds=t,this}withStatefulReconnect(t){return void 0===this.httpConnectionOptions&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=t?.bufferSize,this}build(){const t=this.httpConnectionOptions||{};if(void 0===t.logger&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const o=new Ro(this.url,t);return ie.create(o,this.logger||J.instance,this.protocol||new No,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}var Xo=b(5312);let Ho=(()=>{class n{constructor(){this.dataReceived=new ce.B,this.dataReceived$=this.dataReceived.asObservable(),this.hubConnection=(new Lo).withUrl(`${Xo.c.apiUrl}/dataHub`,{accessTokenFactory:()=>localStorage.getItem("token")||"",withCredentials:!0}).configureLogging(m.Information).withAutomaticReconnect().build(),this.hubConnection.on("ReceiveData",o=>{console.log("Data received from SignalR:",o),this.dataReceived.next(o)}),this.hubConnection.onclose(o=>{console.error("SignalR connection closed:",o)})}startConnection(){return this.hubConnection.start().then(()=>{console.log("SignalR connection started")}).catch(o=>{throw console.error("Error while starting SignalR connection:",o),o})}stopConnection(){this.hubConnection.stop().then(()=>console.log("SignalR connection stopped")).catch(o=>console.error("Error while stopping SignalR connection:",o))}sendData(o){this.hubConnection.invoke("SendData",o).catch(s=>console.error("Error while sending data to SignalR hub:",s))}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Oo(n,t){1&n&&(e.j41(0,"th",15),e.EFF(1,"Name"),e.k0s())}function Vo(n,t){if(1&n&&(e.j41(0,"td",16),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.JRh(o.name)}}function Yo(n,t){1&n&&(e.j41(0,"th",15),e.EFF(1,"Value"),e.k0s())}function Wo(n,t){if(1&n&&(e.j41(0,"td",16),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.JRh(o.value)}}function Jo(n,t){1&n&&(e.j41(0,"th",15),e.EFF(1,"Status"),e.k0s())}function qo(n,t){if(1&n&&(e.j41(0,"td",16),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.JRh(o.status)}}function zo(n,t){1&n&&(e.j41(0,"th",15),e.EFF(1,"Timestamp"),e.k0s())}function Zo(n,t){if(1&n&&(e.j41(0,"td",16),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.JRh(e.i5U(2,1,o.timeStamp,"medium"))}}function Ko(n,t){1&n&&e.nrm(0,"tr",17)}function Qo(n,t){1&n&&e.nrm(0,"tr",18)}function en(n,t){if(1&n&&(e.j41(0,"div")(1,"table",6),e.qex(2,7),e.DNE(3,Oo,2,0,"th",8)(4,Vo,2,1,"td",9),e.bVm(),e.qex(5,10),e.DNE(6,Yo,2,0,"th",8)(7,Wo,2,1,"td",9),e.bVm(),e.qex(8,11),e.DNE(9,Jo,2,0,"th",8)(10,qo,2,1,"td",9),e.bVm(),e.qex(11,12),e.DNE(12,zo,2,0,"th",8)(13,Zo,3,4,"td",9),e.bVm(),e.DNE(14,Ko,1,0,"tr",13)(15,Qo,1,0,"tr",14),e.k0s()()),2&n){const o=e.XpG();e.R7$(),e.Y8G("dataSource",o.dataList),e.R7$(13),e.Y8G("matHeaderRowDef",o.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",o.displayedColumns)}}function tn(n,t){1&n&&(e.j41(0,"div")(1,"p"),e.EFF(2,"No data received yet."),e.k0s()())}let on=(()=>{class n{constructor(o){this.signalRService=o,this.dataList=[],this.displayedColumns=["name","value","status","timeStamp"]}ngOnInit(){this.dataSubscription=this.signalRService.dataReceived$.subscribe(o=>{this.dataList=o,console.log("New data received in AboutComponent:",o)})}ngOnDestroy(){this.dataSubscription&&this.dataSubscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(Ho))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-about"]],decls:27,vars:2,consts:[[1,"cardWithShadow"],[1,"mat-body-1"],["matListItemTitle","",1,"f-s-16","f-w-600"],["matListItemLine","",1,"mat-body-1"],[1,"data-section"],[4,"ngIf"],["mat-table","",1,"data-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["matColumnDef","status"],["matColumnDef","timeStamp"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-content")(2,"mat-card-title"),e.EFF(3,"Welcome to MatechCoding QuickStart"),e.k0s(),e.j41(4,"mat-card-subtitle",1),e.EFF(5," ASP.NET Core / Angular starting point project with SOLID Architecture, Advanced Authentication & Authorization, user and role management, and other useful services for Quick Application Development. "),e.k0s(),e.j41(6,"mat-list")(7,"mat-list-item")(8,"span",2),e.EFF(9,"This application consists of:"),e.k0s(),e.j41(10,"span",3),e.EFF(11,"Onion Architecture"),e.k0s(),e.j41(12,"span",3),e.EFF(13,"Database using Entity Framework Core"),e.k0s(),e.j41(14,"span",3),e.EFF(15,"Advanced Authentication/Authorization"),e.k0s(),e.j41(16,"span",3),e.EFF(17,"Real-time push notification system (with SignalR integration)"),e.k0s(),e.j41(18,"span",3),e.EFF(19,"Swagger integration"),e.k0s(),e.j41(20,"span",3),e.EFF(21,"Angular Material and TypeScript"),e.k0s()()(),e.j41(22,"div",4)(23,"h3"),e.EFF(24,"Real-time Data (via SignalR)"),e.k0s(),e.DNE(25,en,16,3,"div",5)(26,tn,3,0,"div",5),e.k0s()()()),2&s&&(e.R7$(25),e.Y8G("ngIf",r.dataList.length>0),e.R7$(),e.Y8G("ngIf",0===r.dataList.length))},dependencies:[A.bT,p.RN,p.m2,p.Lc,p.dh,G.jt,G.YE,G.C_,G.yE,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB,A.vh],encapsulation:2})}return n})(),nn=(()=>{class n{constructor(o,s,r,i,d,c){this.repoService=o,this.toastr=s,this.dataService=r,this.dialogserve=i,this.data=d,this.Ref=c,this.validateControl=a=>this.dataForm?.get(a)?.invalid&&this.dataForm?.get(a)?.touched,this.hasError=(a,u)=>this.dataForm?.get(a)?.hasError(u),this.createData=a=>{this.dataForm.valid&&this.executeDataCreation(a)},this.executeDataCreation=a=>{this.repoService.update(`api/categories/${this.result.id}`,{name:a.name}).subscribe(v=>{this.dialogserve.openSuccessDialog("The role has been updated successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},v=>{this.toastr.error(v),this.Ref.close([])})},this.getRoletoUpdate=()=>{const u=`api/categories/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:f=>{this.role={...f},this.dataForm.patchValue(this.role)},error:f=>{this.toastr.success(f)}})}}ngOnInit(){this.dataForm=new l.gE({name:new l.MJ("",[l.k0.required,l.k0.maxLength(60)])}),this.result=this.data,this.getRoletoUpdate()}closeModal(){this.Ref.close([])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(j.tw),e.rXU($),e.rXU(I.o),e.rXU(S.Vh),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-update-category"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Update role"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.closeModal()}),e.j41(6,"mat-icon",4),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",5)(9,"form",6),e.bIt("ngSubmit",function(){return r.createData(r.dataForm.value)}),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Role Name"),e.k0s(),e.nrm(13,"input",8),e.k0s(),e.j41(14,"button",9),e.EFF(15," Save "),e.k0s()()()()),2&s&&(e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(5),e.Y8G("disabled",!r.dataForm.valid))},dependencies:[k.rl,k.nJ,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})(),sn=(()=>{class n{constructor(o,s,r,i,d){this.repoService=o,this.toastr=s,this.dataService=r,this.dialogserve=i,this.Ref=d,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,a)=>this.dataForm?.get(c)?.hasError(a),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.repoService.create("api/categories",{name:c.name}).subscribe(f=>{this.dialogserve.openSuccessDialog("The role has been added successfully.").afterClosed().subscribe(g=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},f=>{this.toastr.error(f),this.Ref.close([])})}}ngOnInit(){this.dataForm=new l.gE({name:new l.MJ("",[l.k0.required,l.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(j.tw),e.rXU($),e.rXU(I.o),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-add-category"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Create role"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.closeModal()}),e.j41(6,"mat-icon",4),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",5)(9,"form",6),e.bIt("ngSubmit",function(){return r.createData(r.dataForm.value)}),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Role Name"),e.k0s(),e.nrm(13,"input",8),e.k0s(),e.j41(14,"button",9),e.EFF(15," Save "),e.k0s()()()()),2&s&&(e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(5),e.Y8G("disabled",!r.dataForm.valid))},dependencies:[k.rl,k.nJ,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})();function rn(n,t){1&n&&(e.j41(0,"th",14),e.EFF(1," Action "),e.k0s())}function an(n,t){if(1&n){const o=e.RV6();e.j41(0,"td",15)(1,"button",16),e.EFF(2," Action "),e.j41(3,"mat-icon"),e.EFF(4,"arrow_drop_down"),e.k0s()(),e.j41(5,"mat-menu",17,0)(7,"button",18),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.UpdateCategory(r.id))}),e.EFF(8," Edit "),e.k0s(),e.j41(9,"button",18),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.DeleteCategory(r.id))}),e.EFF(10," Delete "),e.k0s()()()}if(2&n){const o=e.sdS(6);e.R7$(),e.Y8G("matMenuTriggerFor",o)}}function cn(n,t){1&n&&(e.j41(0,"th",14),e.EFF(1," Category Name "),e.k0s())}function ln(n,t){if(1&n&&(e.j41(0,"td",15),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.name," ")}}function dn(n,t){1&n&&e.nrm(0,"tr",19)}function mn(n,t){1&n&&e.nrm(0,"tr",20)}let un=(()=>{class n{constructor(o,s,r,i,d){this.repoService=o,this.dialog=s,this.toastr=r,this.dataService=i,this.dialogserve=d,this.displayedColumns=["action","category"],this.dataSource=new h.I6,this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getCategories()})}ngOnInit(){this.getCategories()}getCategories(){this.repoService.getData("api/categories").subscribe(o=>{this.dataSource.data=o},o=>{console.log(o)})}addCategory(){this.dialog.open(sn,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}UpdateCategory(o){this.dialog.open(nn,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:o}})}DeleteCategory(o){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the category ?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/categories/${o}`).subscribe(i=>{this.dialogserve.openSuccessDialog("The role has been deleted successfully.").afterClosed().subscribe(d=>{this.getCategories()})})})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(S.bZ),e.rXU(j.tw),e.rXU($),e.rXU(I.o))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-categories"]],decls:20,vars:3,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","category"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,r){1&s&&(e.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),e.EFF(3,"User roles"),e.k0s(),e.nrm(4,"span",3),e.j41(5,"button",4),e.bIt("click",function(){return r.addCategory()}),e.j41(6,"mat-icon"),e.EFF(7,"add"),e.k0s(),e.EFF(8,"Create new category "),e.k0s()(),e.j41(9,"mat-card-content",5)(10,"div",6)(11,"table",7),e.qex(12,8),e.DNE(13,rn,2,0,"th",9)(14,an,11,1,"td",10),e.bVm(),e.qex(15,11),e.DNE(16,cn,2,0,"th",9)(17,ln,2,1,"td",10),e.bVm(),e.DNE(18,dn,1,0,"tr",12)(19,mn,1,0,"tr",13),e.k0s()()()()),2&s&&(e.R7$(11),e.Y8G("dataSource",r.dataSource),e.R7$(7),e.Y8G("matHeaderRowDef",r.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",r.displayedColumns))},dependencies:[U.kk,U.fb,U.Cp,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB],encapsulation:2})}return n})(),hn=(()=>{class n{constructor(o,s,r,i,d){this.repoService=o,this.toastr=s,this.dataService=r,this.dialogserve=i,this.Ref=d,this.validateControl=c=>this.dataForm?.get(c)?.invalid&&this.dataForm?.get(c)?.touched,this.hasError=(c,a)=>this.dataForm?.get(c)?.hasError(a),this.createData=c=>{this.dataForm.valid&&this.executeDataCreation(c)},this.executeDataCreation=c=>{this.repoService.create("api/permissions",{name:c.name}).subscribe(f=>{this.dialogserve.openSuccessDialog("The role has been added successfully.").afterClosed().subscribe(g=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},f=>{this.toastr.error(f),this.Ref.close([])})}}ngOnInit(){this.dataForm=new l.gE({name:new l.MJ("",[l.k0.required,l.k0.maxLength(60)])})}closeModal(){this.Ref.close([])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(j.tw),e.rXU($),e.rXU(I.o),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-add-permission"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Create role"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.closeModal()}),e.j41(6,"mat-icon",4),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",5)(9,"form",6),e.bIt("ngSubmit",function(){return r.createData(r.dataForm.value)}),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Role Name"),e.k0s(),e.nrm(13,"input",8),e.k0s(),e.j41(14,"button",9),e.EFF(15," Save "),e.k0s()()()()),2&s&&(e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(5),e.Y8G("disabled",!r.dataForm.valid))},dependencies:[k.rl,k.nJ,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})(),pn=(()=>{class n{constructor(o,s,r,i,d,c){this.repoService=o,this.toastr=s,this.dataService=r,this.dialogserve=i,this.data=d,this.Ref=c,this.validateControl=a=>this.dataForm?.get(a)?.invalid&&this.dataForm?.get(a)?.touched,this.hasError=(a,u)=>this.dataForm?.get(a)?.hasError(u),this.createData=a=>{this.dataForm.valid&&this.executeDataCreation(a)},this.executeDataCreation=a=>{this.repoService.update(`api/permissions/${this.result.id}`,{name:a.name}).subscribe(v=>{this.dialogserve.openSuccessDialog("The role has been updated successfully.").afterClosed().subscribe(L=>{this.dataService.triggerRefreshTab1(),this.Ref.close([])})},v=>{this.toastr.error(v),this.Ref.close([])})},this.getRoletoUpdate=()=>{const u=`api/permissions/${this.result.id}`;console.log(u),this.repoService.getData(u).subscribe({next:f=>{this.role={...f},this.dataForm.patchValue(this.role)},error:f=>{this.toastr.success(f)}})}}ngOnInit(){this.dataForm=new l.gE({name:new l.MJ("",[l.k0.required,l.k0.maxLength(60)])}),this.result=this.data,this.getRoletoUpdate()}closeModal(){this.Ref.close([])}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(j.tw),e.rXU($),e.rXU(I.o),e.rXU(S.Vh),e.rXU(S.CP))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-update-permission"]],decls:16,vars:2,consts:[[1,"cardWithShadow","theme-card","modal-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],["color","warn"],[1,"b-t-1"],["autocomplete","off","novalidate","",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-100"],["matInput","","formControlName","name"],["mat-flat-button","","color","primary",3,"disabled"]],template:function(s,r){1&s&&(e.j41(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),e.EFF(3,"Update role"),e.k0s(),e.nrm(4,"span",2),e.j41(5,"button",3),e.bIt("click",function(){return r.closeModal()}),e.j41(6,"mat-icon",4),e.EFF(7,"close"),e.k0s()()(),e.j41(8,"mat-card-content",5)(9,"form",6),e.bIt("ngSubmit",function(){return r.createData(r.dataForm.value)}),e.j41(10,"mat-form-field",7)(11,"mat-label"),e.EFF(12,"Role Name"),e.k0s(),e.nrm(13,"input",8),e.k0s(),e.j41(14,"button",9),e.EFF(15," Save "),e.k0s()()()()),2&s&&(e.R7$(9),e.Y8G("formGroup",r.dataForm),e.R7$(5),e.Y8G("disabled",!r.dataForm.valid))},dependencies:[k.rl,k.nJ,P.fg,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}return n})();function fn(n,t){1&n&&(e.j41(0,"th",14),e.EFF(1," Action "),e.k0s())}function gn(n,t){if(1&n){const o=e.RV6();e.j41(0,"td",15)(1,"button",16),e.EFF(2," Action "),e.j41(3,"mat-icon"),e.EFF(4,"arrow_drop_down"),e.k0s()(),e.j41(5,"mat-menu",17,0)(7,"button",18),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.UpdatePermission(r.id))}),e.EFF(8," Edit "),e.k0s(),e.j41(9,"button",18),e.bIt("click",function(){const r=e.eBV(o).$implicit,i=e.XpG();return e.Njj(i.DeletePermission(r.id))}),e.EFF(10," Delete "),e.k0s()()()}if(2&n){const o=e.sdS(6);e.R7$(),e.Y8G("matMenuTriggerFor",o)}}function _n(n,t){1&n&&(e.j41(0,"th",14),e.EFF(1," Category Name "),e.k0s())}function bn(n,t){if(1&n&&(e.j41(0,"td",15),e.EFF(1),e.k0s()),2&n){const o=t.$implicit;e.R7$(),e.SpI(" ",o.name," ")}}function Cn(n,t){1&n&&e.nrm(0,"tr",19)}function kn(n,t){1&n&&e.nrm(0,"tr",20)}const vn=[{path:"",children:[{path:"lists",component:We},{path:"users",component:kt},{path:"roles",component:Ht},{path:"categories",component:un},{path:"permissions",component:(()=>{class n{constructor(o,s,r,i,d){this.repoService=o,this.dialog=s,this.toastr=r,this.dataService=i,this.dialogserve=d,this.displayedColumns=["action","permission"],this.dataSource=new h.I6,this.refreshSubscription=this.dataService.refreshTab1$.subscribe(()=>{this.getCategories()})}ngOnInit(){this.getCategories()}getCategories(){this.repoService.getData("api/permissions").subscribe(o=>{this.dataSource.data=o},o=>{console.log(o)})}addPermission(){this.dialog.open(hn,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms"})}UpdatePermission(o){this.dialog.open(pn,{width:"500px",height:"232px",enterAnimationDuration:"100ms",exitAnimationDuration:"100ms",data:{id:o}})}DeletePermission(o){this.dialogserve.openConfirmDialog("Are you sure, you want to delete the Permission ?").afterClosed().subscribe(s=>{s&&this.repoService.delete(`api/permissions/${o}`).subscribe(i=>{this.dialogserve.openSuccessDialog("The role has been deleted successfully.").afterClosed().subscribe(d=>{this.getCategories()})})})}static#e=this.\u0275fac=function(s){return new(s||n)(e.rXU(E.U),e.rXU(S.bZ),e.rXU(j.tw),e.rXU($),e.rXU(I.o))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-permissions"]],decls:20,vars:3,consts:[["actions","matMenu"],[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"flex-1-auto"],["mat-flat-button","","color","primary","matTooltipPosition","left","matTooltipHideDelay","100000",1,"m-l-8",3,"click"],[1,"b-t-1"],[1,"table-responsive","m-t-16"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","class","f-w-600 mat-subtitle-1 f-s-14",4,"matHeaderCellDef"],["mat-cell","","class","mat-body-1",4,"matCellDef"],["matColumnDef","permission"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","mat-subtitle-1","f-s-14"],["mat-cell","",1,"mat-body-1"],["mat-flat-button","","color","primary",1,"m-t-8",3,"matMenuTriggerFor"],[1,"cardWithShadow"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,r){1&s&&(e.j41(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title",2),e.EFF(3,"User roles"),e.k0s(),e.nrm(4,"span",3),e.j41(5,"button",4),e.bIt("click",function(){return r.addPermission()}),e.j41(6,"mat-icon"),e.EFF(7,"add"),e.k0s(),e.EFF(8,"Create new category "),e.k0s()(),e.j41(9,"mat-card-content",5)(10,"div",6)(11,"table",7),e.qex(12,8),e.DNE(13,fn,2,0,"th",9)(14,gn,11,1,"td",10),e.bVm(),e.qex(15,11),e.DNE(16,_n,2,0,"th",9)(17,bn,2,1,"td",10),e.bVm(),e.DNE(18,Cn,1,0,"tr",12)(19,kn,1,0,"tr",13),e.k0s()()()()),2&s&&(e.R7$(11),e.Y8G("dataSource",r.dataSource),e.R7$(7),e.Y8G("matHeaderRowDef",r.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",r.displayedColumns))},dependencies:[U.kk,U.fb,U.Cp,p.RN,p.m2,p.MM,p.dh,R.$z,T.An,h.Zl,h.tL,h.ji,h.cC,h.YV,h.iL,h.KS,h.$R,h.YZ,h.NB],encapsulation:2})}return n})()},{path:"audits",component:to},{path:"about",component:on},{path:"customer-details/:id",component:so}]}];var Sn=b(5230);let wn=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.$C({type:n});static#o=this.\u0275inj=e.G2t({imports:[A.MD,z.iI.forChild(vn),ge.G,l.YN,l.X1,_e.X.pick(be),Sn.WX,j._B.forRoot({timeOut:3e3,positionClass:"toast-top-right",preventDuplicates:!0,progressBar:!0,closeButton:!0})]})}return n})()}}]);